<!DOCTYPE html>
<html dir='ltr' lang='es' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='width=device-width, initial-scale=1' name='viewport'/>
<title>Álgebra</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<!-- Chrome, Firefox OS and Opera -->
<meta content='' name='theme-color'/>
<!-- Windows Phone -->
<meta content='' name='msapplication-navbutton-color'/>
<meta content='blogger' name='generator'/>
<link href='https://estoesunaprueba1232135.blogspot.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Prueba - Atom" href="https://estoesunaprueba1232135.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Prueba - RSS" href="https://estoesunaprueba1232135.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Prueba - Atom" href="https://www.blogger.com/feeds/8157697924135710057/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Prueba - Atom" href="https://estoesunaprueba1232135.blogspot.com/feeds/7145357825036980313/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html' property='og:url'/>
<meta content='Álgebra' property='og:title'/>
<meta content='                 Álgebra - Contenido del Curso | Academia Ohara                                                                             ...' property='og:description'/>
<style id='page-skin-1' type='text/css'><!--

--></style>
<style>
      /* ===========================
      HEADER APPLE STYLE
      =========================== */
      .headerpic-wrapper {
      background: #fff;
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.2);
      top: 0;
      width: 100%;
      z-index: 2000;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      min-height: 70px;
      position: relative;
      height: 50px;
      }

      .header-wrapper {
      max-width: 1100px;
      margin: 0 auto;
      height: 56px;
      padding: 0 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 70px;
      position: relative;
      z-index: 1;
      height: 100%;
      }

      .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      }

      /* ----------------------------
      LOGO
      ---------------------------- */

      .logo-container {
      width: 36px;
      height: 36px;
      border-radius: 9px;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      /* Header logo con efecto hover */
      .header-logo {
      cursor: pointer;
      transition: transform 0.3s ease, opacity 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      }

      .header-logo:hover {
      transform: scale(1.05);
      opacity: 0.9;
      }

      .logo-img {
      width: 42px;
      height: 42px;
      border-radius: 8px;
      transition: transform 0.3s ease;
      }

      /* Efecto hover en el logo */
      .header-logo:hover .logo-img {
      transform: rotate(10deg) scale(1.1);
      }

      .logo-text, .logo-subtext {
      -webkit-font-smoothing: antialiased !important;
      }

      .logo-text {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      font-weight: 700;
      font-size: 18px;
      letter-spacing: -0.3px;
      color: #000;
      }

      .header-logo:hover .logo-text {
      color: #7FA8A4;
      }

      .logo-subtext {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      font-size: 11px;
      color: #000;
      margin-top: -2px;
      letter-spacing: 0.5px;
      }

      /* ----------------------------
      NAVEGACIÓN
      ---------------------------- */
      .header-nav {
      display: flex;
      gap: 14px;
      align-items: center;
      position: relative;
      }
      .header-nav a {
      position: relative;
      display: inline-block;
      padding: 8px 16px;
      border-radius: 30px;
      font-weight: 600;
      text-decoration: none;
      color: #fff;
      transition: all 0.3s ease;
      }

      .header-nav a.miscursos-btn:hover {
      background: linear-gradient(135deg, rgba(0, 140, 150, 0.95) 0%, rgba(0, 180, 190, 0.95) 100%);
      border-color: rgba(0, 220, 230, 0.9);
      transform: translateY(-2px);
      animation: pulseCyanTurquoise 2s infinite;
      color: #ffffff;
      }

      @keyframes pulseCyanTurquoise {
      0% { 
      box-shadow: 0 0 0 0 rgba(0, 220, 200, 0.8);
      }
      70% { 
      box-shadow: 0 0 0 10px rgba(0, 220, 200, 0);
      }
      100% { 
      box-shadow: 0 0 0 0 rgba(0, 220, 200, 0);
      }
      }

      .nav-button {
      position: relative;
      z-index: 3000;
      padding: 10px 18px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      font-size: 15px;
      transition: all 0.3s ease;
      color: #34495e;
      background-color: #000;
      border: 1px solid #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      }
      /* ===========================
      IMÁGENES EN LOS EXTREMOS
      =========================== */

      /* CONTENEDORES PARA IMÁGENES EN LOS EXTREMOS */
      /* Contenedor izquierdo absoluto */
      .left-absolute-container {
      position: absolute;
      left: 0px;
      top: 50%;
      transform: translateY(-50%);
      height: 100%;
      display: flex;
      align-items: center;
      z-index: 1000;
      overflow: hidden;
      }

      .left-absolute-container .absolute-image {
      transform: scaleX(-1); /* Solo volteo horizontal */
      }


      /* Contenedor derecho absoluto */
      .right-absolute-container {
      position: absolute;
      right: 0px;
      top: 50%;
      transform: translateY(-50%);
      height: 100%;
      display: flex;
      align-items: center;
      z-index: 1000; 
      overflow: hidden;
      }

      /* Estilos para las imágenes en los extremos */
      .absolute-image {
      height: 150px; /* Ajusta la altura según necesites */
      width: auto;
      border-radius: 10px;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 0.9;
      }

      /* ----------------------------
      RESPONSIVE
      ---------------------------- */

      /* Oculta la imagen izquierda cuando la pantalla es pequeña (zoom) */
      @media (max-width: 1300px) {
      .left-absolute-container,
      .right-absolute-container {
      display: none !important;
      }

      .header-wrapper {
      max-width: 100%;
      }
      }

      @media (max-width: 768px) {
      .header-wrapper {
      padding: 0 15px;
      }

      .header-nav {
      gap: 8px;
      }

      .nav-button {
      padding: 8px 12px;
      font-size: 14px;
      }

      .logo-text {
      font-size: 16px;
      }

      .logo-subtext {
      font-size: 10px;
      }
      }

      @media (max-width: 600px) {
      .header-top {
      flex-direction: column;
      gap: 15px;
      padding: 15px 0;
      }

      .headerpic-wrapper {
      height: auto;
      min-height: auto;
      }

      .header-nav {
      flex-wrap: wrap;
      justify-content: center;
      }

      .nav-button {
      flex: 1;
      min-width: 120px;
      text-align: center;
      }
      }

      /* ============================
      Animación imagenes  
      ================================ */
      .left-absolute-container,
      .right-absolute-container {
      transition: all 0.3s ease;
      }

      .hover-desde-header img {
      filter: invert(72%) sepia(25%) saturate(355%) hue-rotate(128deg) brightness(82%) contrast(90%);
      }


      /* ============================
      Avatar con alto contraste
      ================================ */

      .user-avatar {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #000; /* Verde Apple */
      font-size: 15px;
      font-weight: 700;
      border: 2px solid rgba(255, 255, 255, 0.9);
      box-shadow: 0 3px 12px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .user-avatar:hover {
      transform: scale(1.08);
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      }

      /* ===== FONDO Y CONTENIDO ===== */
      body {
      background-color: #f5f5f7 !important;
      color: #1d1d1f;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      }

      
.all-container {
  min-height: calc(100vh - 64px);
  background: linear-gradient(180deg, #99e1de 0% , #ffffff 100%);
  padding: 30px 20px;
}

      .demo-title {
      text-align: center;
      color: #1d1d1f;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      font-weight: 700;
      margin: 0 0 40px 0;
      font-size: 28px;
      padding-top: 20px;
      }

      .demo-subtitle {
      text-align: center;
      color: #6e6e73;
      font-size: 16px;
      max-width: 800px;
      margin: 0 auto 50px;
      line-height: 1.6;
      }

      /* Grid de imágenes */
      .image-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
      }

      .image-wrapper {
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 12px 36px rgba(0,0,0,0.12);
      background: white;
      }

      .image-wrapper:hover {
      transform: translateY(-10px);
      box-shadow: 0 24px 50px rgba(0,0,0,0.18);
      }

      .image-wrapper img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      transition: transform 0.6s ease;
      }

      .image-wrapper:hover img {
      transform: scale(1.08);
      }

      .image-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);
      color: white;
      padding: 24px;
      transform: translateY(10px);
      opacity: 0;
      transition: all 0.4s ease;
      }

      .image-wrapper:hover .image-overlay {
      transform: translateY(0);
      opacity: 1;
      }

      .image-title {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 6px;
      }

      .image-subtitle {
      font-size: 13px;
      opacity: 0.9;
      }

      /* Responsive */
      @media (max-width: 900px) {
      .image-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      }
      }

      @media (max-width: 768px) {
      .image-grid {
      grid-template-columns: 1fr;
      max-width: 500px;
      }
      }

      /* Tarjetas de características */
      .features-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      max-width: 1100px;
      margin: 60px auto;
      padding: 0 20px;
      }

      .feature-card {
      background: white;
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      transition: transform 0.3s ease;
      }

      .feature-card:hover {
      transform: translateY(-5px);
      }

      .feature-icon {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      background: linear-gradient(135deg, #0071e3 0%, #0062c4 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      }

      .feature-icon i {
      color: white;
      font-size: 24px;
      }

      .feature-title {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      font-weight: 700;
      font-size: 20px;
      color: #1d1d1f;
      margin-bottom: 12px;
      }

      .feature-text {
      color: #6e6e73;
      line-height: 1.6;
      font-size: 15px;
      }

      @media (max-width: 900px) {
      .features-container {
      grid-template-columns: repeat(2, 1fr);
      }
      }

      @media (max-width: 600px) {
      .features-container {
      grid-template-columns: 1fr;
      }
      }

      /* Grid de apuntes */
      .grid-apuntes-container {
      display: grid;
      grid-template-columns: 60% 13.33% 13.33% 13.33%;
      gap: 10px;
      max-width: 2000px;
      margin: 30px auto 0 auto;
      padding: 0 20px;
      box-sizing: border-box;
      }

      .grid-apuntes-cell {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: transparent;
      border: 2px solid #fff;
      padding: 15px 10px;
      text-decoration: none;
      color: white;
      font-weight: bold;
      border-radius: 8px;
      transition: background-color 0.3s, transform 0.3s;
      text-align: center;
      min-height: 60px;
      font-size: 14px;
      line-height: 1.3;
      }
      /* ===== PLATAFORMA DE CURSOS UNIVERSITARIOS ===== */
      .universidad-container {
      max-width: 1400px;
      margin: 0 auto 50px;
      padding: 30px;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.06);
      }

      /* HEADER CON COLOR #000 */
      .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      padding: 25px 30px;
      background: linear-gradient(135deg, #99e1de 0% , #ffffff 100%);
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(0, 199, 190, 0.15);
      }

      .header h1 {
      font-size: 40px;
      font-weight: 800;
      color: white;
      letter-spacing: -0.8px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      /* CONTROLES DE MODO Y FILTROS */
      .controls-container{
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
      padding: 0px 24px;
      }

      .modo-selector {
      display: flex;
      background: rgba(0,0,0,0.2);
      border-radius: 16px;
      padding: 8px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
      }

      .modo-btn {
      padding: 14px 32px;
      border-radius: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      background: transparent;
      color: #fff;
      font-size: 16px;
      }

      .modo-btn.activo {
      background: white;
      color: #000;
      box-shadow: 0 4px 16px rgba(0, 199, 190, 0.2);
      }

      .modo-btn:hover:not(.activo) {
      color: #1d1d1f;
      }

      /* FILTROS POR AÑO */
      .filtros-container {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      }

      /* ===== BOTONES DE FILTRO POR AÑO ===== */

      /* ESTADO NORMAL DE TODOS LOS BOTONES DE FILTRO */
      .filtro-btn {
      padding: 12px 24px;
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid #e5e5ea;
      background: white;
      color: #6e6e73;
      font-size: 15px;
      position: relative;
      overflow: hidden;
      }

      /* ===== HOVER ESPECÍFICO POR AÑO ===== */

      /* Hover - Filtro Primer año (verde turquesa) */
      .filtro-btn[data-filtro="primero"]:hover:not(.activo) {
      border-color: #99e1de;
      background: white;
      color: #00a8a1;
      box-shadow: 0 4px 12px rgba(153, 225, 222, 0.2);
      transform: translateY(-2px);
      }

      /* Hover - Filtro Segundo año (azul) */
      .filtro-btn[data-filtro="segundo"]:hover:not(.activo) {
      border-color: #5a8dee;
      background: white;
      color: #3a6bd6;
      box-shadow: 0 4px 12px rgba(90, 141, 238, 0.2);
      transform: translateY(-2px);
      }

      /* Hover - Filtro Tercer año (púrpura) */
      .filtro-btn[data-filtro="tercero"]:hover:not(.activo) {
      border-color: #9d7bd8;
      background: white;
      color: #7c5ac2;
      box-shadow: 0 4px 12px rgba(157, 123, 216, 0.2);
      transform: translateY(-2px);
      }

      /* Hover - Filtro Cuarto año (naranja) */
      .filtro-btn[data-filtro="cuarto"]:hover:not(.activo) {
      border-color: #ff9500;
      background: white;
      color: #e68500;
      box-shadow: 0 4px 12px rgba(255, 149, 0, 0.2);
      transform: translateY(-2px);
      }

      /* Hover - Filtro Todos */
      .filtro-btn[data-filtro="todos"]:hover:not(.activo) {
      border-color: #000;
      background: white;
      color: #000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
      }

      /* ===== ESTADO ACTIVO (FILTRO SELECCIONADO) ===== */

      /* Activo - Filtro Primer año (verde turquesa) */
      .filtro-btn[data-filtro="primero"].activo {
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(153, 225, 222, 0.3);
      }

      /* Activo - Filtro Segundo año (azul) */
      .filtro-btn[data-filtro="segundo"].activo {
      background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(90, 141, 238, 0.3);
      }

      /* Activo - Filtro Tercer año (púrpura) */
      .filtro-btn[data-filtro="tercero"].activo {
      background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(157, 123, 216, 0.3);
      }

      /* Activo - Filtro Cuarto año (naranja) */
      .filtro-btn[data-filtro="cuarto"].activo {
      background: linear-gradient(135deg, #ff9500 0%, #e68500 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(255, 149, 0, 0.3);
      }

      /* Activo - Filtro Todos (mantiene el diseño original) */
      .filtro-btn[data-filtro="todos"].activo {
      background: linear-gradient(135deg, #6e6e73 0%, #1d1d1f 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(29, 29, 31, 0.3);
      }

      /* ===== EFECTO DE PULSO PARA FILTROS ACTIVOS ===== */

      @keyframes pulseFiltroPrimero {
      0% { box-shadow: 0 6px 20px rgba(153, 225, 222, 0.3); }
      50% { box-shadow: 0 6px 20px rgba(153, 225, 222, 0.5); }
      100% { box-shadow: 0 6px 20px rgba(153, 225, 222, 0.3); }
      }

      @keyframes pulseFiltroSegundo {
      0% { box-shadow: 0 6px 20px rgba(90, 141, 238, 0.3); }
      50% { box-shadow: 0 6px 20px rgba(90, 141, 238, 0.5); }
      100% { box-shadow: 0 6px 20px rgba(90, 141, 238, 0.3); }
      }

      @keyframes pulseFiltroTercero {
      0% { box-shadow: 0 6px 20px rgba(157, 123, 216, 0.3); }
      50% { box-shadow: 0 6px 20px rgba(157, 123, 216, 0.5); }
      100% { box-shadow: 0 6px 20px rgba(157, 123, 216, 0.3); }
      }

      @keyframes pulseFiltroCuarto {
      0% { box-shadow: 0 6px 20px rgba(255, 149, 0, 0.3); }
      50% { box-shadow: 0 6px 20px rgba(255, 149, 0, 0.5); }
      100% { box-shadow: 0 6px 20px rgba(255, 149, 0, 0.3); }
      }

      /* Aplicar pulsación sutil a filtros activos */
      .filtro-btn[data-filtro="primero"].activo {
      animation: pulseFiltroPrimero 2s ease-in-out infinite;
      }

      .filtro-btn[data-filtro="segundo"].activo {
      animation: pulseFiltroSegundo 2s ease-in-out infinite;
      }

      .filtro-btn[data-filtro="tercero"].activo {
      animation: pulseFiltroTercero 2s ease-in-out infinite;
      }

      .filtro-btn[data-filtro="cuarto"].activo {
      animation: pulseFiltroCuarto 2s ease-in-out infinite;
      }

      .filtro-btn[data-filtro="todos"].activo {
      animation: pulseFiltroTodos 2s ease-in-out infinite;
      }

      @keyframes pulseFiltroTodos {
      0% { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); }
      50% { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }
      100% { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); }
      }

      /* ===== EFECTO DE "CLIC" AL PRESIONAR ===== */

      .filtro-btn:active {
      transform: translateY(1px) scale(0.98);
      transition: transform 0.1s ease;
      }

      /* ===== BOTONES DE FILTRO EN MODO "MIS CURSOS" ===== */

      /* Mismo estilo para botones en Mis Cursos */
      .filtro-btn-mis {
      padding: 12px 24px;
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid #e5e5ea;
      background: white;
      color: #6e6e73;
      font-size: 15px !important;
      position: relative;
      overflow: hidden;
      }

      /* Aplicar mismos estilos de hover a filtro-btn-mis */
      .filtro-btn-mis[data-filtro="primero"]:hover:not(.activo) {
      border-color: #99e1de;
      background: white;
      color: #00a8a1;
      box-shadow: 0 4px 12px rgba(153, 225, 222, 0.2);
      transform: translateY(-2px);
      }

      .filtro-btn-mis[data-filtro="segundo"]:hover:not(.activo) {
      border-color: #5a8dee;
      background: white;
      color: #3a6bd6;
      box-shadow: 0 4px 12px rgba(90, 141, 238, 0.2);
      transform: translateY(-2px);
      }

      .filtro-btn-mis[data-filtro="tercero"]:hover:not(.activo) {
      border-color: #9d7bd8;
      background: white;
      color: #7c5ac2;
      box-shadow: 0 4px 12px rgba(157, 123, 216, 0.2);
      transform: translateY(-2px);
      }

      .filtro-btn-mis[data-filtro="cuarto"]:hover:not(.activo) {
      border-color: #ff9500;
      background: white;
      color: #e68500;
      box-shadow: 0 4px 12px rgba(255, 149, 0, 0.2);
      transform: translateY(-2px);
      }

      .filtro-btn-mis[data-filtro="todos"]:hover:not(.activo) {
      border-color: #000 !important;
      background: white !important;
      color: #000 !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
      transform: translateY(-2px) !important;
      }

      /* Aplicar mismos estilos activos a filtro-btn-mis */
      .filtro-btn-mis[data-filtro="primero"].activo {
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
      border-color: transparent !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(153, 225, 222, 0.3);
      animation: pulseFiltroPrimero 2s ease-in-out infinite;
      }

      .filtro-btn-mis[data-filtro="segundo"].activo {
      background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%) !important;
      border-color: transparent !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(90, 141, 238, 0.3);
      animation: pulseFiltroSegundo 2s ease-in-out infinite;
      }

      .filtro-btn-mis[data-filtro="tercero"].activo {
      background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%) !important;
      border-color: transparent !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(157, 123, 216, 0.3);
      animation: pulseFiltroTercero 2s ease-in-out infinite;
      }

      .filtro-btn-mis[data-filtro="cuarto"].activo {
      background: linear-gradient(135deg, #ff9500 0%, #e68500 100%) !important;
      border-color: transparent !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(255, 149, 0, 0.3);
      animation: pulseFiltroCuarto 2s ease-in-out infinite;
      }

      .filtro-btn-mis[data-filtro="todos"].activo {
      background: linear-gradient(135deg, #6e6e73 0%, #1d1d1f 100%) !important;
      border: none !important;
      color: white !important;
      box-shadow: 0 6px 20px rgba(29, 29, 31, 0.3);
      animation: pulseFiltroTodos 2s ease-in-out infinite;
      }

      /* CONTROLES MIS CURSOS */
      .mis-cursos-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
      background: transparent !important;
      padding-top: 0px !important;
      }


      .toggle-container {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      }

      .toggle-checkbox {
      display: none;
      }

      .toggle-slider {
      width: 54px;
      height: 28px;
      background: #e5e5ea;
      border-radius: 50px;
      position: relative;
      transition: all 0.3s ease;
      }

      .toggle-slider:before {
      content: '';
      position: absolute;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      }

      .toggle-checkbox:checked + .toggle-slider {
      background: #000;
      }

      .toggle-checkbox:checked + .toggle-slider:before {
      transform: translateX(26px);
      }

      .toggle-label {
      font-weight: 600;
      color: #1d1d1f;
      font-size: 15px;
      }

      /* GRID DE CURSOS - CORREGIDO */
      .cursos-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 28px;
      }

      .mis-curso-card {
      background: #ffffff;
      border-radius: 22px;
      padding: 28px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      height: auto;
      min-height: 280px;
      position: relative;
      overflow: hidden;
      }

      .mis-curso-card:hover {
      box-shadow: 0 20px 40px rgba(0, 199, 190, 0.15);
      border-color: rgba(0, 199, 190, 0.3);
      }

      .mis-curso-categoria {
      display: inline-block;
      padding: 8px 18px;
      background: linear-gradient(135deg, #000 0%, #00a8a1 100%);
      border-radius: 16px;
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 18px;
      color: white;
      align-self: flex-start;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      }

      /* Estilos para las etiquetas de año clicables */
      .mis-curso-categoria.filtro-anio {
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      }

      .mis-curso-categoria.filtro-anio:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 168, 161, 0.3);
      }

      .mis-curso-categoria.filtro-anio:active {
      transform: translateY(0);
      }


      /* ===== ESTILOS DE CATEGORÍA COMO FILTRO ACTIVO POR AÑO ===== */

      /* Primer año activo como filtro - verde turquesa */
      .mis-curso-categoria.filtro-anio[data-anio="primero"].filtro-activo {
      background: linear-gradient(135deg, #00c7be 0%, #009c95 100%) !important;
      color: white !important;
      animation: pulseFiltroPrimero 2s infinite;
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.3) !important;
      }

      @keyframes pulseFiltroPrimero {
      0% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.3),
      0 0 0 0 rgba(0, 199, 190, 0.4);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.4),
      0 0 0 6px rgba(0, 199, 190, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.3),
      0 0 0 0 rgba(0, 199, 190, 0);
      }
      }

      /* Segundo año activo como filtro - azul */
      .mis-curso-categoria.filtro-anio[data-anio="segundo"].filtro-activo {
      background: linear-gradient(135deg, #3a6bd6 0%, #2a55b4 100%) !important;
      color: white !important;
      animation: pulseFiltroSegundo 2s infinite;
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.3) !important;
      }

      @keyframes pulseFiltroSegundo {
      0% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.3),
      0 0 0 0 rgba(58, 107, 214, 0.4);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.4),
      0 0 0 6px rgba(58, 107, 214, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.3),
      0 0 0 0 rgba(58, 107, 214, 0);
      }
      }

      /* Tercer año activo como filtro - púrpura */
      .mis-curso-categoria.filtro-anio[data-anio="tercero"].filtro-activo {
      background: linear-gradient(135deg, #7c5ac2 0%, #6349a8 100%) !important;
      color: white !important;
      animation: pulseFiltroTercero 2s infinite;
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.3) !important;
      }

      @keyframes pulseFiltroTercero {
      0% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.3),
      0 0 0 0 rgba(124, 90, 194, 0.4);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.4),
      0 0 0 6px rgba(124, 90, 194, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.3),
      0 0 0 0 rgba(124, 90, 194, 0);
      }
      }

      /* Cuarto año activo como filtro - naranja */
      .mis-curso-categoria.filtro-anio[data-anio="cuarto"].filtro-activo {
      background: linear-gradient(135deg, #e68500 0%, #cc7700 100%) !important;
      color: white !important;
      animation: pulseFiltroCuarto 2s infinite;
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.3) !important;
      }

      @keyframes pulseFiltroCuarto {
      0% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.3),
      0 0 0 0 rgba(230, 133, 0, 0.4);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.4),
      0 0 0 6px rgba(230, 133, 0, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.3),
      0 0 0 0 rgba(230, 133, 0, 0);
      }
      }

      /* ===== EFECTO HOVER ADICIONAL PARA CATEGORÍAS ACTIVAS ===== */

      /* Hover en categoría activa de primer año */
      .mis-curso-categoria.filtro-anio[data-anio="primero"].filtro-activo:hover {
      animation: pulseFiltroPrimeroIntenso 1.5s infinite !important;
      }

      @keyframes pulseFiltroPrimeroIntenso {
      0% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.4),
      0 0 0 0 rgba(0, 199, 190, 0.6);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.5),
      0 0 0 8px rgba(0, 199, 190, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(0, 199, 190, 0.4),
      0 0 0 0 rgba(0, 199, 190, 0);
      }
      }

      /* Hover en categoría activa de segundo año */
      .mis-curso-categoria.filtro-anio[data-anio="segundo"].filtro-activo:hover {
      animation: pulseFiltroSegundoIntenso 1.5s infinite !important;
      }

      @keyframes pulseFiltroSegundoIntenso {
      0% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.4),
      0 0 0 0 rgba(58, 107, 214, 0.6);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.5),
      0 0 0 8px rgba(58, 107, 214, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(58, 107, 214, 0.4),
      0 0 0 0 rgba(58, 107, 214, 0);
      }
      }

      /* Hover en categoría activa de tercer año */
      .mis-curso-categoria.filtro-anio[data-anio="tercero"].filtro-activo:hover {
      animation: pulseFiltroTerceroIntenso 1.5s infinite !important;
      }

      @keyframes pulseFiltroTerceroIntenso {
      0% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.4),
      0 0 0 0 rgba(124, 90, 194, 0.6);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.5),
      0 0 0 8px rgba(124, 90, 194, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(124, 90, 194, 0.4),
      0 0 0 0 rgba(124, 90, 194, 0);
      }
      }

      /* Hover en categoría activa de cuarto año */
      .mis-curso-categoria.filtro-anio[data-anio="cuarto"].filtro-activo:hover {
      animation: pulseFiltroCuartoIntenso 1.5s infinite !important;
      }

      @keyframes pulseFiltroCuartoIntenso {
      0% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.4),
      0 0 0 0 rgba(230, 133, 0, 0.6);
      }
      70% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.5),
      0 0 0 8px rgba(230, 133, 0, 0);
      }
      100% { 
      box-shadow: 0 4px 15px rgba(230, 133, 0, 0.4),
      0 0 0 0 rgba(230, 133, 0, 0);
      }
      }

      /* ===== TRANSICIONES SUAVES ===== */

      .mis-curso-categoria.filtro-anio {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* ===== INDICADOR VISUAL DE QUE ES CLICABLE ===== */

      .mis-curso-categoria.filtro-anio {
      cursor: pointer;
      position: relative;
      }


      @keyframes bounceCheck {
      0% { transform: translateY(1px) scale(0); }
      70% { transform: translateY(1px) scale(1.2); }
      100% { transform: translateY(1px) scale(1); }
      }

      .mis-curso-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: flex-start; 
      margin-bottom: 16px;
      }

      .mis-curso-titulo { 
      font-size: 24px; 
      font-weight: 700; 
      color: #1d1d1f;
      line-height: 1.3;
      flex: 1;
      }

      .mis-curso-precio { 
      font-size: 22px; 
      font-weight: 800; 
      color: #000; 
      margin-left: 15px;
      }

      .mis-curso-desc { 
      font-size: 15px; 
      margin-bottom: 24px; 
      color: #6e6e73; 
      line-height: 1.6;
      flex-grow: 1;
      }

      /* BOTONES DE ACCIÓN */
      .curso-acciones {
      display: flex;
      gap: 12px;
      margin-top: auto;
      }

      .btn-primario, .btn-secundario {
      flex: 1;
      padding: 16px 24px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      text-align: center;
      }

      .btn-primario {
      background: linear-gradient(135deg, #000 0%, #00a8a1 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 199, 190, 0.25);
      }

      .btn-primario:hover { 
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.35);
      }

      .btn-secundario {
      background: transparent;
      color: #000;
      border: 2px solid #000;
      }

      .btn-secundario:hover {
      background: rgba(0, 199, 190, 0.05);
      }

      .btn-comprado {
      background: linear-gradient(135deg, #34c759 0%, #30a14e 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(52, 199, 89, 0.25);
      cursor: default;
      }

      /* ESTADO DE COMPLETADO */
      .completado-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #e5e5ea;
      }

      .completado-checkbox {
      width: 24px;
      height: 24px;
      border-radius: 8px;
      border: 2px solid #e5e5ea;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      }

      .completado-checkbox.checked {
      background: #000;
      border-color: #000;
      }

      .completado-checkbox.checked:after {
      content: '\2713'; /* Código Unicode para checkmark (&#10003;) */
      color: white;
      font-weight: bold;
      font-size: 14px;
      }

      .completado-label {
      font-weight: 600;
      color: #6e6e73;
      font-size: 14px;
      }

      .oculto {
      display: none !important;
      }

      /* BARRA DE PROGRESO */
      .mis-curso-progreso {
      width: 100%;
      height: 8px;
      background: #e5e5ea;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 12px;
      }

      .mis-curso-progreso-bar {
      height: 100%;
      background: linear-gradient(90deg, #000 0%, #00a8a1 100%);
      border-radius: 4px;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .mis-curso-progreso-texto {
      font-size: 14px;
      color: #6e6e73;
      margin-top: 8px;
      text-align: right;
      font-weight: 600;
      }

      /* ESTADO VACÍO */
      .empty-state {
      text-align: center;
      padding: 80px 20px;
      color: #6e6e73;
      grid-column: 1 / -1;
      }

      .empty-state h3 {
      font-size: 32px;
      margin-bottom: 16px;
      color: #1d1d1f;
      font-weight: 700;
      }

      .empty-state p {
      max-width: 500px;
      margin: 0 auto 30px;
      font-size: 17px;
      line-height: 1.6;
      }

      .empty-state-btn {
      display: inline-block;
      padding: 18px 36px;
      background: linear-gradient(135deg, #000 0%, #00a8a1 100%);
      color: white !important;
      border-radius: 16px;
      text-decoration: none;
      font-weight: 600;
      font-size: 17px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 6px 16px rgba(0, 199, 190, 0.25);
      }

      .empty-state-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(0, 199, 190, 0.35);
      }

      /* MODAL DE DETALLES DEL CURSO */
      .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 20px;
      }

      .modal-container {
      background: white;
      border-radius: 24px;
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 40px;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      }

      .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f5f5f7;
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1d1d1f;
      }

      .modal-header {
      margin-bottom: 30px;
      }

      .modal-titulo {
      font-size: 32px;
      font-weight: 800;
      color: #1d1d1f;
      margin-bottom: 10px;
      }

      .modal-subtitulo {
      font-size: 17px;
      color: #000;
      font-weight: 600;
      }

      .modal-contenido {
      margin-bottom: 40px;
      }

      .modal-section {
      margin-bottom: 30px;
      }

      .modal-section h3 {
      font-size: 22px;
      margin-bottom: 15px;
      color: #1d1d1f;
      }

      .modal-section ul {
      padding-left: 20px;
      }

      .modal-section li {
      margin-bottom: 10px;
      color: #6e6e73;
      }


/* ===========================
   NOTIFICACIONES APPLE GLASS MEJORADAS
   =========================== */
.apple-notification {
    position: fixed;
    top: 80px;
    right: 20px;
    min-width: 300px;
    max-width: 400px;
    padding: 18px 24px;
    border-radius: 16px;
    
    /* Efecto glass blanco consistente */
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    
    /* Borde sutil glass */
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 
        0 20px 50px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    
    /* Texto */
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
    font-size: 15px;
    font-weight: 500;
    line-height: 1.5;
    letter-spacing: -0.1px;
    color: rgba(0, 0, 0, 0.85);
    
    /* Animación */
    transform: translateX(100%) scale(0.95);
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    
    /* Layout */
    z-index: 9999999999;
    overflow: hidden;
    cursor: pointer;
    user-select: none;
    
    /* Flex para alinear ícono y texto */
    display: flex;
    align-items: flex-start;
    gap: 14px;
}

/* Brillo superior estilo glass */
.apple-notification::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.3), 
        transparent);
    z-index: 1;
}

/* Fondo interior difuminado */
.apple-notification::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
        circle at 30% 20%,
        rgba(255, 255, 255, 0.3) 0%,
        transparent 70%
    );
    border-radius: 16px;
    z-index: -1;
}

/* Estados visibles */
.apple-notification.show {
    transform: translateX(0) scale(1);
    opacity: 1;
}

.apple-notification.hide {
    transform: translateX(100%) scale(0.95);
    opacity: 0;
}

/* Contenedor del ícono */
.apple-notification-icon {
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    flex-shrink: 0;
    margin-top: 2px;
    font-weight: 600;
}

/* Contenedor del contenido */
.apple-notification-content {
    flex: 1;
}

/* Tipos de notificación - íconos con colores sutiles */
.apple-notification.success .apple-notification-icon {
    background-color: rgba(52, 199, 89, 0.15);
    color: #34C759;
}

.apple-notification.error .apple-notification-icon {
    background-color: rgba(255, 59, 48, 0.15);
    color: #FF3B30;
}

.apple-notification.info .apple-notification-icon {
    background-color: rgba(0, 122, 255, 0.15);
    color: #007AFF;
}

.apple-notification.warning .apple-notification-icon {
    background-color: rgba(255, 149, 0, 0.15);
    color: #FF9500;
}

/* Barra lateral sutil para indicar tipo */
.apple-notification::after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    border-radius: 16px 0 0 16px;
    background-color: transparent;
    transition: background-color 0.3s ease;
}

.apple-notification.success::after {
    background-color: rgba(52, 199, 89, 0.3);
}

.apple-notification.error::after {
    background-color: rgba(255, 59, 48, 0.3);
}

.apple-notification.info::after {
    background-color: rgba(0, 122, 255, 0.3);
}

.apple-notification.warning::after {
    background-color: rgba(255, 149, 0, 0.3);
}

/* Responsive */
@media (max-width: 768px) {
    .apple-notification {
        min-width: 280px;
        max-width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        top: 20px;
    }
}      
      
/* Ícono opcional (se puede agregar con HTML) */
.apple-notification .icon {
    display: inline-block;
    width: 20px;
    height: 20px;
    margin-right: 12px;
    vertical-align: middle;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

      /* Responsive */
@media (max-width: 768px) {
    .apple-notification {
        right: 10px;
        left: 10px;
        max-width: calc(100% - 20px);
        min-width: auto;
        top: 70px;
    }
}

/* Fallback para navegadores sin backdrop-filter */
@supports not (backdrop-filter: blur(40px)) {
    .apple-notification {
        background: rgba(30, 30, 35, 0.95);
    }
}

      
      
/* =========================
        RESPONSIVE
========================= */
      @media (max-width: 768px) {
      .header {
      flex-direction: column;
      align-items: flex-start;
      gap: 20px;
      padding: 20px;
      }

      .controls-container {
      flex-direction: column;
      align-items: stretch;
      }

      .modo-selector {
      width: 100%;
      justify-content: center;
      }

      .cursos-container {
      grid-template-columns: 1fr;
      }

      .curso-acciones {
      flex-direction: column;
      }

      .modal-container {
      padding: 20px;
      }
      }

      }
    
    /* Contenedor centrado */
.header-center {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
}

/* Estilos del campus virtual */
.campus-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #2c3e50;
  padding: 5px 15px;
  background: rgba(255,255,255,0.9);
  border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  white-space: nowrap;
}

/* Header necesita posición relativa */
.header-top {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 70px;
}

/* Asegurar que el logo y nav mantengan su posición */
.header-logo, .header-nav {
  z-index: 2;
  position: relative;
}

/* Opcional: reducir logo en posts */
.post .header-logo .logo-text {
  font-size: 1.1em;
}

.post .header-logo .logo-subtext {
  font-size: 0.8em;
}
    </style>
<style>
/* ===========================
   DROPDOWN COMPLETO - PANTALLA COMPLETA
=========================== */

/* Contenedor principal - Pantalla completa */
.dropdown-menu {
    position: fixed;
    top: 70px;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: calc(100vh - 70px);
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    pointer-events: none;
    border-radius: 0;
    box-shadow: none;
}

/* Prevenir scroll en el body cuando el dropdown está abierto */
body.dropdown-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
}

.dropdown-menu.active {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

.close-dropdown-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  
  /* Fondo con efecto glassmorphism */
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  
  /* Borde sutil */
  border: 0.5px solid rgba(255, 255, 255, 0.2);
  
  /* Sombra para profundidad y brillo */
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.1),
    0 0 0 0.5px rgba(255, 255, 255, 0.7),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
  
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10001;
  
  /* Transiciones suaves */
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  
  color: #1d1d1f;
  font-size: 16px;
  font-weight: 600;
}

/* Efecto hover - Apple suele hacerlo más sutil */
.close-dropdown-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(25px) saturate(200%);
  -webkit-backdrop-filter: blur(25px) saturate(200%);
  transform: scale(1.05);
  
  /* Brillo más pronunciado al hover */
  box-shadow: 
    0 6px 20px rgba(0, 0, 0, 0.15),
    0 0 0 0.5px rgba(255, 255, 255, 0.9),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* Efecto al hacer click (active) */
.close-dropdown-btn:active {
  transform: scale(0.95);
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.1),
    0 0 0 0.5px rgba(255, 255, 255, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Para mayor compatibilidad con Safari */
@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
  .close-dropdown-btn {
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
}

/* Versión alternativa con gradiente para navegadores sin backdrop-filter */
@media not all and (backdrop-filter) {
  .close-dropdown-btn {
    background: rgba(245, 245, 247, 0.9);
  }
}
  
/* Botón de acceder - Ajustado */
.btn-acceder-curso {
    position: relative;
    z-index: 10000;
    margin-right: 60px;
    padding: 16px 32px;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    color: white;
    border: none;
    border-radius: 14px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    box-shadow: 0 6px 16px rgba(0, 168, 161, 0.2);
}

.btn-acceder-curso:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(0, 168, 161, 0.3);
}

/* Layout de dos paneles */
.cursos-layout {
    display: flex;
    height: 100%;
    width: 100%;
    overflow: hidden;
    padding: 20px;
    box-sizing: border-box;
}

/* PANEL IZQUIERDO: Lista de cursos */
.cursos-lista-panel {
    width: 35%;
    min-width: 320px;
    background: #f8f9fa;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border-radius: 16px;
    margin-right: 20px;
    height: 85vh;
}

.lista-header {
    padding: 24px;
  	padding-bottom: 0px !important;
    background: white;
    border-radius: 16px 16px 0 0;
}

.lista-header h3 {
  margin: 0 0 8px 0;
  font-size: 22px;
  font-weight: 700;

  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%; /* CLAVE */

  background-image: linear-gradient(
    to right,
    #337ae5 0%,
    #408fe5 34%,
    #d4734a 71%,
    #ea6b2e 100%
  );

  background-size: 140px 100%;     /* CLAVE */
  background-position: left center;

  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  color: transparent;
}

.header-icon {
    font-size: 24px;
}

.cursos-count {
    font-size: 15px;
    color: #6e6e73;
}

.count-number {
    font-weight: 700;
    color: #d4734a;
}

.cursos-list-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.cursos-filter {
    padding: 20px 24px;
    background: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.search-input {
    width: 90%;
    padding: 14px 18px;
    border: 2px solid #e5e5ea;
    border-radius: 14px;
    font-size: 15px;
    font-family: inherit;
    margin-bottom: 16px;
    transition: all 0.3s ease;
}

.search-input:focus {
    outline: none;
    border-color: #00a8a1;
    box-shadow: 0 0 0 3px rgba(0, 168, 161, 0.1);
}

.filter-buttons {
    display: flex;
    gap: 10px;
}

.filter-btn {
    flex: 1;
    padding: 10px 16px;
    border: 1px solid #e5e5ea;
    border-radius: 10px;
    background: white;
    color: #6e6e73;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-btn.active {
  background: linear-gradient(
    90deg,
    #8fd3f4 0%,
    #cfe9f5 35%,
    #f7e7c6 65%,
    #fbc687 100%
  );
  border: none;
  color: #000;
}

.cursos-list {
    flex: 1;
    overflow-y: auto;
    padding: 0 24px;
    scrollbar-width: thin;
    scrollbar-color: #00a8a1 #f8f9fa;
}

.cursos-list::-webkit-scrollbar {
    width: 8px;
}

.cursos-list::-webkit-scrollbar-track {
    background: #f8f9fa;
    border-radius: 10px;
}

.cursos-list::-webkit-scrollbar-thumb {
    background: #00a8a1;
    border-radius: 10px;
}

.cursos-list::-webkit-scrollbar-thumb:hover {
    background: #007a76;
}

.curso-item {
    padding: 20px;
    margin: 10px 0;
    background: rgba(51, 122, 229, 0.05);
    border-radius: 14px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.curso-item:hover {
    border-color: rgba(51, 122, 229, 1);
    transform: translateX(4px);
    box-shadow: 0 6px 16px rgba(51, 122, 229, 0.15);
}

.curso-item.active {
    border-color: rgba(234, 107, 46, 1);
    background: rgba(234, 107, 46, 0.05);
    box-shadow: 0 4px 12px rgba(234, 107, 46, 0.1);
}

.curso-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
}

.curso-item-titulo {
    font-size: 16px;
    font-weight: 700;
    color: #337ae5;
    margin: 0;
    flex: 1;
}

.curso-item.active  .curso-item-titulo {
  color: rgba(186, 85, 36, 1)
}


.curso-item-progreso {
    font-size: 13px;
    font-weight: 600;
    padding: 6px 12px;
    border-radius: 20px;
    background: #e5e5ea;
    color: #6e6e73;
    white-space: nowrap;
}

.curso-item-progreso.completado {
    background: #34c759;
    color: white;
}

.curso-item-progreso.en-progreso {
    background: #007aff;
    color: white;
}

.curso-item-desc {
    font-size: 14px;
    color: #6e6e73;
    margin: 0;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.curso-item-categoria {
    font-size: 13px;
    color: rgba(51, 122, 229, 1);
    font-weight: 600;
    margin-top: 10px;
    padding: 6px 12px;
    background: rgba(51, 122, 229, 0.05);
    border-radius: 14px;
    display: inline-block;
}

.curso-item.active .curso-item-categoria{
  background: rgba(234, 107, 46, 0.2);
  color:  rgba(186, 85, 36, 1);  
}
  
.lista-footer {
    padding: 20px 24px;
    border-top: 1px solid rgba(0, 0, 0, 0.08);
    background: white;
    border-radius: 0 0 16px 16px;
}

.ver-todos-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 14px 24px;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    color: white;
    text-decoration: none;
    border-radius: 14px;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.ver-todos-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 168, 161, 0.3);
}

.arrow {
    font-size: 18px;
    transition: transform 0.3s ease;
}

.ver-todos-btn:hover .arrow {
    transform: translateX(4px);
}

/* PANEL DERECHO: Detalles del curso */
.curso-detalle-panel {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border-radius: 16px;
}

.detalle-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 60px;
    text-align: center;
}

.placeholder-icon {
    font-size: 64px;
    margin-bottom: 30px;
    opacity: 0.5;
}

.detalle-placeholder h4 {
    font-size: 24px;
    font-weight: 700;
    color: #1d1d1f;
    margin: 0 0 16px 0;
}

.detalle-placeholder p {
    font-size: 16px;
    color: #6e6e73;
    margin: 0;
    max-width: 400px;
}

.curso-detalle-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
  
/* ===========================
   ESTILOS PARA EL ENCABEZADO DE COLORES
=========================== */
.dd-holiday-202511-header .dd-blue {
    width: 60vw;
    height: 75px;
    top: -100px;
    left: 0;
    background: #00a0ff;
    animation: blue-animation 1s ease .2s forwards;
    filter: blur(20px);
    position: absolute;
    border-radius: 50%;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

.dd-holiday-202511-header .dd-orange {
    width: 50vw;
    height: 50px;
    background: #fa8238;
    top: -75px;
    right: 0;
    animation: orange-animation 1.5s ease-out forwards .5s;
    filter: blur(20px);
    position: absolute;
    border-radius: 50%;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

.dd-holiday-202511-header .dd-yellow-orange {
    width: 25vw;
    height: 150px;
    background: linear-gradient(90deg, #f1e8c8, #f1e8c8, #f1e8c8, #fdb545, #fdb545, #fa8238);
    top: -200px;
    right: 30%;
    animation: yellow-orange-animation 1.2s ease-in-out forwards;
    filter: blur(20px);
    position: absolute;
    border-radius: 50%;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

.dd-holiday-202511-header .dd-blue-yellow {
    width: 15vw;
    height: 150px;
    background: linear-gradient(90deg, #00a0ff, #91dafc, #91dafc, #f1e8c8, #f1e8c8);
    top: -200px;
    left: 35vw;
    animation: blue-yellow-animation 2s ease-in-out forwards;
    filter: blur(20px);
    position: absolute;
    border-radius: 50%;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

/* Animaciones */
@keyframes blue-animation {
    0% {
        top: -100px;
        transform: translateX(0);
    }
    50% {
        top: -50px;
        transform: translateX(-15%);
    }
    100% {
        top: -50px;
        transform: translateX(-5%);
    }
}

@keyframes orange-animation {
    0% {
        top: -75px;
        right: 10vw;
    }
    50% {
        top: -30px;
    }
    100% {
        top: -28px;
        right: -1vw;
    }
}

@keyframes yellow-orange-animation {
    0% {
        top: -200px;
        transform: scaleX(50%) translateX(0);
    }
    25% {
        top: -110px;
        transform: scaleX(70%) translateX(-10%);
    }
    50% {
        top: -130px;
        transform: scaleX(225%) translateX(-5%);
    }
    100% {
        top: -110px;
        transform: scaleX(225%) translateX(0);
    }
}

@keyframes blue-yellow-animation {
    0% {
        top: -200px;
        transform: scaleX(100%) translateX(0);
    }
    25% {
        top: -110px;
        transform: scaleX(150%) translateX(0);
    }
    50% {
        top: -120px;
        transform: scaleX(225%) translateX(10%);
    }
    100% {
        top: -105px;
        transform: scaleX(220%) translateX(5%);
    }
}

/* Contenedor principal */
.dd-holiday-202511-header {
    position: relative;
    overflow: visible;
    width: 100%;
    height: 20px; /* Ajusta según necesites */
  	filter: opacity(0.6);
}
  
/* ===========================
   CONTENEDOR DE SCROLL PARA DETALLES - CORREGIDO
=========================== */

.detalle-contenido-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    height: 100%;
}

.detalle-contenido {
    flex: 1;
    overflow-y: auto;
    padding: 0 30px 30px;
    scrollbar-width: thin;
    scrollbar-color: #337ae5 #f5f5f7;
    overflow-x: hidden;
    max-width: 100%;
    height: calc(100% - 120px); /* Restar altura del header */
  	padding-top: 0px !important;
}
  

/* Para cuando hay muchas secciones */
.detalle-contenido {
    max-height: calc(100vh - 250px); /* Ajusta según tu layout */
}

/* Si necesitas más espacio, usa esto: */
.detalle-contenido {
    flex: 1;
    min-height: 0; /* IMPORTANTE para que funcione el scroll en flex */
}

/* HEADER DE DETALLES - ajuste de altura fija */
.detalle-header {
    margin-left: 30px;
    background: transparent;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 24px;
    position: relative;
    z-index: 1;
    flex-shrink: 0; /* Para que no se encoja */
  	padding-top: 40px;
}

/* Layout principal ajustado */
.curso-detalle-content {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* MEJOR SOLUCIÓN: Usar altura calculada */
.detalle-contenido {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Opción 2: Altura específica para desktop */
@media (min-width: 1025px) {
    .detalle-contenido {
        max-height: 80vh;
        min-height: 400px;
    }
}

/* Estilo de scroll mejorado */
.detalle-contenido::-webkit-scrollbar {
    width: 8px;
}

.detalle-contenido::-webkit-scrollbar-track {
    background: #f5f5f7;
    border-radius: 4px;
    margin: 10px 0;
}

.detalle-contenido::-webkit-scrollbar-thumb {
    background: #00a8a1;
    border-radius: 4px;
    border: 2px solid #f5f5f7;
}

.detalle-contenido::-webkit-scrollbar-thumb:hover {
    background: #007a76;
}

/* Indicador de que hay más contenido */
.detalle-contenido::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(to top, rgba(255,255,255,0.9), transparent);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.detalle-contenido.scrolled::after {
    opacity: 1;
}

.curso-header-info {
    flex: 1;
  	background: transparent !important;
}

.curso-categoria {
    display: inline-block;
    padding: 8px 16px;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    color: white;
    font-size: 14px;
    font-weight: 700;
    border-radius: 20px;
    margin-bottom: 16px;
}

.curso-titulo {
    font-size: 28px;
    font-weight: 800;
    margin: 0 0 20px 0;
    line-height: 1.2;
    
    /* Esto hace que el elemento se ajuste al contenido */
    display: inline-block;
    
    /* Gradiente */
    background: linear-gradient(
        to right,
        #337ae5 0%,
        #408fe5 34%,
        #d4734a 71%,
        #ea6b2e 100%
    );
    background-size: 100% 100%;
    background-position: center;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
}
.curso-progreso {
    max-width: 400px;
}

.progreso-bar {
    height: 8px;
    background: #e5e5ea;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progreso-fill {
    height: 100%;
    background: linear-gradient(90deg, #00a8a1 0%, #34c759 100%);
    border-radius: 4px;
    transition: width 0.8s ease;
}

.progreso-text {
    font-size: 14px;
    color: #6e6e73;
    font-weight: 600;
}

.detalle-contenido {
    flex: 1;
    overflow-y: auto;
    padding: 30px;
    scrollbar-width: thin;
    scrollbar-color: #337ae5 #f5f5f7;
    overflow-x: hidden;
    max-width: 100%;
}

.detalle-contenido::-webkit-scrollbar {
    width: 10px;
}

.detalle-contenido::-webkit-scrollbar-track {
    background: #f5f5f7;
    border-radius: 10px;
    margin: 4px 0;
}

.detalle-contenido::-webkit-scrollbar-thumb {
    background: #00a8a1;
    border-radius: 10px;
    border: 2px solid #f5f5f7;
}

.detalle-contenido::-webkit-scrollbar-thumb:hover {
    background: #007a76;
}

/* SECCIONES CONTENIDO */
.contenido-seccion {
    margin-top: 20px;
    background: rgba(51, 122, 229, 0.05);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
}

.contenido-seccion:first-child {
    margin-top: 0;
}

        /* Transiciones suaves para las secciones */
.contenido-seccion .seccion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.contenido-seccion.expanded .seccion-content {
    max-height: 1000px; /* Un valor suficientemente alto */
    transition: max-height 0.5s ease-in;
}

/* Estilo para el toggle icon */
.toggle-icon {
    margin-left: auto;
    font-size: 20px;
    font-weight: bold;
    transition: transform 0.3s ease;
    color: #666;
}

.contenido-seccion.expanded .toggle-icon {
    transform: rotate(180deg);
}

.seccion-header.seccion-desplegado {
    border-color: #3498db !important; /* Azul cuando está desplegado */
}
      
.seccion-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: white;
    border-radius: 14px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    user-select: none;
    margin-bottom: 0;
}

/* Estado sin desplegar - borde naranja */
.seccion-header.seccion-collapsible {
    border-left: 4px solid #ea6b2e;
    transition: border-left-color 0.3s ease;
}

/* Estado expandido - borde azul */
.contenido-seccion.expanded .seccion-header.seccion-collapsible {
    border-left-color: #337ae5 !important;
}
  
.seccion-icon {
    font-size: 24px;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 168, 161, 0.1);
    border-radius: 12px;
    color: #00a8a1;
}

.seccion-header h4 {
    font-size: 18px;
    font-weight: 700;
    color: #1d1d1f;
    margin: 0;
    flex: 1;
}

.seccion-count {
    font-size: 14px;
    color: #6e6e73;
    font-weight: 600;
    background: #f8f9fa;
    padding: 6px 14px;
    border-radius: 20px;
    margin-right: 10px;
}

/* Toggle icon */
.toggle-icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
    background: #ea6b2e6e;
    border-radius: 8px;
    transition: all 0.3s ease;
    flex-shrink: 0;
    margin-left: auto;
}

.contenido-seccion.expanded .seccion-header .toggle-icon {
    background: #337ae5;
    color: white;
}

/* SECCIONES PLEGABLES */
.seccion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    overflow-x: hidden;
}

.seccion-collapsible.expanded .seccion-content {
    max-height: 500px;
}

/* CONTENIDO ITEMS */
.contenido-items {
    display: flex;
    flex-direction: column;
    gap: 14px;
    padding: 20px;
    max-width: 100%;
    box-sizing: border-box;
}

.contenido-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 18px;
    background: white;
    border-radius: 12px;
    text-decoration: none;
    color: #1d1d1f;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    max-width: 100%;
    box-sizing: border-box;
    flex-wrap: nowrap;
}

.contenido-item:hover {
    border-color: #337ae5;
}

.item-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
}

.item-icon.video {
    background: rgba(255, 59, 48, 0.1);
    color: #ff3b30;
}

.item-icon.presentacion {
    background: rgba(0, 122, 255, 0.1);
    color: #007aff;
}

.item-icon.ejercicio {
    background: rgba(52, 199, 89, 0.1);
    color: #34c759;
}

.item-icon.recurso {
    background: rgba(88, 86, 214, 0.1);
    color: #5856d6;
}

.item-content {
    flex: 1;
    min-width: 0;
}

.item-titulo {
    font-size: 16px;
    font-weight: 600;
    color: #1d1d1f;
    margin: 0 0 6px 0;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.item-info {
    font-size: 14px;
    color: #6e6e73;
    margin: 0;
}

.item-action {
    margin-left: auto;
    font-size: 15px;
    color: #337ae5;
    opacity: 0;
    transition: opacity 0.3s ease;
    flex-shrink: 0;
    font-weight: 600;
}

.contenido-item:hover .item-action {
    opacity: 1;
}

/* ELEMENTOS VACÍOS */
.empty-section {
    padding: 30px;
    text-align: center;
    color: #6e6e73;
    font-size: 16px;
    background: #f8f9fa;
    border-radius: 12px;
    margin: 12px 0;
}

.empty-list {
    padding: 60px 20px;
    text-align: center;
    color: #6e6e73;
}

.btn-explorar {
    display: inline-block;
    margin-top: 20px;
    padding: 14px 32px;
    background: black;
    color: white;
    text-decoration: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.3s ease;
}

/* ===========================
   RESPONSIVE
=========================== */

@media (max-width: 1024px) {
    .cursos-layout {
        flex-direction: column;
        padding: 15px;
    }
    
    .cursos-lista-panel {
        width: 100%;
        height: 30%;
        border-right: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        margin-right: 0;
        margin-bottom: 20px;
    }
    
    .curso-detalle-panel {
        height: 60%;
    }
}

@media (max-width: 768px) {
    .dropdown-menu {
        top: 60px;
        height: calc(100vh - 60px);
    }
    
    .close-dropdown-btn {
        top: 15px;
        right: 10px;
        width: 25px;
        height: 25px;
    }
    
    .cursos-layout {
        padding: 10px;
    }
    
    .detalle-header {
        flex-direction: column;
        gap: 20px;
        padding: 20px;
    }
    
    .btn-acceder-curso {
        margin-right: 0;
        width: 100%;
    }
    
    .curso-titulo {
        font-size: 22px;
    }
    
    .detalle-contenido {
        padding: 20px;
    }
    
    .contenido-seccion {
        margin-top: 16px;
    }
    
    .seccion-header {
        padding: 16px;
    }
    
    .contenido-items {
        padding: 16px;
    }
}

@media (max-width: 480px) {
    .cursos-lista-panel {
        min-width: auto;
    }
    
    .cursos-filter {
        padding: 15px;
    }
    
    .search-input {
        width: 100%;
        padding: 12px 16px;
    }
    
    .filter-buttons {
        flex-wrap: wrap;
    }
    
    .filter-btn {
        flex: none;
        min-width: 80px;
        padding: 8px 12px;
        font-size: 13px;
    }
    
    .curso-item {
        padding: 16px;
        margin: 8px 0;
    }
    
    .contenido-item {
        padding: 14px;
        gap: 12px;
    }
    
    .item-icon {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }
    
    .detalle-placeholder {
        padding: 30px;
    }
    
    .placeholder-icon {
        font-size: 48px;
    }
    
    .detalle-placeholder h4 {
        font-size: 20px;
    }
    
    .detalle-placeholder p {
        font-size: 14px;
    }
    
    .detalle-contenido {
        padding: 15px;
    }
}
  
  /* ===========================
   DROPDOWN PERFIL - Estilos específicos
=========================== */

      /* ===========================
   DROPDOWN PERFIL SIMPLIFICADO
=========================== */

.perfil-dropdown {
    width: 300px;
    right: 20px;
    left: auto;
    transform: translateY(-20px) scale(0.95);
    top: 75px;
    max-width: 300px;
    height: auto;
    max-height: 420px;
    border-radius: 18px;
    box-shadow: 
        0 20px 50px rgba(0,0,0,0.15),
        0 8px 20px rgba(0,0,0,0.1),
        0 0 0 1px rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(25px) saturate(180%);
    -webkit-backdrop-filter: blur(25px) saturate(180%);
    background: rgba(255, 255, 255, 0.97);
    border: 1px solid rgba(255, 255, 255, 0.2);
    overflow: hidden;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.perfil-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

/* Header del perfil */
.perfil-header {
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 28px 24px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    background: linear-gradient(135deg, rgba(0, 168, 161, 0.05) 0%, rgba(0, 168, 161, 0.02) 100%);
    position: relative;
}

.perfil-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #00a8a1 0%, #007a76 50%, #34c759 100%);
}

.perfil-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: 700;
    color: white;
    box-shadow: 0 6px 16px rgba(0, 168, 161, 0.3);
    flex-shrink: 0;
    border: 3px solid white;
}

.perfil-info {
    flex: 1;
    min-width: 0;
}

.perfil-info h4 {
    margin: 0 0 6px 0;
    font-size: 18px;
    font-weight: 700;
    color: #1d1d1f;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.perfil-email {
    margin: 0 0 10px 0;
    font-size: 14px;
    color: #6e6e73;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Planes */
.perfil-plan {
    margin: 0;
    font-size: 14px;
    font-weight: 500;
}

.plan-premium {
    color: #00a8a1;
    font-weight: 700;
    background: rgba(0, 168, 161, 0.1);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 13px;
}

.plan-estudiante {
    color: #6e6e73;
    font-weight: 600;
    background: rgba(110, 110, 115, 0.1);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 13px;
}

/* Menú del perfil */
.perfil-menu {
    padding: 8px 0;
    max-height: 300px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #00a8a1 #f5f5f7;
}

.perfil-menu::-webkit-scrollbar {
    width: 6px;
}

.perfil-menu::-webkit-scrollbar-track {
    background: #f5f5f7;
    border-radius: 10px;
}

.perfil-menu::-webkit-scrollbar-thumb {
    background: #00a8a1;
    border-radius: 10px;
}

.perfil-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.perfil-list li {
    margin: 0;
}

.perfil-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 24px;
    text-decoration: none;
    color: #1d1d1f;
    font-size: 15px;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    border-left: 3px solid transparent;
}

.perfil-item:hover {
    background: rgba(0, 168, 161, 0.05);
    border-left-color: #00a8a1;
    padding-left: 28px;
}

.perfil-icon {
    font-size: 16px;
    width: 20px;
    text-align: center;
    flex-shrink: 0;
}

/* Badge más discreto */
.badge {
    margin-left: auto;
    background: #00a8a1;
    color: white;
    font-size: 12px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 10px;
    min-width: 20px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 168, 161, 0.2);
    display: none; /* Oculto por defecto, se muestra con JS */
}

/* Separador */
.separador {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.08), transparent);
    margin: 8px 24px;
}

/* Opción de cerrar sesión */
.logout {
    color: #ff3b30 !important;
}

.logout:hover {
    background: rgba(255, 59, 48, 0.05) !important;
    border-left-color: #ff3b30 !important;
}

/* Footer del perfil */
.perfil-footer {
    padding: 15px 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    font-size: 12px;
    color: #8e8e93;
    text-align: center;
    background: rgba(245, 245, 247, 0.5);
}

.perfil-footer p {
    margin: 0;
    line-height: 1.4;
}

.perfil-footer small {
    font-size: 11px;
    opacity: 0.7;
}

/* Responsive para perfil */
@media (max-width: 768px) {
    .perfil-dropdown {
        right: 10px;
        left: 10px;
        width: calc(100% - 20px);
        max-width: none;
        top: 65px;
    }
    
    .perfil-header {
        padding: 20px;
        gap: 15px;
    }
    
    .perfil-avatar {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    .perfil-info h4 {
        font-size: 16px;
    }
    
    .perfil-email {
        font-size: 13px;
    }
    
    .perfil-item {
        padding: 12px 20px;
        font-size: 14px;
    }
    
    .perfil-item:hover {
        padding-left: 24px;
    }
    
    .perfil-footer {
        padding: 12px 16px;
        font-size: 11px;
    }
}

@media (max-width: 480px) {
    .perfil-dropdown {
        border-radius: 16px;
    }
    
    .perfil-header {
        flex-direction: column;
        text-align: center;
        gap: 12px;
    }
    
    .perfil-info {
        text-align: center;
    }
    
    .perfil-info h4,
    .perfil-email {
        white-space: normal;
        overflow: visible;
    }
}

/* ===========================
   AVATAR DE PERFIL - CON IMAGEN
=========================== */

.perfil-avatar-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10001;
    position: relative;
    overflow: hidden;
    background: white;
}

/* Cuando hay sesión (mostrar iniciales) */
.perfil-avatar-btn.con-sesion {
    background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%);
    color: white;
    font-weight: 700;
    font-size: 16px;
    border: 2px solid white;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}

/* Cuando NO hay sesión (mostrar imagen) */
.perfil-avatar-btn.sin-sesion {
    background-image: url('https://i.postimg.cc/yxrJTC4W/hoja-transparente.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border: none;
    box-shadow: none;
    width: 36px;
    height: 36px;
}

/* Hover solo para cuando NO hay sesión */
.perfil-avatar-btn.sin-sesion:hover {
    transform: scale(1.1);
}

/* Hover para cuando hay sesión (mantiene sus efectos) */
.perfil-avatar-btn.con-sesion:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 24px rgba(0, 168, 161, 0.4);
}

/* Active solo para cuando hay sesión */
.perfil-avatar-btn.con-sesion.active {
    box-shadow: 0 0 0 3px rgba(0, 168, 161, 0.3);
}
      
/* ===========================
   RESPONSIVE PARA PERFIL
=========================== */

@media (max-width: 768px) {
    .perfil-dropdown {
        right: 10px;
        left: 10px;
        width: calc(100% - 20px);
        max-width: none;
        top: 65px;
    }
    
    .perfil-header {
        padding: 20px;
        gap: 15px;
    }
    
    .perfil-avatar {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    .perfil-info h4 {
        font-size: 16px;
    }
    
    .perfil-email {
        font-size: 13px;
    }
    
    .perfil-item {
        padding: 12px 20px;
        font-size: 14px;
    }
    
    .perfil-item:hover {
        padding-left: 24px;
    }
    
    .perfil-footer {
        padding: 16px 20px;
        font-size: 11px;
    }
    
    .perfil-avatar-btn {
        width: 40px;
        height: 40px;
        font-size: 15px;
    }
}

@media (max-width: 480px) {
    .perfil-dropdown {
        border-radius: 16px;
    }
    
    .perfil-header {
        flex-direction: column;
        text-align: center;
        gap: 12px;
    }
    
    .perfil-info {
        text-align: center;
    }
    
    .perfil-info h4,
    .perfil-email {
        white-space: normal;
        overflow: visible;
    }
}
  
  /*
/* Estilos para secciones plegables */
.seccion-collapsible .seccion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.seccion-collapsible.expanded .seccion-content {
    max-height: 500px;
}

/* Asegurar que el toggle icon tenga el cursor pointer */
.toggle-icon {
    cursor: pointer;
}

/* Mejorar el hover del header */
.seccion-header:hover {
    cursor: pointer;
}
</style>
<style>
      /* ===== CONTENEDOR DE BOTONES MEJORADO ===== */
      .curso-acciones {
      display: flex;
      gap: 12px;
      margin-top: auto;
      padding-top: 20px;
      border-top: 1px solid rgba(0,0,0,0.05);
      }

      /* Botón principal - Más información / Ver curso */
      .btn-info {
      flex: 2;
      padding: 14px 20px;
      background: transparent;
      color: #000;
      border: 2px solid #000;
      border-radius: 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      text-align: center;
      }

      .btn-info:hover {
      background: rgba(0,0,0,0.05);
      transform: translateY(-2px);
      }

      .btn-info.comprado {
      background: #fff;
      border-color: #000;
      color: #00a8a1;
      }

      .btn-info.comprado:hover {
      background: rgba(0,168,161,0.15);
      }

      .btn-info i {
      font-size: 16px;
      }

      /* ===== BOTONES "MÁS INFORMACIÓN" PERSONALIZADOS POR AÑO ===== */

      /* Botón info - Primer año (turquesa) */
      .mis-curso-card[data-anio="primero"] .btn-info:not(.comprado) {
      border-color: #99e1de !important;
      color: #00a8a1 !important;
      background: transparent !important;
      }

      .mis-curso-card[data-anio="primero"] .btn-info:not(.comprado):hover {
      background: rgba(153, 225, 222, 0.1) !important;
      border-color: #00c7be !important;
      color: #009c95 !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 199, 190, 0.15);
      }

      /* Botón info - Segundo año (azul) */
      .mis-curso-card[data-anio="segundo"] .btn-info:not(.comprado) {
      border-color: #5a8dee !important;
      color: #3a6bd6 !important;
      background: transparent !important;
      }

      .mis-curso-card[data-anio="segundo"] .btn-info:not(.comprado):hover {
      background: rgba(90, 141, 238, 0.1) !important;
      border-color: #3a6bd6 !important;
      color: #2a55b4 !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(58, 107, 214, 0.15);
      }

      /* Botón info - Tercer año (púrpura) */
      .mis-curso-card[data-anio="tercero"] .btn-info:not(.comprado) {
      border-color: #9d7bd8 !important;
      color: #7c5ac2 !important;
      background: transparent !important;
      }

      .mis-curso-card[data-anio="tercero"] .btn-info:not(.comprado):hover {
      background: rgba(157, 123, 216, 0.1) !important;
      border-color: #7c5ac2 !important;
      color: #6349a8 !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(124, 90, 194, 0.15);
      }

      /* Botón info - Cuarto año (naranja) */
      .mis-curso-card[data-anio="cuarto"] .btn-info:not(.comprado) {
      border-color: #ff9500 !important;
      color: #e68500 !important;
      background: transparent !important;
      }

      .mis-curso-card[data-anio="cuarto"] .btn-info:not(.comprado):hover {
      background: rgba(255, 149, 0, 0.1) !important;
      border-color: #e68500 !important;
      color: #cc7700 !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(230, 133, 0, 0.15);
      }

      /* ===== BOTONES "VER CURSO" CUANDO ESTÁN COMPRADOS ===== */

      /* Botón comprado - Primer año */
      .mis-curso-card[data-anio="primero"] .btn-info.comprado {
      border-color: #00a8a1 !important;
      color: #00a8a1 !important;
      background: rgba(0, 168, 161, 0.05) !important;
      }

      .mis-curso-card[data-anio="primero"] .btn-info.comprado:hover {
      background: rgba(0, 168, 161, 0.15) !important;
      border-color: #00c7be !important;
      color: #009c95 !important;
      }

      /* Botón comprado - Segundo año */
      .mis-curso-card[data-anio="segundo"] .btn-info.comprado {
      border-color: #3a6bd6 !important;
      color: #3a6bd6 !important;
      background: rgba(58, 107, 214, 0.05) !important;
      }

      .mis-curso-card[data-anio="segundo"] .btn-info.comprado:hover {
      background: rgba(58, 107, 214, 0.15) !important;
      border-color: #2a55b4 !important;
      color: #2a55b4 !important;
      }

      /* Botón comprado - Tercer año */
      .mis-curso-card[data-anio="tercero"] .btn-info.comprado {
      border-color: #7c5ac2 !important;
      color: #7c5ac2 !important;
      background: rgba(124, 90, 194, 0.05) !important;
      }

      .mis-curso-card[data-anio="tercero"] .btn-info.comprado:hover {
      background: rgba(124, 90, 194, 0.15) !important;
      border-color: #6349a8 !important;
      color: #6349a8 !important;
      }

      /* Botón comprado - Cuarto año */
      .mis-curso-card[data-anio="cuarto"] .btn-info.comprado {
      border-color: #e68500 !important;
      color: #e68500 !important;
      background: rgba(230, 133, 0, 0.05) !important;
      }

      .mis-curso-card[data-anio="cuarto"] .btn-info.comprado:hover {
      background: rgba(230, 133, 0, 0.15) !important;
      border-color: #cc7700 !important;
      color: #cc7700 !important;
      }

      /* ===== EFECTO DE PULSO PARA BOTONES INFO EN HOVER ===== */

      /* Primer año - pulso turquesa */
      .mis-curso-card[data-anio="primero"] .btn-info:not(.comprado):hover {
      animation: pulseBtnInfoPrimero 2s infinite;
      }

      @keyframes pulseBtnInfoPrimero {
      0% { 
      box-shadow: 0 4px 12px rgba(0, 199, 190, 0.15),
      0 0 0 0 rgba(0, 199, 190, 0.2);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(0, 199, 190, 0.2),
      0 0 0 4px rgba(0, 199, 190, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(0, 199, 190, 0.15),
      0 0 0 0 rgba(0, 199, 190, 0);
      }
      }

      /* Segundo año - pulso azul */
      .mis-curso-card[data-anio="segundo"] .btn-info:not(.comprado):hover {
      animation: pulseBtnInfoSegundo 2s infinite;
      }

      @keyframes pulseBtnInfoSegundo {
      0% { 
      box-shadow: 0 4px 12px rgba(58, 107, 214, 0.15),
      0 0 0 0 rgba(58, 107, 214, 0.2);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(58, 107, 214, 0.2),
      0 0 0 4px rgba(58, 107, 214, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(58, 107, 214, 0.15),
      0 0 0 0 rgba(58, 107, 214, 0);
      }
      }

      /* Tercer año - pulso púrpura */
      .mis-curso-card[data-anio="tercero"] .btn-info:not(.comprado):hover {
      animation: pulseBtnInfoTercero 2s infinite;
      }

      @keyframes pulseBtnInfoTercero {
      0% { 
      box-shadow: 0 4px 12px rgba(124, 90, 194, 0.15),
      0 0 0 0 rgba(124, 90, 194, 0.2);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(124, 90, 194, 0.2),
      0 0 0 4px rgba(124, 90, 194, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(124, 90, 194, 0.15),
      0 0 0 0 rgba(124, 90, 194, 0);
      }
      }

      /* Cuarto año - pulso naranja */
      .mis-curso-card[data-anio="cuarto"] .btn-info:not(.comprado):hover {
      animation: pulseBtnInfoCuarto 2s infinite;
      }

      @keyframes pulseBtnInfoCuarto {
      0% { 
      box-shadow: 0 4px 12px rgba(230, 133, 0, 0.15),
      0 0 0 0 rgba(230, 133, 0, 0.2);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(230, 133, 0, 0.2),
      0 0 0 4px rgba(230, 133, 0, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(230, 133, 0, 0.15),
      0 0 0 0 rgba(230, 133, 0, 0);
      }
      }

      /* ===== EFECTO DE PULSO MÁS SUAVE PARA BOTONES COMPRADOS ===== */

      /* Primer año comprado - pulso suave */
      .mis-curso-card[data-anio="primero"] .btn-info.comprado:hover {
      animation: pulseBtnCompradoPrimero 3s infinite;
      }

      @keyframes pulseBtnCompradoPrimero {
      0% { 
      box-shadow: 0 0 0 0 rgba(0, 168, 161, 0.1);
      }
      50% { 
      box-shadow: 0 0 0 3px rgba(0, 168, 161, 0.2);
      }
      100% { 
      box-shadow: 0 0 0 0 rgba(0, 168, 161, 0.1);
      }
      }

      /* Segundo año comprado - pulso suave */
      .mis-curso-card[data-anio="segundo"] .btn-info.comprado:hover {
      animation: pulseBtnCompradoSegundo 3s infinite;
      }

      @keyframes pulseBtnCompradoSegundo {
      0% { 
      box-shadow: 0 0 0 0 rgba(58, 107, 214, 0.1);
      }
      50% { 
      box-shadow: 0 0 0 3px rgba(58, 107, 214, 0.2);
      }
      100% { 
      box-shadow: 0 0 0 0 rgba(58, 107, 214, 0.1);
      }
      }

      /* Tercer año comprado - pulso suave */
      .mis-curso-card[data-anio="tercero"] .btn-info.comprado:hover {
      animation: pulseBtnCompradoTercero 3s infinite;
      }

      @keyframes pulseBtnCompradoTercero {
      0% { 
      box-shadow: 0 0 0 0 rgba(124, 90, 194, 0.1);
      }
      50% { 
      box-shadow: 0 0 0 3px rgba(124, 90, 194, 0.2);
      }
      100% { 
      box-shadow: 0 0 0 0 rgba(124, 90, 194, 0.1);
      }
      }

      /* Cuarto año comprado - pulso suave */
      .mis-curso-card[data-anio="cuarto"] .btn-info.comprado:hover {
      animation: pulseBtnCompradoCuarto 3s infinite;
      }

      @keyframes pulseBtnCompradoCuarto {
      0% { 
      box-shadow: 0 0 0 0 rgba(230, 133, 0, 0.1);
      }
      50% { 
      box-shadow: 0 0 0 3px rgba(230, 133, 0, 0.2);
      }
      100% { 
      box-shadow: 0 0 0 0 rgba(230, 133, 0, 0.1);
      }
      }

      /* ===== ESTILOS BASE PARA BOTONES INFO (para mantener consistencia) ===== */

      .btn-info {
      flex: 2;
      padding: 14px 20px;
      border: 2px solid #000;
      border-radius: 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      text-align: center;
      }

      /* Estado por defecto para tarjetas sin data-anio */
      .btn-info:not(.comprado) {
      background: transparent;
      color: #000;
      border-color: #000;
      }

      .btn-info:not(.comprado):hover {
      background: rgba(0,0,0,0.05);
      transform: translateY(-2px);
      }

      /* Estado comprado por defecto */
      .btn-info.comprado {
      background: rgba(0,0,0,0.05);
      border-color: #000;
      color: #000;
      }

      .btn-info.comprado:hover {
      background: rgba(0,0,0,0.1);
      }

      /* Botón secundario - Comprar / Comprado */
      .btn-comprar {
      flex: 1;
      min-width: 120px;
      padding: 14px 20px;
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
      color: white;
      border: none;
      border-radius: 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(153, 225, 222, 0.5) !important;
      }

      .btn-comprar:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
      }

      .btn-comprar:hover:before {
      left: 100%;
      }

      .btn-comprar:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(153, 225, 222, 0.6) !important;
      }

      .btn-comprar:active {
      transform: translateY(0);
      }

      /* ===== BOTONES "COMPRADO" PERSONALIZADOS POR AÑO ===== */

      /* Botón comprado - Primer año (turquesa oscuro) */
      .mis-curso-card[data-anio="primero"] .btn-comprar.comprado {
      background: linear-gradient(135deg, #007a76 0%, #005e5b 100%) !important;
      cursor: default;
      box-shadow: 0 4px 12px rgba(0, 122, 118, 0.2) !important;
      min-width: 100px;
      color: white !important;
      position: relative;
      overflow: hidden;
      }

      .mis-curso-card[data-anio="primero"] .btn-comprar.comprado:hover {
      transform: translateY(0px) !important;
      box-shadow: 0 4px 12px rgba(0, 122, 118, 0.25) !important;
      animation: pulseCompradoPrimero 2s infinite !important;
      }

      @keyframes pulseCompradoPrimero {
      0% { 
      box-shadow: 0 4px 12px rgba(0, 122, 118, 0.25),
      0 0 0 0 rgba(0, 122, 118, 0.3);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(0, 122, 118, 0.3),
      0 0 0 4px rgba(0, 122, 118, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(0, 122, 118, 0.25),
      0 0 0 0 rgba(0, 122, 118, 0);
      }
      }

      /* Botón comprado - Segundo año (azul oscuro) */
      .mis-curso-card[data-anio="segundo"] .btn-comprar.comprado {
      background: linear-gradient(135deg, #2a55b4 0%, #1a4a9e 100%) !important;
      cursor: default;
      box-shadow: 0 4px 12px rgba(42, 85, 180, 0.2) !important;
      min-width: 100px;
      color: white !important;
      position: relative;
      overflow: hidden;
      }

      .mis-curso-card[data-anio="segundo"] .btn-comprar.comprado:hover {
      transform: translateY(0px) !important;
      box-shadow: 0 4px 12px rgba(42, 85, 180, 0.25) !important;
      animation: pulseCompradoSegundo 2s infinite !important;
      }

      @keyframes pulseCompradoSegundo {
      0% { 
      box-shadow: 0 4px 12px rgba(42, 85, 180, 0.25),
      0 0 0 0 rgba(42, 85, 180, 0.3);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(42, 85, 180, 0.3),
      0 0 0 4px rgba(42, 85, 180, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(42, 85, 180, 0.25),
      0 0 0 0 rgba(42, 85, 180, 0);
      }
      }

      /* Botón comprado - Tercer año (púrpura oscuro) */
      .mis-curso-card[data-anio="tercero"] .btn-comprar.comprado {
      background: linear-gradient(135deg, #6349a8 0%, #513c84 100%) !important;
      cursor: default;
      box-shadow: 0 4px 12px rgba(99, 73, 168, 0.2) !important;
      min-width: 100px;
      color: white !important;
      position: relative;
      overflow: hidden;
      }

      .mis-curso-card[data-anio="tercero"] .btn-comprar.comprado:hover {
      transform: translateY(0px) !important;
      box-shadow: 0 4px 12px rgba(99, 73, 168, 0.25) !important;
      animation: pulseCompradoTercero 2s infinite !important;
      }

      @keyframes pulseCompradoTercero {
      0% { 
      box-shadow: 0 4px 12px rgba(99, 73, 168, 0.25),
      0 0 0 0 rgba(99, 73, 168, 0.3);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(99, 73, 168, 0.3),
      0 0 0 4px rgba(99, 73, 168, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(99, 73, 168, 0.25),
      0 0 0 0 rgba(99, 73, 168, 0);
      }
      }

      /* Botón comprado - Cuarto año (naranja oscuro) */
      .mis-curso-card[data-anio="cuarto"] .btn-comprar.comprado {
      background: linear-gradient(135deg, #cc7700 0%, #995800 100%) !important;
      cursor: default;
      box-shadow: 0 4px 12px rgba(204, 119, 0, 0.2) !important;
      min-width: 100px;
      color: white !important;
      position: relative;
      overflow: hidden;
      }

      .mis-curso-card[data-anio="cuarto"] .btn-comprar.comprado:hover {
      transform: translateY(0px) !important;
      box-shadow: 0 4px 12px rgba(204, 119, 0, 0.25) !important;
      animation: pulseCompradoCuarto 2s infinite !important;
      }

      @keyframes pulseCompradoCuarto {
      0% { 
      box-shadow: 0 4px 12px rgba(204, 119, 0, 0.25),
      0 0 0 0 rgba(204, 119, 0, 0.3);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(204, 119, 0, 0.3),
      0 0 0 4px rgba(204, 119, 0, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(204, 119, 0, 0.25),
      0 0 0 0 rgba(204, 119, 0, 0);
      }
      }

      /* ===== EFECTO DE CHECKMARK PARA COMPRADO ===== */

      /* Añadir checkmark visual a todos los botones comprados */
      .btn-comprar.comprado::after {
      display: inline-block;
      margin-left: 8px;
      font-weight: bold;
      font-size: 16px;
      animation: checkmarkBounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      transform-origin: center;
      }

      @keyframes checkmarkBounce {
      0% {
      transform: scale(0) rotate(-45deg);
      opacity: 0;
      }
      50% {
      transform: scale(1.2) rotate(0deg);
      }
      100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
      }
      }

      /* Checkmark específico por año con brillo */
      .mis-curso-card[data-anio="primero"] .btn-comprar.comprado::after {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
      }

      .mis-curso-card[data-anio="segundo"] .btn-comprar.comprado::after {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
      }

      .mis-curso-card[data-anio="tercero"] .btn-comprar.comprado::after {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
      }

      .mis-curso-card[data-anio="cuarto"] .btn-comprar.comprado::after {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
      }

      /* ===== EFECTO DE BRILLO SUAVE EN BOTONES COMPRADOS ===== */

      .mis-curso-card[data-anio="primero"] .btn-comprar.comprado {
      background-image: 
      linear-gradient(135deg, #007a76 0%, #005e5b 100%),
      radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%) !important;
      background-blend-mode: overlay;
      }

      .mis-curso-card[data-anio="segundo"] .btn-comprar.comprado {
      background-image: 
      linear-gradient(135deg, #2a55b4 0%, #1a4a9e 100%),
      radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%) !important;
      background-blend-mode: overlay;
      }

      .mis-curso-card[data-anio="tercero"] .btn-comprar.comprado {
      background-image: 
      linear-gradient(135deg, #6349a8 0%, #513c84 100%),
      radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%) !important;
      background-blend-mode: overlay;
      }

      .mis-curso-card[data-anio="cuarto"] .btn-comprar.comprado {
      background-image: 
      linear-gradient(135deg, #cc7700 0%, #995800 100%),
      radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%) !important;
      background-blend-mode: overlay;
      }

      /* ===== ELIMINAR EFECTOS DE ANIMACIÓN DE COMPRA ===== */

      .btn-comprar.comprado:before {
      display: none !important;
      }

      .btn-comprar.comprado.cargando {
      background: linear-gradient(135deg, #007a76 0%, #005e5b 100%) !important;
      }

      .btn-comprar.comprado.cargando:after {
      display: none !important;
      }

      /* ===== ESTILO POR DEFECTO PARA TARJETAS SIN DATA-ANIO ===== */

      .btn-comprar.comprado:not([data-anio]) {
      background: #000 !important;
      cursor: default;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
      min-width: 100px;
      color: white !important;
      }

      .btn-comprar.comprado:not([data-anio]):hover {
      transform: translateY(0px) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25) !important;
      animation: pulseCompradoDefault 2s infinite !important;
      }

      @keyframes pulseCompradoDefault {
      0% { 
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25),
      0 0 0 0 rgba(0, 0, 0, 0.3);
      }
      70% { 
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3),
      0 0 0 4px rgba(0, 0, 0, 0);
      }
      100% { 
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25),
      0 0 0 0 rgba(0, 0, 0, 0);
      }
      }



      /* Iconos */
      .btn-comprar i {
      font-size: 16px;
      }

      /* Efecto de carga para el botón comprar */
      .btn-comprar.cargando {
      background: linear-gradient(135deg, #ff9500 0%, #ff5e3a 100%);
      }

      .btn-comprar.cargando:after {
      content: '';
      width: 16px;
      height: 16px;
      border: 2px solid white;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 8px;
      }

      @keyframes spin {
      to { transform: rotate(360deg); }
      }

      /* Para el modo "Mis cursos" - botones diferentes */
      .mis-curso-card .curso-acciones {
      border-top: 1px solid rgba(0,0,0,0.08);
      }

      .mis-curso-card .btn-info {
      flex: 3;
      background: #fff;
      border-color: #000;
      color: #000;
      }

      .mis-curso-card .btn-info:hover {
      background: #fff !important;
      }

      .mis-curso-card .btn-comprar {
      flex: 2;
      background: linear-gradient(135deg, #007aff 0%, #0056cc 100%);
      box-shadow: 0 4px 12px rgba(0,122,255,0.2);
      }

      .mis-curso-card .btn-comprar:hover {
      box-shadow: 0 8px 20px rgba(0,122,255,0.3);
      }

      /* Responsive */
      @media (max-width: 768px) {
      .curso-acciones {
      flex-direction: column;
      gap: 10px;
      }

      .btn-info, .btn-comprar {
      width: 100%;
      flex: none;
      }
      }

      /* Precio en la tarjeta */
      .mis-curso-precio {
      font-size: 20px;
      font-weight: 800;
      color: #000;
      background: rgba(153, 225, 222, 0.5);
      padding: 6px 14px;
      border-radius: 10px;
      margin-left: auto;
      }

      /* ===== DISEÑO MEJORADO PARA MIS CURSOS ===== */
      /* Contenedor de tarjeta en modo Mis Cursos - POSICIÓN CORREGIDA */
      #misCursos .mis-curso-card {
      position: relative;
      padding-top: 40px !important; /* Espacio para el check */
      padding-right: 60px !important; /* Espacio para el check a la derecha */
      }

      /* Check circular arriba a la derecha - POSICIÓN CORREGIDA */
      .curso-check-container {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 10;
      display: block !important;
      }

/* ===== ESTILOS DE CHECK POR CATEGORÍA ===== */

/* Check base - para todas las categorías */

.curso-check {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid #e5e5ea;
    background: #f8f9fa;
    cursor: pointer;
    display: flex !important;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    visibility: visible !important;
    opacity: 1 !important;
    position: relative;
}

/* Tick fantasma (gris) - visible siempre */
.curso-check::before {
    content: '';
    width: 14px;
    height: 7px;
    border-left: 4px solid #d1d1d6;
    border-bottom: 4px solid #d1d1d6;
    transform: rotate(-45deg) translate(1px, -1px);
    opacity: 0.6;
    transition: all 0.3s ease;
}
      
/* Cuando está marcado, ocultar el tick gris */
.curso-check.checked::before {
    content: none;
}
     
/* ===== ESTILOS DE CHECKMARK (para todos) ===== */

.curso-check.checked:after {
    content: '';
    width: 14px;
    height: 7px;
    border-left: 4px solid white;
    border-bottom: 4px solid white;
    transform: rotate(-45deg) translate(1px, -1px);
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.3));
}
      
/* Hover base */
.curso-check:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* ===== PRIMER AÑO (Turquesa) ===== */

.mis-curso-card[data-anio="primero"] .curso-check:hover::before {
    border-left-color: #00a8a1;
    border-bottom-color: #00a8a1;
    opacity: 1;
}      

/* Hover - primer año */
.mis-curso-card[data-anio="primero"] .curso-check:hover {
    border-color: #00a8a1;
    box-shadow: 0 4px 12px rgba(0, 168, 161, 0.25);
}

/* Check marcado - primer año */
.mis-curso-card[data-anio="primero"] .curso-check.checked {
    background: #00a8a1;
    border-color: #00a8a1;
}

/* ===== SEGUNDO AÑO (Azul) ===== */

.mis-curso-card[data-anio="segundo"] .curso-check:hover::before {
    border-left-color: #3a6bd6;
    border-bottom-color: #3a6bd6;
    opacity: 1;
}      
      
/* Hover - segundo año */
.mis-curso-card[data-anio="segundo"] .curso-check:hover {
    border-color: #3a6bd6;
    box-shadow: 0 4px 12px rgba(58, 107, 214, 0.25);
}

/* Check marcado - segundo año */
.mis-curso-card[data-anio="segundo"] .curso-check.checked {
    background: #3a6bd6;
    border-color: #3a6bd6;
}

/* ===== TERCER AÑO (Púrpura) ===== */

.mis-curso-card[data-anio="tercero"] .curso-check:hover::before {
    border-left-color: #7c5ac2;
    border-bottom-color: #7c5ac2;
    opacity: 1;
}      
      
/* Hover - tercer año */
.mis-curso-card[data-anio="tercero"] .curso-check:hover {
    border-color: #7c5ac2;
    box-shadow: 0 4px 12px rgba(124, 90, 194, 0.25);
}

/* Check marcado - tercer año */
.mis-curso-card[data-anio="tercero"] .curso-check.checked {
    background: #7c5ac2;
    border-color: #7c5ac2;
}

/* ===== CUARTO AÑO (Naranja) ===== */

.mis-curso-card[data-anio="cuarto"] .curso-check:hover::before {
    border-left-color: #e68500;
    border-bottom-color: #e68500;
    opacity: 1;
}      
      
/* Hover - cuarto año */
.mis-curso-card[data-anio="cuarto"] .curso-check:hover {
    border-color: #e68500;
    box-shadow: 0 4px 12px rgba(230, 133, 0, 0.25);
}

/* Check marcado - cuarto año */
.mis-curso-card[data-anio="cuarto"] .curso-check.checked {
    background: #e68500;
    border-color: #e68500;
}



/* ===== ANIMACIONES ESPECIALES PARA CHECKS MARCADOS ===== */

/* Animación para primer año marcado */
.mis-curso-card[data-anio="primero"] .curso-check.checked {
    animation: pulseCheckPrimero 2s infinite;
}

@keyframes pulseCheckPrimero {
    0% {
        box-shadow: 0 0 0 0 rgba(0, 168, 161, 0.4);
    }
    70% {
        box-shadow: 0 0 0 6px rgba(0, 168, 161, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(0, 168, 161, 0);
    }
}

/* Animación para segundo año marcado */
.mis-curso-card[data-anio="segundo"] .curso-check.checked {
    animation: pulseCheckSegundo 2s infinite;
}

@keyframes pulseCheckSegundo {
    0% {
        box-shadow: 0 0 0 0 rgba(58, 107, 214, 0.4);
    }
    70% {
        box-shadow: 0 0 0 6px rgba(58, 107, 214, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(58, 107, 214, 0);
    }
}

/* Animación para tercer año marcado */
.mis-curso-card[data-anio="tercero"] .curso-check.checked {
    animation: pulseCheckTercero 2s infinite;
}

@keyframes pulseCheckTercero {
    0% {
        box-shadow: 0 0 0 0 rgba(124, 90, 194, 0.4);
    }
    70% {
        box-shadow: 0 0 0 6px rgba(124, 90, 194, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(124, 90, 194, 0);
    }
}

/* Animación para cuarto año marcado */
.mis-curso-card[data-anio="cuarto"] .curso-check.checked {
    animation: pulseCheckCuarto 2s infinite;
}

@keyframes pulseCheckCuarto {
    0% {
        box-shadow: 0 0 0 0 rgba(230, 133, 0, 0.4);
    }
    70% {
        box-shadow: 0 0 0 6px rgba(230, 133, 0, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(230, 133, 0, 0);
    }
}

/* ===== RESPONSIVE PARA CHECKS ===== */

@media (max-width: 768px) {
    .curso-check {
        width: 32px;
        height: 32px;
    }
    
    .curso-check.checked:after {
        font-size: 16px;
    }
}

      /* Botón único para entrar al curso */
      .btn-entrar-curso {
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(90deg, rgba(153, 225, 222, 1) 0%, #00a8a1 100%);
      color: white;
      border: none;
      border-radius: 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,168,161,0.25);

      /* Necesario para el efecto */
      position: relative;
      overflow: hidden;
      z-index: 1;
      }

      /* Efecto de línea animada */
      .btn-entrar-curso::before {
      content: "";
      position: absolute;
      top: 50%;                              /* pasa por el centro */
      left: -100%;                           /* empieza fuera del botón */
      width: 100px;
      height: 100%;                           /* grosor de la línea */
      transform: translateY(-50%);
      background: linear-gradient(
      90deg,
      transparent,
      rgba(255,255,255,0.25),
      transparent
      );
      transition: left 0.6s ease;
      }

      /* Al hacer hover, la línea cruza el botón */
      .btn-entrar-curso:hover::before {
      left: 100%;
      }

      /* Hover ya existente del botón (lo mantenemos) */
      .btn-entrar-curso:hover {
      transform: translateY(-2px);
      }


      .btn-entrar-curso i {
      font-size: 18px;
      }

      /* Eliminar el contenedor de acciones duales en Mis Cursos */
      #misCursos .curso-acciones {
      display: none !important;
      }

      /* Mostrar solo el botón de entrar */
      #misCursos .btn-entrar-container {
      display: block !important;
      margin-top: auto;
      }

      
      
      
      
      
      /* Ajustar el header en Mis Cursos */
      #misCursos .mis-curso-header {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 5px;
      margin-bottom: 15px;
      }

      #misCursos .mis-curso-titulo {
      font-size: 22px;
      font-weight: 700;
      color: #1d1d1f;
      }

      /* Responsive para Mis Cursos */
      @media (max-width: 768px) {
      #misCursos .mis-curso-card {
      padding-right: 20px !important;
      padding-top: 50px !important;
      }

      .curso-check-container {
      top: 15px;
      right: 15px;
      }

      .curso-check {
      width: 32px;
      height: 32px;
      }

      .curso-check.checked:after {
      font-size: 16px;
      }

      .btn-entrar-curso {
      padding: 14px 20px;
      font-size: 15px;
      }
      }

      /* Badge para cursos nuevos */
      .mis-curso-categoria.nuevo {
      background: linear-gradient(135deg, #ff3b30 0%, #ff9500 100%);
      animation: pulseBadge 2s infinite;
      }

      @keyframes pulseBadge {
      0% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.4); }
      70% { box-shadow: 0 0 0 6px rgba(255, 59, 48, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0); }
      }

      /* Contenedor de toggles */
      .toggles-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      }

      /* FORZAR MISMAS PROPIEDADES PARA AMBOS TIPOS DE BOTONES */
      .filtro-btn, 
      .filtro-btn-mis {
      padding: 12px 24px !important;
      border-radius: 999px !important;
      font-weight: 600 !important;
      font-size: 15px !important;
      min-height: 44px !important;
      min-width: 100px !important;
      box-sizing: border-box !important;
      line-height: 1.2 !important;
      display: inline-flex !important;
      align-items: center !important;
      justify-content: center !important;
      }

      /* Asegurar que los contenedores tengan la misma distribución */
      .filtros-container {
      display: flex !important;
      gap: 12px !important;
      align-items: center !important;
      }

      .filtro-btn-mis.activo {
      background: linear-gradient(135deg, #000 0%, #00a8a1 100%);
      color: white;

      border-radius: 999px; /* Bordes redondeados completos */
      overflow: hidden; /* &#9989; evita el borde oscuro */
      background-clip: padding-box; /* &#9989; recorta el degradado al borde */

      border: 1px solid rgba(0, 0, 0, 0.08); /* puedes ajustar el color del borde si quieres */
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); /* opcional, para sombra */

      transition: all 0.25s ease;
      }

      /* Hover limpio */
      .filtro-btn-mis.activo:hover {
      background: #ffffff;
      color: #000000; /* ajusta el color según prefieras */

      border-color: rgba(0, 0, 0, 0.15);
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.2);

      transform: translateY(-1px);
      }



      /* Ajuste para los controles de Mis Cursos */
      .mis-cursos-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 30px;
      margin-bottom: 25px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 18px;
      flex-wrap: wrap;
      }

      /* Responsive para controles */
      @media (max-width: 768px) {
      .mis-cursos-controls {
      flex-direction: column;
      align-items: flex-start;
      gap: 20px;
      }

      .toggles-container {
      width: 100%;
      justify-content: space-between;
      }
      }
    </style>
<style>
      /* ===== COLORES BASE DE BOTONES "COMPRAR" POR AÑO (antes del hover) ===== */

      /* Botón comprar - Primer año (turquesa) */
      .mis-curso-card[data-anio="primero"] .btn-comprar:not(.comprado) {
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
      box-shadow: 0 4px 12px rgba(153, 225, 222, 0.5) !important;
      }

      /* Botón comprar - Segundo año (azul) */
      .mis-curso-card[data-anio="segundo"] .btn-comprar:not(.comprado) {
      background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%) !important;
      box-shadow: 0 4px 12px rgba(90, 141, 238, 0.5) !important;
      }

      /* Botón comprar - Tercer año (púrpura) */
      .mis-curso-card[data-anio="tercero"] .btn-comprar:not(.comprado) {
      background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%) !important;
      box-shadow: 0 4px 12px rgba(157, 123, 216, 0.5) !important;
      }

      /* Botón comprar - Cuarto año (naranja) */
      .mis-curso-card[data-anio="cuarto"] .btn-comprar:not(.comprado) {
      background: linear-gradient(135deg, #ff9500 0%, #e68500 100%) !important;
      box-shadow: 0 4px 12px rgba(255, 149, 0, 0.5) !important;
      }

      /* ===== HOVER ESPECÍFICO DE BOTONES (colores más intensos) ===== */

      /* Hover en botón de primer año */
      .mis-curso-card[data-anio="primero"] .btn-comprar:not(.comprado):hover,
      .btn-comprar[data-anio="primero"]:hover:not(.comprado) {
      background: linear-gradient(135deg, #00c7be 0%, #009c95 100%) !important;
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.6) !important;
      animation: pulsePrimerAnio 2s infinite;
      }

      /* Hover en botón de segundo año */
      .mis-curso-card[data-anio="segundo"] .btn-comprar:not(.comprado):hover,
      .btn-comprar[data-anio="segundo"]:hover:not(.comprado) {
      background: linear-gradient(135deg, #3a6bd6 0%, #2a55b4 100%) !important;
      box-shadow: 0 8px 20px rgba(58, 107, 214, 0.6) !important;
      animation: pulseSegundoAnio 2s infinite;
      }

      /* Hover en botón de tercer año */
      .mis-curso-card[data-anio="tercero"] .btn-comprar:not(.comprado):hover,
      .btn-comprar[data-anio="tercero"]:hover:not(.comprado) {
      background: linear-gradient(135deg, #7c5ac2 0%, #6349a8 100%) !important;
      box-shadow: 0 8px 20px rgba(124, 90, 194, 0.6) !important;
      animation: pulseTercerAnio 2s infinite;
      }

      /* Hover en botón de cuarto año */
      .mis-curso-card[data-anio="cuarto"] .btn-comprar:not(.comprado):hover,
      .btn-comprar[data-anio="cuarto"]:hover:not(.comprado) {
      background: linear-gradient(135deg, #e68500 0%, #cc7700 100%) !important;
      box-shadow: 0 8px 20px rgba(230, 133, 0, 0.6) !important;
      animation: pulseCuartoAnio 2s infinite;
      }

      /* ===== ANIMACIONES DE PULSO ===== */

      @keyframes pulsePrimerAnio {
      0% { 
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.3),
      0 0 0 0 rgba(0, 199, 190, 0.4);
      }
      70% { 
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.4),
      0 0 0 10px rgba(0, 199, 190, 0);
      }
      100% { 
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.3),
      0 0 0 0 rgba(0, 199, 190, 0);
      }
      }

      @keyframes pulseSegundoAnio {
      0% { 
      box-shadow: 0 8px 20px rgba(58, 107, 214, 0.3),
      0 0 0 0 rgba(58, 107, 214, 0.4);
      }
      70% { 
      box-shadow: 0 8px 20px rgba(58, 107, 214, 0.4),
      0 0 0 10px rgba(58, 107, 214, 0);
      }
      100% { 
      box-shadow: 0 8px 20px rgba(58, 107, 214, 0.3),
      0 0 0 0 rgba(58, 107, 214, 0);
      }
      }

      @keyframes pulseTercerAnio {
      0% { 
      box-shadow: 0 8px 20px rgba(124, 90, 194, 0.3),
      0 0 0 0 rgba(124, 90, 194, 0.4);
      }
      70% { 
      box-shadow: 0 8px 20px rgba(124, 90, 194, 0.4),
      0 0 0 10px rgba(124, 90, 194, 0);
      }
      100% { 
      box-shadow: 0 8px 20px rgba(124, 90, 194, 0.3),
      0 0 0 0 rgba(124, 90, 194, 0);
      }
      }

      @keyframes pulseCuartoAnio {
      0% { 
      box-shadow: 0 8px 20px rgba(230, 133, 0, 0.3),
      0 0 0 0 rgba(230, 133, 0, 0.4);
      }
      70% { 
      box-shadow: 0 8px 20px rgba(230, 133, 0, 0.4),
      0 0 0 10px rgba(230, 133, 0, 0);
      }
      100% { 
      box-shadow: 0 8px 20px rgba(230, 133, 0, 0.3),
      0 0 0 0 rgba(230, 133, 0, 0);
      }
      }

      /* ===== EFECTO HOVER DE TARJETA COMPLETA ===== */

      /* Primer año - hover de tarjeta */
      .mis-curso-card[data-anio="primero"]:hover {
      border-color: #00c7be;
      box-shadow: 0 20px 40px rgba(0, 199, 190, 0.25) !important;
      transform: translateY(-6px);
      }

      /* Segundo año - hover de tarjeta */
      .mis-curso-card[data-anio="segundo"]:hover {
      border-color: #3a6bd6;
      box-shadow: 0 20px 40px rgba(58, 107, 214, 0.25) !important;
      transform: translateY(-6px);
      }

      /* Tercer año - hover de tarjeta */
      .mis-curso-card[data-anio="tercero"]:hover {
      border-color: #7c5ac2;
      box-shadow: 0 20px 40px rgba(124, 90, 194, 0.25) !important;
      transform: translateY(-6px);
      }

      /* Cuarto año - hover de tarjeta */
      .mis-curso-card[data-anio="cuarto"]:hover {
      border-color: #e68500;
      box-shadow: 0 20px 40px rgba(230, 133, 0, 0.25) !important;
      transform: translateY(-6px);
      }

      /* ===== BOTONES "ACCEDER AL CURSO" EN MODO MIS CURSOS ===== */

/* Botón base para Mis Cursos - Primer año */
#misCursos .mis-curso-card[data-anio="primero"] .btn-entrar-curso {
    background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
    box-shadow: 0 4px 12px rgba(153, 225, 222, 0.5) !important;
}

/* Botón base para Mis Cursos - Segundo año */
#misCursos .mis-curso-card[data-anio="segundo"] .btn-entrar-curso {
    background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%) !important;
    box-shadow: 0 4px 12px rgba(90, 141, 238, 0.5) !important;
}

/* Botón base para Mis Cursos - Tercer año */
#misCursos .mis-curso-card[data-anio="tercero"] .btn-entrar-curso {
    background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%) !important;
    box-shadow: 0 4px 12px rgba(157, 123, 216, 0.5) !important;
}

/* Botón base para Mis Cursos - Cuarto año */
#misCursos .mis-curso-card[data-anio="cuarto"] .btn-entrar-curso {
    background: linear-gradient(135deg, #ff9500 0%, #e68500 100%) !important;
    box-shadow: 0 4px 12px rgba(255, 149, 0, 0.5) !important;
}

      /* ===== HOVER PARA BOTONES EN MIS CURSOS ===== */

      /* Hover en botón de Mis Cursos - Primer año */
      #misCursos .mis-curso-card[data-anio="primero"] .btn-entrar-curso:hover,
      #misCursos .mis-curso-card[data-anio="primero"]:hover .btn-entrar-curso {
      background: linear-gradient(135deg, #00c7be 0%, #009c95 100%);
      box-shadow: 0 8px 20px rgba(0, 199, 190, 0.6);
      animation: pulsePrimerAnio 2s infinite;
      }

      /* Hover en botón de Mis Cursos - Segundo año */
      #misCursos .mis-curso-card[data-anio="segundo"] .btn-entrar-curso:hover,
      #misCursos .mis-curso-card[data-anio="segundo"]:hover .btn-entrar-curso {
      background: linear-gradient(135deg, #3a6bd6 0%, #2a55b4 100%);
      box-shadow: 0 8px 20px rgba(58, 107, 214, 0.6);
      animation: pulseSegundoAnio 2s infinite;
      }

      /* Hover en botón de Mis Cursos - Tercer año */
      #misCursos .mis-curso-card[data-anio="tercero"] .btn-entrar-curso:hover,
      #misCursos .mis-curso-card[data-anio="tercero"]:hover .btn-entrar-curso {
      background: linear-gradient(135deg, #7c5ac2 0%, #6349a8 100%);
      box-shadow: 0 8px 20px rgba(124, 90, 194, 0.6);
      animation: pulseTercerAnio 2s infinite;
      }

      /* Hover en botón de Mis Cursos - Cuarto año */
      #misCursos .mis-curso-card[data-anio="cuarto"] .btn-entrar-curso:hover,
      #misCursos .mis-curso-card[data-anio="cuarto"]:hover .btn-entrar-curso {
      background: linear-gradient(135deg, #e68500 0%, #cc7700 100%);
      box-shadow: 0 8px 20px rgba(230, 133, 0, 0.6);
      animation: pulseCuartoAnio 2s infinite;
      }

      /* ===== COLORES DE CATEGORÍA POR AÑO ===== */

      /* Categoría - Primer año */
      .mis-curso-card[data-anio="primero"] .mis-curso-categoria {
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%);
      }

      /* Categoría - Segundo año */
      .mis-curso-card[data-anio="segundo"] .mis-curso-categoria {
      background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%);
      }

      /* Categoría - Tercer año */
      .mis-curso-card[data-anio="tercero"] .mis-curso-categoria {
      background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%);
      }

      /* Categoría - Cuarto año */
      .mis-curso-card[data-anio="cuarto"] .mis-curso-categoria {
      background: linear-gradient(135deg, #ff9500 0%, #e68500 100%);
      }

      /* ===== COLORES DE PRECIO POR AÑO ===== */

      /* Precio - Primer año */
      .mis-curso-card[data-anio="primero"] .mis-curso-precio {
      background: rgba(153, 225, 222, 0.5);
      color: #007a76;
      }

      /* Precio - Segundo año */
      .mis-curso-card[data-anio="segundo"] .mis-curso-precio {
      background: rgba(90, 141, 238, 0.5);
      color: #2c63c9;
      }

      /* Precio - Tercer año */
      .mis-curso-card[data-anio="tercero"] .mis-curso-precio {
      background: rgba(157, 123, 216, 0.5);
      color: #6a4fa5;
      }

      /* Precio - Cuarto año */
      .mis-curso-card[data-anio="cuarto"] .mis-curso-precio {
      background: rgba(255, 149, 0, 0.5);
      color: #cc7700;
      }

      /* ===== BORDE IZQUIERDO DE TARJETA POR AÑO ===== */

      .mis-curso-card[data-anio="primero"] {
      border-left: 4px solid #99e1de;
      box-shadow: 0 8px 24px rgba(153, 225, 222, 0.15);
      }

      .mis-curso-card[data-anio="segundo"] {
      border-left: 4px solid #5a8dee;
      box-shadow: 0 8px 24px rgba(90, 141, 238, 0.15);
      }

      .mis-curso-card[data-anio="tercero"] {
      border-left: 4px solid #9d7bd8;
      box-shadow: 0 8px 24px rgba(157, 123, 216, 0.15);
      }

      .mis-curso-card[data-anio="cuarto"] {
      border-left: 4px solid #ff9500;
      box-shadow: 0 8px 24px rgba(255, 149, 0, 0.15);
      }

      /* ===== TRANSICIONES ===== */

      .mis-curso-card {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .mis-curso-card .btn-comprar:not(.comprado),
      #misCursos .btn-entrar-curso {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* ===== BOTONES COMPRADOS (estado final) ===== */

      .btn-comprar.comprado {
      background: #000 !important;
      box-shadow: 0 0px 0px rgba(0,0,0,0.2) !important;
      cursor: default;
      }

      .btn-comprar.comprado:hover {
      transform: none !important;
      box-shadow: 0 0px 0px rgba(0,0,0,0.2) !important;
      animation: none !important;
      }

      /* ===== COLORES DE CATEGORÍA POR AÑO (INMUTABLES) ===== */

      /* Categoría - Primer año - SIEMPRE verde turquesa */
      .mis-curso-categoria.filtro-anio[data-anio="primero"],
      .mis-curso-card[data-anio="primero"] .mis-curso-categoria {
      background: linear-gradient(135deg, #99e1de 0%, #00a8a1 100%) !important;
      color: white !important;
      }

      /* Categoría - Segundo año - SIEMPRE azul */
      .mis-curso-categoria.filtro-anio[data-anio="segundo"],
      .mis-curso-card[data-anio="segundo"] .mis-curso-categoria {
      background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%) !important;
      color: white !important;
      }

      /* Categoría - Tercer año - SIEMPRE púrpura */
      .mis-curso-categoria.filtro-anio[data-anio="tercero"],
      .mis-curso-card[data-anio="tercero"] .mis-curso-categoria {
      background: linear-gradient(135deg, #9d7bd8 0%, #7c5ac2 100%) !important;
      color: white !important;
      }

      /* Categoría - Cuarto año - SIEMPRE naranja */
      .mis-curso-categoria.filtro-anio[data-anio="cuarto"],
      .mis-curso-card[data-anio="cuarto"] .mis-curso-categoria {
      background: linear-gradient(135deg, #ff9500 0%, #e68500 100%) !important;
      color: white !important;
      }

    </style>
<style>
/* ===========================
   PÁGINA COMPLETA DE LOGIN - APPLE STYLE
=========================== */

.login-page {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, #99e1de 0% , #ffffff 100%);
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    overflow-y: auto;
}
  

.login-container {
    display: flex;
    max-width: 1000px;
    width: 100%;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 24px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.36);
    overflow: hidden;
    min-height: 680px;
    max-height: 90vh;
}

.login-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
        rgba(0, 168, 161, 0.05) 0%, 
        rgba(0, 122, 118, 0.05) 100%);
    z-index: 1;
}

/* Tarjeta izquierda */
.login-card {
    flex: 1.2;
    padding: 50px 60px;
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
}

.login-close-btn {
    position: absolute;
    top: 24px;
    left: 24px;
    background: rgba(0, 0, 0, 0.05);
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    color: #6e6e73;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    gap: 6px;
    font-weight: 500;
}

.login-close-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(0.98);
}

.login-close-btn svg {
    width: 12px;
    height: 12px;
}

/* Logo */
.login-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 14px;
    margin-bottom: 40px;
}

.logo-circle {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0; /* Evita que se reduzca */
}

.logo-circle img {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    filter: invert(1);
}

/* Contenedor de texto (columna derecha) */
.logo-text {
    display: flex;
    flex-direction: column; /* Esto crea las 2 filas */
    align-items: flex-start;
    justify-content: center;
}

.logo-text h1 {
    font-size: 26px;
    font-weight: 700;
    color: #1d1d1f;
    margin: 0;
    line-height: 1.1;
}

.logo-text p {
    font-size: 14px;
    color: #86868b;
    margin: 2px 0 0;
}

/*-------------------------------
  FORMULARIOS
--------------------------------*/
/* ===========================
   FORMULARIOS DE LOGIN/REGISTRO
   =========================== */
.forms-container {
    position: relative;
    height: 550px;
    overflow: hidden;
}

.login-form {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    opacity: 0;
    transform: translateX(20px);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
}

.login-form.active {
    opacity: 1;
    transform: translateX(0);
    pointer-events: all;
}

.form-header {
    margin-bottom: 32px;
}

.form-header h2 {
    font-size: 28px;
    font-weight: 700;
    color: #1d1d1f;
    margin: 0 0 8px 0;
    letter-spacing: -0.5px;
}

.form-header p {
    font-size: 15px;
    color: #86868b;
    margin: 0;
}

/* ===========================
   INPUTS ESTILO APPLE CON VALIDACIÓN
   =========================== */
.input-group {
    position: relative;
    margin-bottom: 24px;
}

.input-group input {
    width: 100%;
    padding: 16px 0 8px 0;
    border: none;
    background: transparent;
    font-size: 17px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: #1d1d1f;
    outline: none;
    transition: all 0.3s ease;
}

.input-group label {
    position: absolute;
    top: 16px;
    left: 0;
    font-size: 17px;
    color: #86868b;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    gap: 8px;
}

.input-group input:focus + label,
.input-group input:not(:placeholder-shown) + label {
    top: -10px;
    font-size: 13px;
    color: #00a8a1;
}

/* ===========================
   ESTADOS DE ERROR PARA LOS INPUTS
   =========================== */
.input-group.error input:focus + label,
.input-group.error input:not(:placeholder-shown) + label,
.input-group.error label {
    color: #ff3b30 !important;
}

.input-group.error .input-line {
    background: #ff3b30 !important;
    height: 2px;
}

.input-group.error input:focus ~ .input-line {
    background: #ff3b30 !important;
}

.input-line {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: #d2d2d7;
    transition: all 0.3s ease;
}

.input-group input:focus ~ .input-line {
    height: 2px;
    background: #00a8a1;
}

/* ===========================
   MENSAJES DE ERROR
   =========================== */
.error-message {
    position: absolute;
    bottom: -20px;
    left: 0;
    font-size: 12px;
    color: #ff3b30;
    opacity: 0;
    transform: translateY(-5px);
    transition: all 0.3s ease;
    font-weight: 400;
    pointer-events: none;
}

.input-group.error .error-message {
    opacity: 1;
    transform: translateY(0);
}

/* ===========================
   CHECKBOX ESTILO APPLE
   =========================== */
.checkbox {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 15px;
    color: #1d1d1f;
    cursor: pointer;
    position: relative;
}

.checkbox input {
    display: none;
}

.checkmark {
    width: 18px;
    height: 18px;
    border: 2px solid #d2d2d7;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.checkbox.error .checkmark {
    border-color: #ff3b30 !important;
}

.checkbox input:checked + .checkmark {
    background: #00a8a1;
    border-color: #00a8a1;
}

.checkbox input:checked + .checkmark::after {
    content: '\2713';
    color: white;
    font-size: 12px;
    font-weight: bold;
}

/* ===========================
   BOTONES
   =========================== */
.forgot-password {
    font-size: 15px;
    color: #00a8a1;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
}

.forgot-password:hover {
    opacity: 0.8;
}

/* Botón principal */
.login-submit-btn {
    width: 100%;
    padding: 16px;
    background: #00a8a1;
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 17px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin: 32px 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 168, 161, 0.3);
}

/* Franja deslizante al hacer hover */
.login-submit-btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: 0.5s;
}

.login-submit-btn:hover:before {
    left: 100%;
}

.login-submit-btn:active {
    transform: translateY(0);
}

/* Estado de loading */
.login-submit-btn.loading {
    pointer-events: none;
    opacity: 0.9;
    background: #00a8a1 !important;
    color: transparent;
}

.login-submit-btn.loading span {
    visibility: hidden;
    opacity: 0;
}

.login-submit-btn.loading::after {
    content: '';
    position: absolute;
    width: 22px;
    height: 22px;
    border: 3px solid rgba(255, 255, 255, 0.25);
    border-top-color: #ffffff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    left: 50%;
    top: 50%;
    margin-left: -11px;
    margin-top: -11px;
    z-index: 2;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ===========================
   TÉRMINOS Y CONDICIONES
   =========================== */
.login-terms {
    font-size: 13px;
    color: #86868b;
    text-align: center;
    line-height: 1.5;
    margin-top: 20px;
}

.login-terms a {
    color: #00a8a1;
    text-decoration: none;
    font-weight: 500;
}

.login-terms a:hover {
    text-decoration: underline;
}

/* ===========================
   PANEL LATERAL DERECHO
   =========================== */
.login-side-panel {
    flex: 0.8;
    background: linear-gradient(135deg, #00a8a1 0%, #007a76 100%);
    padding: 60px 40px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    border-radius: 0 20px 20px 0;
}

.login-side-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url(https://i.postimg.cc/Sshg9N7g/Chat-GPT-Image-23-dic-2025-21-25-21.png);
    background-size: cover;
    background-position: center;
    opacity: 0.15;
}

.side-panel-content {
    position: relative;
    z-index: 2;
    text-align: center;
    color: white;
    max-width: 280px;
}

.side-panel-content h2 {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 12px 0;
    letter-spacing: -0.5px;
}

.side-panel-content p {
    font-size: 16px;
    opacity: 0.9;
    margin: 0 0 32px 0;
    line-height: 1.5;
}

.side-panel-btn {
    background: transparent;
    border: 2px solid white;
    color: white;
    padding: 14px 28px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0 auto;
}

.side-panel-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

/* ===========================
   RESPONSIVE
   =========================== */
@media (max-width: 900px) {
    .login-container {
        flex-direction: column;
        max-width: 440px;
        max-height: 85vh;
        overflow-y: auto;
    }
    
    .login-side-panel {
        padding: 40px 30px;
        display: none;
    }
    
    .login-card {
        padding: 40px 30px;
    }
    
    .side-panel-content {
        max-width: 100%;
    }
    
    .mobile-toggle {
        display: block;
        text-align: center;
        margin-top: 24px;
        font-size: 15px;
        color: #00a8a1;
        font-weight: 500;
        cursor: pointer;
    }
    
    .mobile-toggle:hover {
        opacity: 0.8;
    }
}

@media (max-width: 480px) {
    .login-card {
        padding: 32px 24px;
    }
    
    .login-logo h1 {
        font-size: 24px;
    }
    
    .form-header h2 {
        font-size: 24px;
    }
    
    .login-submit-btn {
        padding: 14px;
    }
    
    .input-group {
        margin-bottom: 28px;
    }
    
    .error-message {
        bottom: -22px;
    }
}

/* ===========================
   CONTENEDOR PRINCIPAL DE LOGIN
   =========================== */
.login-container {
    width: 100%;
    max-width: 1000px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    display: flex;
    min-height: 600px;
}

.login-card {
    flex: 1;
    padding: 60px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.login-logo {
    margin-bottom: 40px;
}

.login-logo h1 {
    font-size: 28px;
    font-weight: 700;
    color: #1d1d1f;
    margin: 0 0 8px 0;
    letter-spacing: -0.5px;
}

.login-logo p {
    font-size: 15px;
    color: #86868b;
    margin: 0;
}
</style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=8157697924135710057&amp;zx=d8e72c9b-ab1d-4ab5-a6c7-8aa4c05c761d' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=8157697924135710057&amp;zx=d8e72c9b-ab1d-4ab5-a6c7-8aa4c05c761d' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<script type="text/javascript" language="javascript">
  // Supply ads personalization default for EEA readers
  // See https://www.blogger.com/go/adspersonalization
  adsbygoogle = window.adsbygoogle || [];
  if (typeof adsbygoogle.requestNonPersonalizedAds === 'undefined') {
    adsbygoogle.requestNonPersonalizedAds = 1;
  }
</script>


</head>
<body class='[Object] item-view version-1-3-3'>
<!-- ========================= OVERLAY: COMPROBANDO SERVIDOR ========================= -->
<div class='apple-overlay oculto' id='checkingOverlay'>
<div class='apple-card'>
<div class='apple-spinner'></div>
<h3>Estamos preparando el servidor</h3>
<p>Esto puede tardar hasta 1 minuto</p>
<p class='server-counter' id='serverCounter'>
<span class='server-counter-label'>Conectando&#8230;</span>
</p>
</div>
</div>
<!-- ========================= OVERLAY: SERVIDOR CAÍDO ========================= -->
<!-- Modifica los botones en tu HTML: -->
<div class='apple-overlay oculto' id='serverDownOverlay'>
<div class='apple-card'>
<h3>Servidor no disponible</h3>
<p>Ahora mismo no podemos iniciar sesión.</p>
<div class='apple-actions'>
<button class='apple-primary-btn' id='retryServer'>
        Reintentar
      </button>
<button class='apple-ghost-btn' id='guestFromDown'>
        Acceder como invitado
      </button>
</div>
</div>
</div>
<!-- ===== HEADER APPLE STYLE ===== -->
<div class='headerpic-wrapper'>
<div class='left-absolute-container'>
<img alt='Ciencia y educación' class='absolute-image mirrored' src='https://i.postimg.cc/yxgSKHXW/Chat-GPT-Image-12-dic-2025-16-25-11.png' title='Aprende con el Academia Ohara'/>
</div>
<!-- Contenido central -->
<div class='header-wrapper'>
<div class='header-top'>
<!-- Logo izquierda -->
<div class='header-logo' onclick='window.location.href="https://academiaohara.blogspot.com/";' style='cursor: pointer;'>
<div class='logo-container'>
<img alt='Logo Academia Ohara - Aprende ciencias gratis' class='logo-img' height='42' loading='lazy' src='https://i.postimg.cc/j2zKs4Mk/imagen.png' title='Academia Ohara' width='42'/>
</div>
<div>
<div class='logo-text'>OHARA</div>
<div class='logo-subtext'>Cursos de ingeniería</div>
</div>
</div>
<!-- Contenido condicional centrado -->
<div class='header-center'>
<!-- Solo en entradas -->
<div class='campus-title'>
          Campus virtual
        </div>
</div>
<!-- Navegación derecha -->
<div class='header-nav'>
<a class='nav-button miscursos-btn' href='javascript:void(0)'>
<span>Mis cursos</span>
</a>
<!-- Avatar del perfil -->
<div class='perfil-avatar-btn' id='perfil-btn'>
</div>
</div>
</div>
</div>
<!-- Imagen en el extremo derecho -->
<div class='right-absolute-container'>
<img alt='Matemáticas y tecnología' class='absolute-image' src='https://i.postimg.cc/yxgSKHXW/Chat-GPT-Image-12-dic-2025-16-25-11.png' title='Cursos gratuitos de ciencias'/>
</div>
</div>
<!-- DROPDOWN PARA MIS CURSOS -->
<div class='dropdown-menu' id='cursos-dropdown'>
<!-- POR ESTO (con etiquetas cerradas correctamente): -->
<div class='dd-holiday-202511-header'>
<div class='dd-blue'></div>
<div class='dd-orange'></div>
<div class='dd-yellow-orange'></div>
<div class='dd-blue-yellow'></div>
</div>
<!-- BOTÓN DE CIERRE (modificado para estar sobre el encabezado) -->
<button class='close-dropdown-btn' onclick='hideAllDropdowns()'>
        &#10005;
    </button>
<div class='dropdown-content cursos-layout'>
<!-- PANEL IZQUIERDO: Lista de cursos -->
<div class='cursos-lista-panel'>
<div class='lista-header'>
<h3>Mis Cursos</h3>
<div class='cursos-count'>
<span class='count-number' id='cursos-count'>0</span> cursos
                </div>
</div>
<div class='cursos-list-container'>
<div class='cursos-filter'>
<input class='search-input' id='search-cursos' placeholder='Buscar curso...' type='text'/>
<div class='filter-buttons'>
<button class='filter-btn active' data-filter='all'>Todos</button>
<button class='filter-btn' data-filter='progress'>En progreso</button>
<button class='filter-btn' data-filter='completed'>Completados</button>
</div>
</div>
<div class='cursos-list' id='cursos-list'>
<!-- Los cursos se cargarán dinámicamente aquí -->
</div>
</div>
</div>
<!-- PANEL DERECHO: Detalles del curso seleccionado -->
<div class='curso-detalle-panel' id='curso-detalle-panel'>
<div class='detalle-placeholder'>
<div class='placeholder-icon'>👈</div>
<h4>Selecciona un curso</h4>
<p>Elige un curso de la lista para ver su contenido</p>
</div>
<!-- Contenido del curso -->
<div class='curso-detalle-content' id='curso-detalle-content' style='display: none;'>
<div class='detalle-contenido-wrapper'>
<div class='detalle-header'>
<div class='curso-header-info'>
<h3 class='curso-titulo' id='detalle-titulo'>Nombre del curso</h3>
</div>
</div>
<div class='detalle-contenido'>
<!-- SECCIÓN 1: Temas en video -->
<div class='contenido-seccion'>
<div class='seccion-header seccion-collapsible'>
<h4>Temas en video</h4>
<span class='seccion-count' id='count-videos'>0 videos</span>
<div class='toggle-icon'>+</div>
</div>
<div class='seccion-content'>
<div class='contenido-items' id='videos-list'>
<!-- Videos se cargarán aquí -->
</div>
</div>
</div>
<!-- SECCIÓN 2: Temas en PowerPoint -->
<div class='contenido-seccion'>
<div class='seccion-header seccion-collapsible'>
<h4>Presentaciones</h4>
<span class='seccion-count' id='count-presentaciones'>0 presentaciones</span>
<div class='toggle-icon'>+</div>
</div>
<div class='seccion-content'>
<div class='contenido-items' id='presentaciones-list'>
<!-- Presentaciones se cargarán aquí -->
</div>
</div>
</div>
<!-- SECCIÓN 3: Ejercicios -->
<div class='contenido-seccion'>
<div class='seccion-header seccion-collapsible'>
<h4>Ejercicios</h4>
<span class='seccion-count' id='count-ejercicios'>0 ejercicios</span>
<div class='toggle-icon'>+</div>
</div>
<div class='seccion-content'>
<div class='contenido-items' id='ejercicios-list'>
<!-- Ejercicios se cargarán aquí -->
</div>
</div>
</div>
<!-- SECCIÓN 4: Recursos adicionales -->
<div class='contenido-seccion'>
<div class='seccion-header seccion-collapsible'>
<h4>Recursos adicionales</h4>
<div class='toggle-icon'>+</div>
</div>
<div class='seccion-content'>
<div class='contenido-items' id='recursos-list'>
<!-- Recursos se cargarán aquí -->
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- DROPDOWN DE PERFIL SIMPLIFICADO -->
<div class='dropdown-menu perfil-dropdown' id='perfil-dropdown'>
<div class='perfil-header'>
<div class='perfil-avatar' id='perfil-avatar'>
<!-- Se llenará dinámicamente con las iniciales -->
</div>
<div class='perfil-info'>
<h4 id='perfil-nombre'>Cargando...</h4>
<p class='perfil-email' id='perfil-email'>Cargando...</p>
<p class='perfil-plan'>
<span class='plan-premium' id='perfil-plan'>Estudiante</span>
</p>
</div>
</div>
<div class='perfil-menu'>
<ul class='perfil-list'>
<li>
<a class='perfil-item' href='javascript:cambiarModo("mis")'>
<span class='perfil-icon'>📚</span>
                    Mis cursos
                    <span class='badge' id='perfil-badge-cursos' style='display: flex;align-content: space-around;justify-content: space-around;'>0</span>
</a>
</li>
<li>
<a class='perfil-item' href='#contacto' onclick='hideAllDropdowns()'>
<span class='perfil-icon'>💬</span>
                    Contactar soporte
                </a>
</li>
<li>
<a class='perfil-item' href='https://academiaohara.blogspot.com/' target='_blank'>
<span class='perfil-icon'>🏠</span>
                    Volver al blog
                </a>
</li>
<li>
<div class='separador'></div>
</li>
<li>
<a class='perfil-item logout' href='javascript:cerrarSesion()'>
<span class='perfil-icon'>🚪</span>
                    Cerrar sesión
                </a>
</li>
</ul>
</div>
<div class='perfil-footer'>
<p>Academia Ohara &#169; 2025<br/>
<small>Cursos de ingeniería</small></p>
</div>
</div>
<!-- En las ENTRADAS, mostrar el contenido normal del blog -->
<div class='post-container'>
<div class='main section' id='post-body' name='Post Body'><div class='widget Blog' data-version='2' id='Blog1'>
<div class='blog-posts'>
<article class='post-article'>
<div class='post'>
<div class='post-body' id='post-body-7145357825036980313'>
<!--DOCTYPE html-->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Álgebra - Contenido del Curso | Academia Ohara</title>
    
    <!-- SDK de Vimeo -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    
    <style>
        /* ===== BASE ===== */
        body.curso-contenido {
            background: linear-gradient(180deg, #99e1de 0%, #ffffff 100%) !important;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif !important;
            color: #1d1d1f !important;
            margin: 0 !important;
            padding: 0 !important;
            min-height: 100vh !important;
        }

        /* Overlay de verificación */
        .curso-verificacion-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, #99e1de 0%, #ffffff 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .curso-verificacion-container {
            background: white;
            border-radius: 24px;
            padding: 50px 40px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .curso-verificacion-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 168, 161, 0.1);
            border-top-color: #00a8a1;
            border-radius: 50%;
            margin: 0 auto 30px;
            animation: spin 1s linear infinite;
        }

        .curso-verificacion-container h2 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1d1d1f;
        }

        .curso-verificacion-container p {
            color: #6e6e73;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Contenedor principal */
        .curso-main-content {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding-top: 40px;
        }

        .curso-main-content.visible {
            display: block;
            opacity: 1;
        }

        /* ===== CONTENEDOR PRINCIPAL ===== */
        .curso-content-wrapper {
            max-width: 1400px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        /* Header de la entrada */
        .curso-header-entry {
            background: linear-gradient(135deg, #3a6bd6 0%, #8fb5ff 100%);
            border-radius: 24px;
            color: white;
            margin-bottom: 40px;
            box-shadow: 0 20px 50px rgba(90, 141, 238, 0.2);
            position: relative;
            overflow: hidden;
        }

        .curso-header-entry::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('https://i.postimg.cc/yxgSKHXW/Chat-GPT-Image-12-dic-2025-16-25-11.png') center / cover no-repeat;
            opacity: 0.06;
            z-index: 1;
            pointer-events: none;
        }
        
        .curso-header-entry > * {
            position: relative;
            z-index: 2;
        }

        .curso-title-entry {
            font-size: 60px;
            font-weight: 800;
            padding: 30px;
            margin: 0;
            letter-spacing: -0.5px;
        }

        /* ===== BARRA DE FILTROS ===== */
        .filtros-bar {
            background: white;
            border-radius: 16px;
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            position: relative;
            z-index: 10;
        }

        .filtros-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .filtros-title {
            font-size: 18px;
            font-weight: 700;
            color: #1d1d1f;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filtro-counter {
            background: #5a8dee;
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 5px;
        }

        .filtro-buttons-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filtro-dropdown {
            position: relative;
        }

        .filtro-dropdown-btn {
            background: white;
            border: 2px solid #e5e5ea;
            color: #1d1d1f;
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .filtro-dropdown-btn:hover {
            border-color: #5a8dee;
            transform: translateY(-2px);
        }

        .filtro-dropdown-btn.active {
            background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%);
            border-color: #5a8dee;
            color: white;
            box-shadow: 0 5px 15px rgba(90, 141, 238, 0.2);
        }

        .filtro-dropdown-btn.active .filtro-counter {
            background: white;
            color: #5a8dee;
        }

        .filtro-menu {
            display: none;
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            background: white;
            border-radius: 14px;
            padding: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            min-width: 280px;
            max-width: 400px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e5e5ea;
        }

        .filtro-menu.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .menu-header {
            font-size: 15px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-actions {
            display: flex;
            gap: 10px;
        }

        .menu-action-btn {
            background: transparent;
            border: 1px solid #e5e5ea;
            border-radius: 6px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .menu-action-btn:hover {
            background: #f8f9fa;
            border-color: #5a8dee;
        }

        .menu-action-btn.seleccionar-todos {
            color: #5a8dee;
        }

        .menu-action-btn.limpiar {
            color: #ff3b30;
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .menu-item {
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .menu-item:hover {
            background: #f8f9fa;
        }

        .menu-item.selected {
            background: linear-gradient(135deg, rgba(90, 141, 238, 0.15) 0%, rgba(58, 107, 214, 0.15) 100%);
            border-color: #5a8dee;
            color: #3a6bd6;
            font-weight: 600;
        }

        .menu-item.selected .item-check {
            color: #34c759;
            font-weight: bold;
            font-size: 16px;
            animation: checkPop 0.3s ease;
        }

        .item-check {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #e5e5ea;
            transition: all 0.2s ease;
        }

        .menu-item .item-icon {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            background: #f0f0f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .filtros-activos-container {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f5;
            display: none;
        }

        .filtros-activos-container.has-filters {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .filtros-activos-title {
            font-size: 14px;
            font-weight: 600;
            color: #6e6e73;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filtros-activos-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filtro-tag {
            background: linear-gradient(135deg, rgba(90, 141, 238, 0.1) 0%, rgba(58, 107, 214, 0.1) 100%);
            border: 2px solid #5a8dee;
            color: #5a8dee;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            animation: fadeIn 0.3s ease;
        }

        .filtro-tag .remove-tag {
            background: #5a8dee;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            border: none;
            padding: 0;
            line-height: 1;
        }

        .filtro-tag .remove-tag:hover {
            background: #3a6bd6;
            transform: scale(1.1);
        }

        .limpiar-filtros-btn {
            background: transparent;
            border: 2px solid #ff3b30;
            color: #ff3b30;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .limpiar-filtros-btn:hover {
            background: #ff3b30;
            color: white;
            transform: translateY(-2px);
        }

        .resultados-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 14px;
            color: #6e6e73;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            margin-top: 15px;
            display: none;
        }

        .resultados-info.filtros-activos {
            border-color: #5a8dee;
            background: white;
        }

        .resultados-info strong {
            color: #1d1d1f;
            font-weight: 700;
        }

        /* ===== CONTENIDO PRINCIPAL ===== */
        .temas-container {
            background: white;
            border-radius: 20px;
            padding: 0;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: visible;
            position: relative;
            z-index: 1;
        }

        .tema-item {
            border-bottom: 1px solid #f0f0f5;
            position: relative;
            overflow: hidden;
        }

        .tema-item:last-child {
            border-bottom: none;
        }

        .tema-header {
            padding: 30px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            position: relative;
            z-index: 2;
        }

        .tema-header:hover {
            background: #f8f9fa;
        }

        .tema-header.expanded {
            background: linear-gradient(135deg, rgba(90, 141, 238, 0.05) 0%, rgba(58, 107, 214, 0.05) 100%);
        }

        .tema-main-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .tema-badge {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, #5a8dee 0%, #3a6bd6 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            flex-shrink: 0;
        }

        .tema-title-section {
            flex: 1;
        }

        .tema-title {
            font-size: 22px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 5px;
        }

        .tema-desc {
            font-size: 15px;
            color: #6e6e73;
            margin: 0;
        }

        .tema-toggle-icon {
            color: #6e6e73;
            font-size: 20px;
            transition: transform 0.3s ease;
            transform-origin: center;
            flex-shrink: 0;
        }

        .tema-header.expanded .tema-toggle-icon {
            transform: rotate(180deg);
            color: #5a8dee;
        }

        .tema-contenido {
            overflow: hidden;
            height: 0;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .tema-contenido.expanded {
            height: auto;
            opacity: 1;
            transform: translateY(0);
        }

        .tema-seccion {
            position: relative;
        }

        .seccion-header {
            padding: 25px 40px;
            background: #fafafa;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            border-top: 1px solid #f0f0f5;
        }

        .seccion-header:hover {
            background: #f0f0f5;
        }

        .seccion-header.expanded {
            background: #f0f0f5;
            border-bottom: 1px solid #e5e5ea;
        }

        .seccion-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .seccion-header.video .seccion-icon {
            background: rgba(255, 59, 48, 0.1);
            color: #ff3b30;
        }

        .seccion-header.teoria .seccion-icon {
            background: rgba(0, 122, 255, 0.1);
            color: #007aff;
        }

        .seccion-header.ejercicios .seccion-icon {
            background: rgba(52, 199, 89, 0.1);
            color: #34c759;
        }

        .seccion-header.otros .seccion-icon {
            background: rgba(88, 86, 214, 0.1);
            color: #5856d6;
        }

        .seccion-info {
            flex: 1;
        }

        .seccion-titulo {
            font-size: 18px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .seccion-count {
            background: rgba(0, 0, 0, 0.05);
            color: #6e6e73;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
        }

        .seccion-desc {
            font-size: 14px;
            color: #6e6e73;
            margin: 0;
        }

        .seccion-toggle-icon {
            color: #6e6e73;
            font-size: 18px;
            transition: transform 0.3s ease;
            transform-origin: center;
            flex-shrink: 0;
        }

        .seccion-header.expanded .seccion-toggle-icon {
            transform: rotate(180deg);
            color: #5a8dee;
        }

        .seccion-contenido {
            overflow: hidden;
            height: 0;
            opacity: 0;
            transform: translateY(-5px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
        }

        .seccion-contenido.expanded {
            height: auto;
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== NUEVO DISEÑO DE REPRODUCTOR VIMEO ===== */
        .reproductor-integrado {
            padding: 25px 40px;
            display: none;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }

        .seccion-contenido.expanded .reproductor-integrado {
            display: block;
            opacity: 1;
        }

        .reproductor-tema-integrado {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        /* Panel izquierdo - Video (solo reproductor) */
        .video-panel {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .video-container {
            width: 100%;
            height: 100%;
            min-height: 400px;
            position: relative;
            flex: 1;
        }

        .vimeo-player-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .vimeo-player-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .vimeo-player-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* Info del video ahora en la lista */
        .video-info-compact {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            display: none;
        }

        .video-info-compact.activo {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .video-info-compact h4 {
            margin: 0 0 8px 0;
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .video-info-compact p {
            margin: 0;
            font-size: 14px;
            color: #6e6e73;
            line-height: 1.4;
        }

        /* Panel derecho - Lista de videos */
        .lista-videos-panel {
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 600px;
        }

        .lista-videos-header {
            background: #3a6bd6;
            color: white;
            padding: 20px;
        }

        .lista-videos-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .contador-actual {
            background: rgba(255, 255, 255, 0.2);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .lista-videos-contenido {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        /* DISEÑO DE LISTA DE VIDEOS */
        .item-video-lista {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 8px;
            background: white;
            border: 2px solid transparent;
        }

        .item-video-lista:hover {
            background: #f0f0f5;
            transform: translateX(5px);
        }

        .item-video-lista.activo {
            background: rgba(58, 107, 214, 0.1);
            border-color: rgba(58, 107, 214, 0.2);
        }

        .item-video-lista.completado .numero-video {
            background: linear-gradient(135deg, #34c759 0%, #2aa44f 100%);
            color: white;
        }

        .numero-video {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, #e5e5ea 0%, #d1d1d6 100%);
            color: #1d1d1f;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
            position: relative;
            transition: all 0.3s;
        }

        .item-video-lista.activo .numero-video {
            background: linear-gradient(135deg, #3a6bd6 0%, #5a8dee 100%);
            color: white;
            transform: scale(1.1);
        }

        .info-item-lista {
            flex: 1;
            min-width: 0;
        }

        .titulo-item-lista {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #1d1d1f;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .estado-item-lista {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
        }

        .progreso-badge {
            background: linear-gradient(135deg, #34c759 0%, #2aa44f 100%);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .progreso-badge.pendiente {
            background: linear-gradient(135deg, #ff9500 0%, #e68500 100%);
        }

        .tiempo-item-lista {
            color: #8e8e93;
            font-weight: 600;
        }

        /* ===== NUEVO DISEÑO DE SECCIÓN DE DUDAS ===== */
        .seccion-dudas {
            background: white;
            border-radius: 16px;
            padding: 0;
            margin-top: 20px;
            border: 2px solid #f0f0f5;
            overflow: hidden;
        }

        .dudas-header {
            padding: 20px 25px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            border-bottom: 2px solid #f0f0f5;
            transition: all 0.3s ease;
        }

        .dudas-header:hover {
            background: #f0f0f5;
        }

        .dudas-header.expanded {
            background: #f0f0f5;
            border-bottom-color: #e5e5ea;
        }

        .dudas-titulo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 700;
            color: #1d1d1f;
            margin: 0;
        }

        .dudas-toggle {
            color: #6e6e73;
            font-size: 18px;
            transition: transform 0.3s ease;
            transform-origin: center;
        }

        .dudas-header.expanded .dudas-toggle {
            transform: rotate(180deg);
            color: #5a8dee;
        }

        .dudas-contenido {
            overflow: hidden;
            height: 0;
            opacity: 0;
            transform: translateY(-5px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dudas-contenido.expanded {
            height: auto;
            opacity: 1;
            transform: translateY(0);
        }

        .giscus-container {
            min-height: 300px;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            padding: 20px;
        }

        .giscus-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            z-index: 1;
        }

        .giscus-frame {
            width: 100%;
            min-height: 300px;
            border: none;
            border-radius: 12px;
        }

        /* ===== CONTENIDO LISTA ===== */
        .contenido-lista {
            padding: 25px 40px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            opacity: 0;
            animation: fadeIn 0.4s ease forwards;
            animation-delay: 0.2s;
            display: none;
        }

        .seccion-contenido.expanded .contenido-lista {
            display: grid;
            opacity: 1;
        }

        .contenido-item {
            background: white;
            border: 2px solid #f0f0f5;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 180px;
        }

        .contenido-item:hover {
            border-color: #5a8dee;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(90, 141, 238, 0.15);
        }

        .contenido-item.completado {
            border-color: #34c759;
            background: rgba(52, 199, 89, 0.03);
        }

        .contenido-item .item-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 15px;
            width: 100%;
        }

        .contenido-item .item-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
            background: #f8f9fa;
        }

        .contenido-item.teoria .item-icon {
            background: rgba(0, 122, 255, 0.1);
            color: #007aff;
        }

        .contenido-item.ejercicios .item-icon {
            background: rgba(52, 199, 89, 0.1);
            color: #34c759;
        }

        .contenido-item.otros .item-icon {
            background: rgba(88, 86, 214, 0.1);
            color: #5856d6;
        }

        .contenido-item .item-info {
            flex: 1;
            min-width: 0;
            padding-right: 15px;
        }

        .contenido-item .item-titulo {
            font-size: 16px;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: #1d1d1f;
            line-height: 1.3;
        }

        .contenido-item .item-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 13px;
            color: #6e6e73;
        }

        .contenido-item .item-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #f8f9fa;
            padding: 4px 10px;
            border-radius: 8px;
        }

        .contenido-item .item-desc {
            font-size: 14px;
            color: #6e6e73;
            margin-bottom: 15px;
            line-height: 1.5;
            flex: 1;
        }

        .contenido-item .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #f0f0f5;
        }

        .contenido-item .item-btn {
            background: #5a8dee;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            text-align: center;
        }

        .contenido-item .item-btn:hover {
            background: #3a6bd6;
            transform: translateY(-2px);
        }

        .contenido-item .item-progreso {
            font-size: 12px;
            font-weight: 600;
            color: #5a8dee;
            background: rgba(90, 141, 238, 0.1);
            padding: 6px 12px;
            border-radius: 12px;
            margin-right: auto;
        }

        .contenido-item .item-status {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #34c759;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(52, 199, 89, 0.3);
        }

        /* ===== ESTADOS ===== */
        .sin-resultados {
            text-align: center;
            padding: 60px 40px;
            color: #8e8e93;
        }

        .sin-resultados i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .sin-resultados h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1d1d1f;
        }

        .tema-item.hidden,
        .tema-seccion.hidden {
            display: none !important;
        }

        .seccion-contenido.hidden {
            display: none !important;
        }

        /* ===== ANIMACIONES ===== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes checkPop {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .curso-header-entry,
        .filtros-bar,
        .temas-container {
            animation: fadeIn 0.6s ease forwards;
        }

        .tema-contenido.animating {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .seccion-contenido.animating {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .reproductor-tema-integrado {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .video-panel {
                min-height: 350px;
            }
            
            .lista-videos-panel {
                max-height: 400px;
            }
            
            .contenido-lista {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .curso-title-entry {
                font-size: 40px;
                padding: 20px;
            }
            
            .tema-header,
            .seccion-header {
                padding: 20px;
            }
            
            .reproductor-integrado,
            .contenido-lista {
                padding: 20px;
            }
            
            .video-panel {
                min-height: 250px;
            }
            
            .contenido-lista {
                grid-template-columns: 1fr;
            }
            
            .tema-title {
                font-size: 18px;
            }
            
            .seccion-titulo {
                font-size: 16px;
            }
            
            .filtro-buttons-container {
                flex-direction: column;
            }
            
            .contenido-item .item-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .contenido-item .item-footer {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            
            .contenido-item .item-btn {
                width: 100%;
            }
            
            .dudas-header {
                padding: 15px 20px;
            }
            
            .dudas-titulo {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .curso-title-entry {
                font-size: 32px;
            }
            
            .contenido-item {
                padding: 15px;
            }
            
            .reproductor-tema-integrado {
                gap: 15px;
            }
            
            .item-video-lista {
                padding: 10px;
            }
            
            .numero-video {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body class="curso-contenido">
   
    <!-- Overlay de verificación -->
    <div id="verificacionOverlay" class="curso-verificacion-overlay">
        <div class="curso-verificacion-container">
            <div class="curso-verificacion-spinner"></div>
            <h2>Verificando acceso al curso</h2>
            <p>Comprobando que tienes acceso al contenido del curso de Álgebra...</p>
            <div id="verificacionMensaje"></div>
        </div>
    </div>
  
    <!-- Contenido principal del curso -->
    <div id="cursoMainContent" class="curso-main-content">
        <div class="curso-content-wrapper">
            <!-- Header principal -->
            <header class="curso-header-entry">                
                <h1 class="curso-title-entry">ÁLGEBRA LINEAL</h1>
            </header>

            <!-- Barra de filtros -->
            <div class="filtros-bar">
                <div class="filtros-header">
                    <div class="filtros-title">
                        Filtro
                    </div>
                </div>

                <!-- Botones de filtro -->
                <div class="filtro-buttons-container">
                    <div class="filtro-dropdown" id="filtroTemasDropdown">
                        <button class="filtro-dropdown-btn" onclick="toggleMenu('temas')">
                            Por tema
                            <span class="filtro-counter" id="temasCounter">0</span>
                            <i style="font-size: 12px;">&#9660;</i>
                        </button>
                        <div class="filtro-menu" id="menuTemas">
                            <div class="menu-header">
                                <span>Seleccionar temas</span>
                                <div class="menu-actions">
                                    <button class="menu-action-btn seleccionar-todos" onclick="seleccionarTodosTemas()">Todos</button>
                                    <button class="menu-action-btn limpiar" onclick="limpiarTemas()">Limpiar</button>
                                </div>
                            </div>
                            <div class="menu-items" id="temasMenuItems"></div>
                        </div>
                    </div>

                    <div class="filtro-dropdown" id="filtroTiposDropdown">
                        <button class="filtro-dropdown-btn" onclick="toggleMenu('tipos')">
                            Por contenido
                            <span class="filtro-counter" id="tiposCounter">0</span>
                            <i style="font-size: 12px;">&#9660;</i>
                        </button>
                        <div class="filtro-menu" id="menuTipos">
                            <div class="menu-header">
                                <span>Seleccionar tipos</span>
                                <div class="menu-actions">
                                    <button class="menu-action-btn seleccionar-todos" onclick="seleccionarTodosTipos()">Todos</button>
                                    <button class="menu-action-btn limpiar" onclick="limpiarTipos()">Limpiar</button>
                                </div>
                            </div>
                            <div class="menu-items" id="tiposMenuItems"></div>
                        </div>
                    </div>
                </div>

                <!-- Tags de filtros activos -->
                <div class="filtros-activos-container" id="filtrosActivosContainer">
                    <div class="filtros-activos-title">
                        Filtros activos:
                        <button class="limpiar-filtros-btn" onclick="limpiarTodosFiltros()">
                            Limpiar todos
                        </button>
                    </div>
                    <div class="filtros-activos-tags" id="filtrosActivosTags"></div>
                </div>

                <!-- Contador de resultados (OCULTO) -->
                <div class="resultados-info" id="resultadosInfo" style="display: none;">
                    Mostrando <strong id="contenidosMostrados">0</strong> de <strong id="contenidosTotales">0</strong> contenidos
                </div>
            </div>
            
            <!-- Contenedor de temas -->
            <div class="temas-container" id="temasContainer"></div>
        </div>
    </div>

    <!-- JAVASCRIPT COMPLETO CON VIMEO Y GISCUS -->
    <script>
        //<![CDATA[
        // ============================================
        // SISTEMA DE VERIFICACIÓN DE ACCESO
        // ============================================

        const CURSO_ID = '2';
        let usuario = null;

        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔍 Iniciando verificación de acceso al curso de Álgebra...');
            verificarAccesoCurso();
        });

        async function verificarAccesoCurso() {
            try {
                mostrarOverlayVerificacion('Verificando tu acceso al curso...');
                usuario = obtenerUsuarioActual();
                
                if (!usuario) {
                    mostrarErrorAcceso('&#10060; Debes iniciar sesión para acceder al curso\n\nPor favor, inicia sesión en la plataforma principal para continuar.');
                    return;
                }

                console.log('👤 Usuario encontrado:', usuario.nombre);
                const tieneCurso = verificarCursoComprado(usuario);
                
                if (!tieneCurso) {
                    mostrarErrorAcceso('📚 No tienes acceso al curso de Álgebra\n\nPara acceder a este contenido necesitas:\n\n1. Comprar el curso desde la plataforma principal\n2. Iniciar sesión con tu cuenta\n\n&#191;Ya lo compraste pero no aparece? Contacta con soporte.');
                    return;
                }

                console.log('&#9989; Curso verificado: El usuario tiene acceso');
                mostrarAccesoConcedido();
                inicializarCursoContenido();

            } catch (error) {
                console.error('&#10060; Error en verificación:', error);
                mostrarErrorAcceso('&#9888;&#65039; Error al verificar acceso\n\nPor favor, recarga la página o contacta con soporte si el problema persiste.');
            }
        }

        function obtenerUsuarioActual() {
            try {
                let usuarioSesion = sessionStorage.getItem('usuarioSesion');
                if (!usuarioSesion) {
                    usuarioSesion = localStorage.getItem('usuarioSesion');
                }
                
                if (usuarioSesion) {
                    const usuario = JSON.parse(usuarioSesion);
                    if (!usuario.id || !usuario.nombre) {
                        console.warn('Usuario sin campos requeridos');
                        return null;
                    }
                    
                    if (usuario.timestamp) {
                        const ahora = Date.now();
                        const duracionSesion = 8 * 60 * 60 * 1000;
                        if (ahora - usuario.timestamp > duracionSesion) {
                            console.log('&#9200; Sesión expirada');
                            sessionStorage.removeItem('usuarioSesion');
                            return null;
                        }
                    }
                    
                    return usuario;
                }
                
                console.log('🔍 No se encontró sesión activa');
                return null;
                
            } catch (error) {
                console.error('&#10060; Error obteniendo usuario:', error);
                return null;
            }
        }

        function verificarCursoComprado(usuario) {
            if (!usuario.cursosComprados || !Array.isArray(usuario.cursosComprados)) {
                console.log('📚 El usuario no tiene cursos comprados');
                return false;
            }
            
            console.log('🎯 Buscando curso ID:', CURSO_ID);
            const cursoEncontrado = usuario.cursosComprados.some(cursoId => {
                const cursoUsuario = cursoId.toString();
                const cursoBuscado = CURSO_ID.toString();
                
                if (cursoUsuario === cursoBuscado) return true;
                if (cursoUsuario.includes(cursoBuscado)) return true;
                
                return false;
            });
            
            console.log(cursoEncontrado ? '&#9989; Curso encontrado' : '&#10060; Curso NO encontrado');
            return cursoEncontrado;
        }

        function mostrarOverlayVerificacion(mensaje) {
            const mensajeElement = document.getElementById('verificacionMensaje');
            if (mensajeElement) {
                mensajeElement.innerHTML = `<p>${mensaje}</p>`;
            }
        }

        function mostrarErrorAcceso(mensaje) {
            const overlay = document.getElementById('verificacionOverlay');
            if (overlay) overlay.style.display = 'none';
            
            const errorHTML = `
                <div id="errorAccesoOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(180deg, #99e1de 0%, #ffffff 100%); display: flex; justify-content: center; align-items: center; z-index: 9999; padding: 20px;">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; text-align: center; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);">
                        <div style="width: 70px; height: 70px; background: #ff3b30; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; font-size: 40px; font-weight: 800;">!</div>
                        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 20px; color: #1d1d1f;">Acceso restringido</h2>
                        <div style="background: #f8f9fa; border-radius: 12px; padding: 20px; margin-bottom: 30px; text-align: left;">
                            <p style="color: #6e6e73; margin: 0; line-height: 1.6; white-space: pre-line;">${mensaje}</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <button onclick="redirigirALogin()" style="background: #00a8a1; color: white; border: none; border-radius: 12px; padding: 16px 30px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%;">🔐 Iniciar Sesión</button>
                            <button onclick="redirigirACursos()" style="background: transparent; border: 2px solid #00a8a1; color: #00a8a1; border-radius: 12px; padding: 16px 30px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%;">📚 Ver Catálogo</button>
                            <button onclick="redirigirAInicio()" style="background: transparent; border: 2px solid #6e6e73; color: #6e6e73; border-radius: 12px; padding: 16px 30px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%;">🏠 Volver al Inicio</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('afterbegin', errorHTML);
        }

        function mostrarAccesoConcedido() {
            const overlay = document.getElementById('verificacionOverlay');
            if (overlay) overlay.style.display = 'none';
            
            const cursoMainContent = document.getElementById('cursoMainContent');
            if (cursoMainContent) {
                cursoMainContent.classList.add('visible');
                cursoMainContent.style.display = 'block';
                setTimeout(() => { cursoMainContent.style.opacity = '1'; }, 100);
            }
        }

        function redirigirALogin() { window.location.href = 'https://academiaohara.blogspot.com/?login=true'; }
        function redirigirACursos() { window.location.href = 'https://academiaohara.blogspot.com/'; }
        function redirigirAInicio() { window.location.href = 'https://academiaohara.blogspot.com/'; }

        // ============================================
        // DATOS DEL CURSO CON VIDEOS DE VIMEO
        // ============================================

        const cursoData = {
            temas: [
                {
                    id: "1",
                    numero: 1,
                    titulo: "Fundamentos de Matrices",
                    descripcion: "Introducción, operaciones básicas y tipos de matrices",
                    contenido: {
                        video: [
                            { 
                                id: "1-v1", 
                                titulo: "&#191;Qué es una matriz?", 
                                descripcion: "Introducción a los conceptos básicos de matrices", 
                                duracion: "10:25",
                                videoId: "76979871",
                                completado: false, 
                                progreso: 0 
                            },
                            { 
                                id: "1-v2", 
                                titulo: "Suma y resta de matrices", 
                                descripcion: "Operaciones básicas con matrices", 
                                duracion: "15:38",
                                videoId: "76979871",
                                completado: false, 
                                progreso: 0 
                            },
                            { 
                                id: "1-v3", 
                                titulo: "Multiplicación de matrices", 
                                descripcion: "Reglas y propiedades de la multiplicación", 
                                duracion: "22:52",
                                videoId: "940847256",
                                completado: false, 
                                progreso: 0 
                            }
                        ],
                        teoria: [
                            { id: "1-t1", titulo: "Teoría de Matrices", descripcion: "Conceptos fundamentales y definiciones", paginas: "15 páginas", completado: true, progreso: 100 },
                            { id: "1-t2", titulo: "Propiedades de operaciones", descripcion: "Propiedades matemáticas de matrices", paginas: "12 páginas", completado: false, progreso: 0 }
                        ],
                        ejercicios: [
                            { id: "1-e1", titulo: "Ejercicios básicos", descripcion: "Problemas de aplicación inicial", paginas: "8 páginas", completado: false, progreso: 30 },
                            { id: "1-e2", titulo: "Problemas de multiplicación", descripcion: "Práctica avanzada de multiplicación", paginas: "10 páginas", completado: false, progreso: 0 }
                        ],
                        otros: [
                            { id: "1-o1", titulo: "Formulario completo", descripcion: "Resumen de fórmulas importantes", paginas: "6 páginas", completado: true, progreso: 100 },
                            { id: "1-o2", titulo: "Historia de las matrices", descripcion: "Orígenes y desarrollo histórico", paginas: "5 páginas", completado: false, progreso: 0 }
                        ]
                    }
                },
                {
                    id: "2",
                    numero: 2,
                    titulo: "Sistemas de Ecuaciones Lineales",
                    descripcion: "Métodos de solución y aplicaciones",
                    contenido: {
                        video: [
                            { 
                                id: "2-v1", 
                                titulo: "Método de eliminación gaussiana", 
                                descripcion: "Solución sistemática de ecuaciones", 
                                duracion: "18:40",
                                videoId: "TU_ID_VIMEO_4",
                                completado: false, 
                                progreso: 0 
                            },
                            { 
                                id: "2-v2", 
                                titulo: "Método de sustitución", 
                                descripcion: "Técnica básica de resolución", 
                                duracion: "14:30",
                                videoId: "TU_ID_VIMEO_5",
                                completado: false, 
                                progreso: 0 
                            }
                        ],
                        teoria: [
                            { id: "2-t1", titulo: "Teoría de sistemas lineales", descripcion: "Propiedades y teoremas fundamentales", paginas: "18 páginas", completado: true, progreso: 100 },
                            { id: "2-t2", titulo: "Clasificación de sistemas", descripcion: "Tipos y métodos de solución", paginas: "10 páginas", completado: false, progreso: 0 }
                        ],
                        ejercicios: [
                            { id: "2-e1", titulo: "Sistemas 2x2 y 3x3", descripcion: "Ejercicios prácticos de resolución", paginas: "12 páginas", completado: false, progreso: 0 },
                            { id: "2-e2", titulo: "Problemas de aplicación", descripcion: "Sistemas en contextos reales", paginas: "15 páginas", completado: false, progreso: 0 }
                        ],
                        otros: [
                            { id: "2-o1", titulo: "Resumen de métodos", descripcion: "Comparativa de técnicas de resolución", paginas: "8 páginas", completado: false, progreso: 0 }
                        ]
                    }
                }
            ]
        };

        // Nuevos tipos de contenido reorganizados
        const tiposContenido = [
            { id: "video", nombre: "Videos", icono: "🎬" },
            { id: "teoria", nombre: "Teoría", icono: "📚" },
            { id: "ejercicios", nombre: "Ejercicios", icono: "&#9999;&#65039;" },
            { id: "otros", nombre: "Otros", icono: "📄" }
        ];

        // ============================================
        // VARIABLES GLOBALES
        // ============================================

        let filtrosActivos = { temas: [], tipos: [] };
        let menuActivo = null;
        let videosActuales = [];
        let videoActualIndex = -1;
        let temaVideoActual = null;
        let vimeoPlayers = {};
        let playerActual = null;
        let giscusWidgets = {};

        // ============================================
        // INICIALIZACIÓN DEL CURSO
        // ============================================

        function inicializarCursoContenido() {
            console.log('📚 Inicializando contenido del curso con Vimeo y Giscus...');
            
            // Cargar progresos guardados
            cargarProgresosGuardados();
            
            // Inicializar componentes
            cargarMenuTemas();
            cargarMenuTipos();
            cargarTemas();
            actualizarContadoresFiltros();
            actualizarFiltrosActivos();
            aplicarFiltros();
            
            // Cerrar menus al hacer click fuera
            document.addEventListener('click', function(e) {
                if (menuActivo && !e.target.closest('.filtro-dropdown')) {
                    cerrarMenus();
                }
            });
        }

        function cargarProgresosGuardados() {
            try {
                const completedVideos = JSON.parse(localStorage.getItem('completedVideosAlgebra') || '[]');
                
                cursoData.temas.forEach(tema => {
                    if (tema.contenido.video) {
                        tema.contenido.video.forEach(video => {
                            if (completedVideos.includes(video.id)) {
                                video.completado = true;
                                video.progreso = 100;
                            }
                        });
                    }
                });
                
                console.log('📊 Progresos cargados:', completedVideos.length, 'videos completados');
            } catch (error) {
                console.error('Error cargando progresos:', error);
            }
        }

        function cargarMenuTemas() {
            const temasMenuItems = document.getElementById('temasMenuItems');
            temasMenuItems.innerHTML = '';
            
            cursoData.temas.forEach(tema => {
                const item = document.createElement('div');
                item.className = 'menu-item';
                item.setAttribute('data-tema', tema.id);
                item.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                        <div class="item-icon">${tema.numero}</div>
                        <span style="font-size: 14px; font-weight: 500;">${tema.titulo}</span>
                    </div>
                    <div class="item-check"><span>&#10003;</span></div>
                `;
                
                item.onclick = () => seleccionarDeseleccionarTema(tema.id);
                temasMenuItems.appendChild(item);
            });
        }

        function cargarMenuTipos() {
            const tiposMenuItems = document.getElementById('tiposMenuItems');
            tiposMenuItems.innerHTML = '';
            
            tiposContenido.forEach(tipo => {
                const item = document.createElement('div');
                item.className = 'menu-item';
                item.setAttribute('data-tipo', tipo.id);
                item.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                        <div class="item-icon" style="background: transparent; color: #1d1d1f; font-size: 16px;">${tipo.icono}</div>
                        <span style="font-size: 14px; font-weight: 500;">${tipo.nombre}</span>
                    </div>
                    <div class="item-check"><span>&#10003;</span></div>
                `;
                
                item.onclick = () => seleccionarDeseleccionarTipo(tipo.id);
                tiposMenuItems.appendChild(item);
            });
        }

        function cargarTemas() {
            const temasContainer = document.getElementById('temasContainer');
            
            const temasHTML = cursoData.temas.map(tema => {
                return `
                    <div class="tema-item" id="tema-${tema.id}" data-tema="${tema.id}">
                        <div class="tema-header" onclick="toggleTema('${tema.id}')">
                            <div class="tema-main-info">
                                <div class="tema-badge">${tema.numero}</div>
                                <div class="tema-title-section">
                                    <h2 class="tema-title">${tema.titulo}</h2>
                                    <p class="tema-desc">${tema.descripcion}</p>
                                </div>
                            </div>
                            <div class="tema-toggle-icon">&#9660;</div>
                        </div>
                        
                        <div class="tema-contenido" id="contenido-tema-${tema.id}">
                            ${generarSeccionesTema(tema)}
                        </div>
                    </div>
                `;
            }).join('');
            
            temasContainer.innerHTML = temasHTML;
        }

        function generarSeccionesTema(tema) {
            let seccionesHTML = '';
            
            tiposContenido.forEach(tipo => {
                const contenido = tema.contenido[tipo.id];
                if (contenido && contenido.length > 0) {
                    seccionesHTML += `
                        <div class="tema-seccion">
                            <div class="seccion-header ${tipo.id}" onclick="toggleSeccion('${tema.id}', '${tipo.id}')">
                                <div class="seccion-icon">${tipo.icono}</div>
                                <div class="seccion-info">
                                    <h3 class="seccion-titulo">
                                        ${tipo.nombre}
                                        <span class="seccion-count">${contenido.length}</span>
                                    </h3>
                                    <p class="seccion-desc">${obtenerDescripcionTipo(tipo.id)}</p>
                                </div>
                                <div class="seccion-toggle-icon">&#9660;</div>
                            </div>
                            <div class="seccion-contenido" id="seccion-${tema.id}-${tipo.id}">
                                ${tipo.id === 'video' ? generarReproductorVimeo(tema) : generarListaContenido(tema, tipo)}
                            </div>
                        </div>
                    `;
                }
            });
            
            return seccionesHTML;
        }

        function generarReproductorVimeo(tema) {
            const videos = tema.contenido.video || [];
            
            return `
                <div class="reproductor-integrado">
                    <div class="reproductor-tema-integrado">
                        <!-- Panel izquierdo - Solo video -->
                        <div class="video-panel">
                            <div class="video-container">
                                <div class="vimeo-player-wrapper">
                                    <div class="vimeo-player-container" id="videoContainer-${tema.id}"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Panel derecho - Lista de videos -->
                        <div class="lista-videos-panel">
                            <div class="lista-videos-header">
                                <h3>📋 Videos del Tema</h3>
                                <span class="contador-actual" id="contadorVideoActual-${tema.id}">${videos.length > 0 ? '1/' + videos.length : '0/0'}</span>
                            </div>
                            <div class="lista-videos-contenido" id="listaVideosContenido-${tema.id}">
                                ${generarListaVideosHTML(tema, videos)}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sección de Dudas separada -->
                    <div class="seccion-dudas" id="seccion-dudas-${tema.id}">
                        <div class="dudas-header" onclick="toggleDudas('${tema.id}')">
                            <h3 class="dudas-titulo">
                                <i>💬</i> Dudas sobre este tema
                            </h3>
                            <div class="dudas-toggle">&#9660;</div>
                        </div>
                        <div class="dudas-contenido" id="dudas-contenido-${tema.id}">
                            <div class="giscus-container" id="giscus-container-${tema.id}">
                                <!-- Giscus se cargará aquí dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generarListaVideosHTML(tema, videos) {
            return videos.map((video, index) => `
                <div class="item-video-lista ${index === 0 ? 'activo' : ''} ${video.completado ? 'completado' : ''}" 
                     data-video-id="${video.id}"
                     data-index="${index}"
                     onclick="seleccionarVideoIntegrado('${tema.id}', ${index})">
                    <div class="numero-video">${index + 1}</div>
                    <div class="info-item-lista">
                        <h4 class="titulo-item-lista">${video.titulo}</h4>
                        <div class="estado-item-lista">
                            <span class="progreso-badge ${video.completado ? '' : 'pendiente'}">
                                ${video.completado ? '&#10003; Completado' : `${video.progreso || 0}%`}
                            </span>
                            <span class="tiempo-item-lista">${video.duracion}</span>
                        </div>
                    </div>
                </div>
                <div class="video-info-compact" id="video-info-${tema.id}-${index}">
                    <h4>${video.titulo}</h4>
                    <p>${video.descripcion}</p>
                </div>
            `).join('');
        }

        function generarListaContenido(tema, tipo) {
            const contenido = tema.contenido[tipo.id] || [];
            
            return `
                <div class="contenido-lista">
                    ${contenido.map((item, index) => `
                        <div class="contenido-item ${tipo.id} ${item.completado ? 'completado' : ''}" 
                             data-tipo="${tipo.id}"
                             data-id="${item.id}"
                             data-tema="${tema.id}">
                            <div class="item-header">
                                <div class="item-icon">${tiposContenido.find(t => t.id === tipo.id)?.icono || '📄'}</div>
                                <div class="item-info">
                                    <h4 class="item-titulo">${item.titulo}</h4>
                                    <div class="item-meta">
                                        <span class="item-meta-item">${item.paginas || 'PDF'}</span>
                                    </div>
                                </div>
                                ${item.completado ? '<div class="item-status">&#10003;</div>' : ''}
                            </div>
                            <p class="item-desc">${item.descripcion}</p>
                            <div class="item-footer">
                                <span class="item-progreso">${item.progreso || 0}%</span>
                                <button class="item-btn" onclick="abrirPDF('${tipo.id}', '${item.id}', '${item.titulo}')">
                                    ${item.completado ? 'Abrir' : 'Descargar PDF'}
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ============================================
        // FUNCIONES DEL REPRODUCTOR VIMEO
        // ============================================

        async function inicializarReproductorVimeo(temaId) {
            const tema = cursoData.temas.find(t => t.id === temaId);
            if (!tema || !tema.contenido.video || tema.contenido.video.length === 0) return;
            
            videosActuales = tema.contenido.video;
            temaVideoActual = tema;
            videoActualIndex = 0;
            
            // Cargar primer video
            await cargarVideoVimeo(temaId, 0);
            
            // Configurar Giscus para el primer video
            setTimeout(() => {
                configurarGiscusParaVideo(temaId, videosActuales[0].id);
            }, 500);
        }

        async function cargarVideoVimeo(temaId, index) {
            if (index < 0 || index >= videosActuales.length) return;
            
            const video = videosActuales[index];
            const videoContainer = document.getElementById(`videoContainer-${temaId}`);
            
            videoActualIndex = index;
            
            // Ocultar todos los infos compactos y mostrar solo el actual
            document.querySelectorAll(`.video-info-compact`).forEach(el => {
                el.classList.remove('activo');
            });
            const infoElement = document.getElementById(`video-info-${temaId}-${index}`);
            if (infoElement) {
                infoElement.classList.add('activo');
            }
            
            // Obtener videoId
            const videoId = video.videoId;
            
            if (!videoId) {
                console.error('No se pudo obtener ID de Vimeo');
                return;
            }
            
            // Limpiar contenedor
            videoContainer.innerHTML = '';
            
            // Crear iframe de Vimeo
            const iframe = document.createElement('iframe');
            
            // Parámetros para Vimeo
            const params = new URLSearchParams({
                title: 0,
                byline: 0,
                portrait: 0,
                badge: 0,
                autopause: 0,
                player_id: 0,
                app_id: 58479
            });
            
            iframe.id = `vimeoIframe-${temaId}-${index}`;
            iframe.src = `https://player.vimeo.com/video/${videoId}?${params.toString()}`;
            iframe.frameBorder = "0";
            iframe.allow = "autoplay; fullscreen; picture-in-picture";
            iframe.allowFullscreen = true;
            
            // ESTILOS: Fijar altura
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.minHeight = "400px";
            iframe.style.display = "block";
            iframe.style.backgroundColor = "#000";
            
            videoContainer.style.width = "100%";
            videoContainer.style.height = "100%";
            videoContainer.style.minHeight = "400px";
            videoContainer.style.position = "relative";
            videoContainer.style.overflow = "hidden";
            
            videoContainer.appendChild(iframe);
            
            // Inicializar player de Vimeo
            try {
                if (playerActual) {
                    playerActual.unload();
                }
                
                playerActual = new Vimeo.Player(iframe);
                
                // Configurar eventos
                playerActual.on('loaded', function() {
                    console.log('&#9989; Video de Vimeo cargado correctamente');
                    
                    // Detectar cuando el usuario está viendo
                    playerActual.on('timeupdate', function(data) {
                        const porcentajeVisto = (data.seconds / data.duration) * 100;
                        
                        // Marcar como visto parcialmente
                        if (porcentajeVisto > 25 && !video.completado && video.progreso < 90) {
                            video.progreso = Math.min(porcentajeVisto, 90);
                            actualizarProgresoVideo(video.id, video.progreso);
                        }
                        
                        // Marcar como completado si vio más del 90%
                        if (porcentajeVisto > 90 && !video.completado) {
                            marcarVideoComoCompletado(video.id);
                        }
                    });
                    
                    playerActual.on('ended', function() {
                        console.log('🏁 Video finalizado');
                        marcarVideoComoCompletado(video.id);
                    });
                });
                
                playerActual.on('error', function(error) {
                    console.error('&#10060; Error en Vimeo:', error);
                    
                    videoContainer.innerHTML = `
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white;">
                            <div style="font-size: 24px; margin-bottom: 10px;">&#9888;&#65039;</div>
                            <div>No se pudo cargar el video</div>
                            <button onclick="cargarVideoVimeo('${temaId}', ${index})" style="margin-top: 15px; padding: 8px 16px; background: #3a6bd6; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                Reintentar
                            </button>
                        </div>
                    `;
                });
                
            } catch (error) {
                console.error('Error inicializando Vimeo:', error);
            }
            
            // Actualizar lista de videos
            actualizarListaVideosIntegrada(temaId);
            
            // Actualizar contador
            document.getElementById(`contadorVideoActual-${temaId}`).textContent = `${videoActualIndex + 1}/${videosActuales.length}`;
            
            // Configurar Giscus para este video
            configurarGiscusParaVideo(temaId, video.id);
        }

        function actualizarListaVideosIntegrada(temaId) {
            const listaContenido = document.getElementById(`listaVideosContenido-${temaId}`);
            if (!listaContenido) return;
            
            listaContenido.querySelectorAll('.item-video-lista').forEach((item, index) => {
                item.classList.toggle('activo', index === videoActualIndex);
            });
        }

        function seleccionarVideoIntegrado(temaId, index) {
            cargarVideoVimeo(temaId, index);
        }

        function actualizarProgresoVideo(videoId, progreso) {
            // Actualizar en la lista
            const item = document.querySelector(`.item-video-lista[data-video-id="${videoId}"]`);
            if (item) {
                const badge = item.querySelector('.progreso-badge');
                if (badge) {
                    badge.textContent = `${Math.round(progreso)}%`;
                }
            }
            
            // Guardar progreso
            const progresos = JSON.parse(localStorage.getItem('videoProgressAlgebra') || '{}');
            progresos[videoId] = progreso;
            localStorage.setItem('videoProgressAlgebra', JSON.stringify(progresos));
        }

        function marcarVideoComoCompletado(videoId) {
            cursoData.temas.forEach(tema => {
                if (tema.contenido.video) {
                    tema.contenido.video.forEach(video => {
                        if (video.id === videoId) {
                            video.completado = true;
                            video.progreso = 100;
                        }
                    });
                }
            });
            
            // Guardar en localStorage
            const completedVideos = JSON.parse(localStorage.getItem('completedVideosAlgebra') || '[]');
            if (!completedVideos.includes(videoId)) {
                completedVideos.push(videoId);
                localStorage.setItem('completedVideosAlgebra', JSON.stringify(completedVideos));
            }
            
            // Actualizar UI
            const item = document.querySelector(`.item-video-lista[data-video-id="${videoId}"]`);
            if (item) {
                item.classList.add('completado');
                const badge = item.querySelector('.progreso-badge');
                if (badge) {
                    badge.textContent = '&#10003; Completado';
                    badge.classList.remove('pendiente');
                }
            }
        }

        // ============================================
        // FUNCIÓN PARA ABRIR PDFs
        // ============================================

        function abrirPDF(tipoId, contenidoId, titulo) {
            mostrarNotificacion('📄 Abriendo PDF', `Preparando "${titulo}" para descarga...`);
            
            // Simular descarga de PDF (en un entorno real, aquí iría la URL real del PDF)
            setTimeout(() => {
                const link = document.createElement('a');
                link.href = '#'; // URL del PDF iría aquí
                link.download = `${titulo}.pdf`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Marcar como completado si no lo estaba
                cursoData.temas.forEach(tema => {
                    const tipos = ['teoria', 'ejercicios', 'otros'];
                    tipos.forEach(tipo => {
                        if (tema.contenido[tipo]) {
                            const contenido = tema.contenido[tipo].find(c => c.id === contenidoId);
                            if (contenido && !contenido.completado) {
                                contenido.completado = true;
                                contenido.progreso = 100;
                                
                                // Actualizar UI
                                const item = document.querySelector(`.contenido-item[data-id="${contenidoId}"]`);
                                if (item) {
                                    item.classList.add('completado');
                                    const status = document.createElement('div');
                                    status.className = 'item-status';
                                    status.textContent = '&#10003;';
                                    item.querySelector('.item-header').appendChild(status);
                                    
                                    const btn = item.querySelector('.item-btn');
                                    if (btn) {
                                        btn.textContent = 'Abrir';
                                    }
                                    
                                    const progreso = item.querySelector('.item-progreso');
                                    if (progreso) {
                                        progreso.textContent = '100%';
                                    }
                                }
                            }
                        }
                    });
                });
            }, 500);
        }

        // ============================================
        // SISTEMA DE DUDAS CON GISCUS
        // ============================================

        function toggleDudas(temaId) {
            const dudasHeader = document.querySelector(`#seccion-dudas-${temaId} .dudas-header`);
            const dudasContenido = document.getElementById(`dudas-contenido-${temaId}`);
            const isExpanding = !dudasHeader.classList.contains('expanded');
            
            dudasContenido.classList.add('animating');
            
            if (isExpanding) {
                dudasHeader.classList.add('expanded');
                const altura = dudasContenido.scrollHeight;
                dudasContenido.style.height = '0px';
                dudasContenido.style.opacity = '0';
                dudasContenido.style.transform = 'translateY(-5px)';
                dudasContenido.offsetHeight;
                dudasContenido.style.height = altura + 'px';
                dudasContenido.style.opacity = '1';
                dudasContenido.style.transform = 'translateY(0)';
                setTimeout(() => dudasContenido.classList.add('expanded'), 10);
            } else {
                dudasHeader.classList.remove('expanded');
                const altura = dudasContenido.scrollHeight;
                dudasContenido.style.height = altura + 'px';
                dudasContenido.offsetHeight;
                dudasContenido.style.height = '0px';
                dudasContenido.style.opacity = '0';
                dudasContenido.style.transform = 'translateY(-5px)';
                setTimeout(() => dudasContenido.classList.remove('expanded'), 400);
            }
            
            setTimeout(() => {
                dudasContenido.classList.remove('animating');
                if (isExpanding) dudasContenido.style.height = 'auto';
            }, 400);
        }

        function configurarGiscusParaVideo(temaId, videoId) {
            const giscusContainer = document.getElementById(`giscus-container-${temaId}`);
            
            // Eliminar cualquier widget Giscus existente para este contenedor
            if (giscusWidgets[temaId]) {
                const oldScript = document.querySelector(`#giscus-script-${temaId}`);
                if (oldScript) {
                    oldScript.remove();
                }
                // Limpiar el contenedor
                giscusContainer.innerHTML = '';
            }
            
            // Crear elemento para Giscus
            giscusContainer.innerHTML = '<div class="giscus-placeholder"></div>';
            
            // Esperar un momento para que se limpie el DOM
            setTimeout(() => {
                // Crear y configurar el script de Giscus
                const giscusScript = document.createElement('script');
                giscusScript.id = `giscus-script-${temaId}`;
                giscusScript.src = 'https://giscus.app/client.js';
                giscusScript.setAttribute('data-repo', 'cuartocursoindustrial-svg/academiaohara-discussions');
                giscusScript.setAttribute('data-repo-id', 'R_kgDOQ0UN1Q');
                giscusScript.setAttribute('data-category', 'Q&A');
                giscusScript.setAttribute('data-category-id', 'DIC_kwDOQ0UN1c4C0ndD');
                giscusScript.setAttribute('data-mapping', 'specific');
                giscusScript.setAttribute('data-term', `algebra-video-${videoId}`);
                giscusScript.setAttribute('data-strict', '1');
                giscusScript.setAttribute('data-reactions-enabled', '0');
                giscusScript.setAttribute('data-emit-metadata', '0');
                giscusScript.setAttribute('data-input-position', 'top');
                giscusScript.setAttribute('data-theme', 'light');
                giscusScript.setAttribute('data-lang', 'es');
                giscusScript.setAttribute('crossorigin', 'anonymous');
                giscusScript.async = true;
                
                // Configurar callback cuando el script se carga
                giscusScript.onload = function() {
                    console.log(`&#9989; Giscus cargado para video: ${videoId}`);
                    // Marcar como cargado
                    giscusWidgets[temaId] = true;
                };
                
                giscusScript.onerror = function(error) {
                    console.error(`&#10060; Error cargando Giscus para video ${videoId}:`, error);
                    giscusContainer.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #6e6e73;">
                            <div style="font-size: 48px; margin-bottom: 20px;">💬</div>
                            <h3 style="color: #1d1d1f; margin-bottom: 10px;">No se pudieron cargar los comentarios</h3>
                            <p>Intenta recargar la página o verifica tu conexión a internet.</p>
                            <button onclick="configurarGiscusParaVideo('${temaId}', '${videoId}')" 
                                    style="margin-top: 20px; padding: 10px 20px; background: #5a8dee; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                Reintentar
                            </button>
                        </div>
                    `;
                };
                
                // Agregar el script al contenedor
                giscusContainer.appendChild(giscusScript);
                
                console.log(`📝 Configurando Giscus para video: ${videoId}`);
                
            }, 100);
        }

        // ============================================
        // FUNCIONES DEL ACORDEÓN
        // ============================================

        function toggleTema(temaId) {
            const temaHeader = document.querySelector(`#tema-${temaId} .tema-header`);
            const temaContenido = document.getElementById(`contenido-tema-${temaId}`);
            const isExpanding = !temaHeader.classList.contains('expanded');
            
            temaContenido.classList.add('animating');
            
            if (isExpanding) {
                temaHeader.classList.add('expanded');
                const altura = temaContenido.scrollHeight;
                temaContenido.style.height = '0px';
                temaContenido.style.opacity = '0';
                temaContenido.style.transform = 'translateY(-10px)';
                temaContenido.offsetHeight;
                temaContenido.style.height = altura + 'px';
                temaContenido.style.opacity = '1';
                temaContenido.style.transform = 'translateY(0)';
                setTimeout(() => temaContenido.classList.add('expanded'), 10);
            } else {
                temaHeader.classList.remove('expanded');
                const altura = temaContenido.scrollHeight;
                temaContenido.style.height = altura + 'px';
                temaContenido.offsetHeight;
                temaContenido.style.height = '0px';
                temaContenido.style.opacity = '0';
                temaContenido.style.transform = 'translateY(-10px)';
                setTimeout(() => temaContenido.classList.remove('expanded'), 500);
            }
            
            setTimeout(() => {
                temaContenido.classList.remove('animating');
                if (isExpanding) temaContenido.style.height = 'auto';
            }, 500);
        }

        function toggleSeccion(temaId, tipo) {
            const seccionHeader = document.querySelector(`#seccion-${temaId}-${tipo}`).previousElementSibling;
            const seccionContenido = document.getElementById(`seccion-${temaId}-${tipo}`);
            const isExpanding = !seccionHeader.classList.contains('expanded');
            
            seccionContenido.classList.add('animating');
            
            if (isExpanding) {
                seccionHeader.classList.add('expanded');
                const altura = seccionContenido.scrollHeight;
                seccionContenido.style.height = '0px';
                seccionContenido.style.opacity = '0';
                seccionContenido.style.transform = 'translateY(-5px)';
                seccionContenido.offsetHeight;
                seccionContenido.style.height = altura + 'px';
                seccionContenido.style.opacity = '1';
                seccionContenido.style.transform = 'translateY(0)';
                setTimeout(() => seccionContenido.classList.add('expanded'), 10);
                
                // Inicializar reproductor si es video
                if (tipo === 'video') {
                    setTimeout(() => inicializarReproductorVimeo(temaId), 300);
                }
            } else {
                seccionHeader.classList.remove('expanded');
                const altura = seccionContenido.scrollHeight;
                seccionContenido.style.height = altura + 'px';
                seccionContenido.offsetHeight;
                seccionContenido.style.height = '0px';
                seccionContenido.style.opacity = '0';
                seccionContenido.style.transform = 'translateY(-5px)';
                setTimeout(() => seccionContenido.classList.remove('expanded'), 400);
            }
            
            setTimeout(() => {
                seccionContenido.classList.remove('animating');
                if (isExpanding) seccionContenido.style.height = 'auto';
            }, 400);
        }

        // ============================================
        // FUNCIONES DE FILTROS
        // ============================================

        function seleccionarDeseleccionarTema(temaId) {
            const index = filtrosActivos.temas.indexOf(temaId);
            const item = document.querySelector(`#temasMenuItems .menu-item[data-tema="${temaId}"]`);
            
            if (index === -1) {
                filtrosActivos.temas.push(temaId);
                if (item) item.classList.add('selected');
            } else {
                filtrosActivos.temas.splice(index, 1);
                if (item) item.classList.remove('selected');
            }
            
            actualizarContadoresFiltros();
            cerrarMenus();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function seleccionarDeseleccionarTipo(tipoId) {
            const index = filtrosActivos.tipos.indexOf(tipoId);
            const item = document.querySelector(`#tiposMenuItems .menu-item[data-tipo="${tipoId}"]`);
            
            if (index === -1) {
                filtrosActivos.tipos.push(tipoId);
                if (item) item.classList.add('selected');
            } else {
                filtrosActivos.tipos.splice(index, 1);
                if (item) item.classList.remove('selected');
            }
            
            actualizarContadoresFiltros();
            cerrarMenus();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function seleccionarTodosTemas() {
            filtrosActivos.temas = [];
            cursoData.temas.forEach(tema => {
                filtrosActivos.temas.push(tema.id);
                const item = document.querySelector(`#temasMenuItems .menu-item[data-tema="${tema.id}"]`);
                if (item) item.classList.add('selected');
            });
            actualizarContadoresFiltros();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function limpiarTemas() {
            filtrosActivos.temas = [];
            document.querySelectorAll('#temasMenuItems .menu-item').forEach(item => {
                item.classList.remove('selected');
            });
            actualizarContadoresFiltros();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function seleccionarTodosTipos() {
            filtrosActivos.tipos = [];
            tiposContenido.forEach(tipo => {
                filtrosActivos.tipos.push(tipo.id);
                const item = document.querySelector(`#tiposMenuItems .menu-item[data-tipo="${tipo.id}"]`);
                if (item) item.classList.add('selected');
            });
            actualizarContadoresFiltros();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function limpiarTipos() {
            filtrosActivos.tipos = [];
            document.querySelectorAll('#tiposMenuItems .menu-item').forEach(item => {
                item.classList.remove('selected');
            });
            actualizarContadoresFiltros();
            actualizarFiltrosActivos();
            aplicarFiltros();
        }

        function limpiarTodosFiltros() {
            limpiarTemas();
            limpiarTipos();
        }

        function actualizarContadoresFiltros() {
            const temasCounter = document.getElementById('temasCounter');
            const tiposCounter = document.getElementById('tiposCounter');
            
            if (temasCounter) {
                temasCounter.textContent = filtrosActivos.temas.length;
                temasCounter.style.display = filtrosActivos.temas.length > 0 ? 'inline-block' : 'none';
            }
            
            if (tiposCounter) {
                tiposCounter.textContent = filtrosActivos.tipos.length;
                tiposCounter.style.display = filtrosActivos.tipos.length > 0 ? 'inline-block' : 'none';
            }
            
            const btnTemas = document.querySelector('#filtroTemasDropdown .filtro-dropdown-btn');
            const btnTipos = document.querySelector('#filtroTiposDropdown .filtro-dropdown-btn');
            
            if (btnTemas) btnTemas.classList.toggle('active', filtrosActivos.temas.length > 0);
            if (btnTipos) btnTipos.classList.toggle('active', filtrosActivos.tipos.length > 0);
        }

        function actualizarFiltrosActivos() {
            const container = document.getElementById('filtrosActivosContainer');
            const tagsContainer = document.getElementById('filtrosActivosTags');
            
            const tieneFiltros = filtrosActivos.temas.length > 0 || filtrosActivos.tipos.length > 0;
            container.classList.toggle('has-filters', tieneFiltros);
            
            let html = '';
            
            filtrosActivos.temas.forEach(temaId => {
                const tema = cursoData.temas.find(t => t.id === temaId);
                if (tema) {
                    html += `<div class="filtro-tag"><span>Tema ${tema.numero}: ${tema.titulo}</span><button class="remove-tag" onclick="removerFiltroTema('${temaId}')">&#215;</button></div>`;
                }
            });
            
            filtrosActivos.tipos.forEach(tipoId => {
                const tipo = tiposContenido.find(t => t.id === tipoId);
                if (tipo) {
                    html += `<div class="filtro-tag"><span>${tipo.nombre}</span><button class="remove-tag" onclick="removerFiltroTipo('${tipoId}')">&#215;</button></div>`;
                }
            });
            
            tagsContainer.innerHTML = html;
        }

        function removerFiltroTema(temaId) {
            const index = filtrosActivos.temas.indexOf(temaId);
            if (index !== -1) {
                filtrosActivos.temas.splice(index, 1);
                const item = document.querySelector(`#temasMenuItems .menu-item[data-tema="${temaId}"]`);
                if (item) item.classList.remove('selected');
                actualizarContadoresFiltros();
                actualizarFiltrosActivos();
                aplicarFiltros();
            }
        }

        function removerFiltroTipo(tipoId) {
            const index = filtrosActivos.tipos.indexOf(tipoId);
            if (index !== -1) {
                filtrosActivos.tipos.splice(index, 1);
                const item = document.querySelector(`#tiposMenuItems .menu-item[data-tipo="${tipoId}"]`);
                if (item) item.classList.remove('selected');
                actualizarContadoresFiltros();
                actualizarFiltrosActivos();
                aplicarFiltros();
            }
        }

        function aplicarFiltros() {
            // Aplicar filtros
            cursoData.temas.forEach(tema => {
                const temaElement = document.getElementById(`tema-${tema.id}`);
                if (!temaElement) return;
                
                const cumpleTema = filtrosActivos.temas.length === 0 || filtrosActivos.temas.includes(tema.id);
                
                if (!cumpleTema) {
                    temaElement.classList.add('hidden');
                    return;
                }
                
                // Mostrar tema pero verificar sus secciones
                temaElement.classList.remove('hidden');
                let temaTieneContenido = false;
                
                tiposContenido.forEach(tipo => {
                    const seccionElement = document.querySelector(`#tema-${tema.id} .seccion-header.${tipo.id}`);
                    if (!seccionElement) return;
                    
                    const seccionPadre = seccionElement.parentElement;
                    const cumpleTipo = filtrosActivos.tipos.length === 0 || filtrosActivos.tipos.includes(tipo.id);
                    
                    if (cumpleTipo) {
                        seccionPadre.classList.remove('hidden');
                        const contenido = tema.contenido[tipo.id] || [];
                        if (contenido.length > 0) temaTieneContenido = true;
                    } else {
                        seccionPadre.classList.add('hidden');
                    }
                });
                
                // Si el tema no tiene contenido visible, ocultarlo completamente
                if (!temaTieneContenido) {
                    temaElement.classList.add('hidden');
                }
            });
            
            // Mostrar mensaje si no hay resultados
            const temasVisibles = document.querySelectorAll('.tema-item:not(.hidden)');
            if (temasVisibles.length === 0) {
                mostrarSinResultados();
            }
        }

        function mostrarSinResultados() {
            const temasContainer = document.getElementById('temasContainer');
            const originalContent = temasContainer.innerHTML;
            
            temasContainer.innerHTML = `
                <div class="sin-resultados">
                    <i>🔍</i>
                    <h3>No se encontraron resultados</h3>
                    <p>Intenta con otros filtros o remueve algunos filtros activos</p>
                    <button onclick="limpiarTodosFiltros(); aplicarFiltros();" style="background: #5a8dee; color: white; border: none; border-radius: 12px; padding: 12px 24px; margin-top: 20px; font-weight: 600; cursor: pointer;">
                        🗑&#65039; Remover todos los filtros
                    </button>
                </div>
            `;
        }

        function toggleMenu(tipo) {
            cerrarMenus();
            
            const menu = document.getElementById(`menu${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            const btn = document.querySelector(`#filtro${tipo.charAt(0).toUpperCase() + tipo.slice(1)}Dropdown .filtro-dropdown-btn`);
            
            if (menu && menu !== menuActivo) {
                menu.classList.add('active');
                btn.classList.add('active');
                menuActivo = menu;
                event.stopPropagation();
            }
        }

        function cerrarMenus() {
            document.querySelectorAll('.filtro-menu').forEach(menu => {
                menu.classList.remove('active');
            });
            
            document.querySelectorAll('.filtro-dropdown-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            menuActivo = null;
        }

        // ============================================
        // FUNCIONES AUXILIARES
        // ============================================

        function obtenerDescripcionTipo(tipoId) {
            const descripciones = {
                video: 'Clases en video con explicaciones detalladas',
                teoria: 'Teoría complementaria y explicaciones detalladas en PDF',
                ejercicios: 'Problemas prácticos para reforzar el aprendizaje en PDF',
                otros: 'Guías, apuntes y resúmenes descargables en PDF'
            };
            return descripciones[tipoId] || 'Contenido educativo en PDF';
        }

        function mostrarNotificacion(titulo, mensaje) {
            document.querySelectorAll('.notificacion-temporal').forEach(el => el.remove());
            
            const notificacion = document.createElement('div');
            notificacion.className = 'notificacion-temporal';
            notificacion.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.15);
                z-index: 10000;
                max-width: 350px;
                border-left: 5px solid #5a8dee;
                animation: fadeIn 0.3s ease;
                font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
            `;
            
            notificacion.innerHTML = `
                <div style="font-weight: 700; margin-bottom: 8px; color: #1d1d1f; font-size: 16px;">${titulo}</div>
                <div style="color: #6e6e73; font-size: 14px; line-height: 1.5;">${mensaje}</div>
            `;
            
            document.body.appendChild(notificacion);
            
            setTimeout(() => {
                notificacion.style.opacity = '0';
                notificacion.style.transform = 'translateX(100px)';
                notificacion.style.transition = 'all 0.3s ease';
                
                setTimeout(() => {
                    if (document.body.contains(notificacion)) {
                        document.body.removeChild(notificacion);
                    }
                }, 300);
            }, 3000);
        }
        //]]>
    </script>
</body>
</html>
</div>
</div>
</article>
</div>
</div></div>
</div>
<style>
        /* En tu CSS personalizado */
.post-article {
  margin-bottom: 2rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid #eee;
}

.post-title {
  margin-bottom: 0.5rem;
}

.post-title a {
  color: #333;
  text-decoration: none;
  font-size: 1.5rem;
}

.post-meta {
  color: #666;
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

.post-date {
  margin-right: 1rem;
}

.post-labels a {
  margin-right: 0.5rem;
  color: #0073e6;
}

.post-readmore {
  margin-top: 1rem;
}

.blog-pagination {
  display: flex;
  justify-content: space-between;
  margin-top: 2rem;
}
      </style>
<script type="text/javascript" src="https://resources.blogblog.com/blogblog/data/res/117829930-rockpool_compiled.js" async="true"></script>
<script>
// <![CDATA[
// ===========================
// 1. CONSTANTES Y CONFIGURACIÓN
// ===========================
const estado = {
    modo: 'todos',
    cursosComprados: [],
    cursos: [],
    cursoInfo: {},
    usuario: null
};

const cursoContenido = {
    1: {
        titulo: "Cálculo",
        categoria: "Primer año",
        progreso: 42,
		enlaceCurso: "#",
        videos: [
            { titulo: "Límites y continuidad", duracion: "45 min", url: "#" },
            { titulo: "Derivadas básicas", duracion: "38 min", url: "#" },
            { titulo: "Regla de la cadena", duracion: "52 min", url: "#" },
            { titulo: "Aplicaciones de derivadas", duracion: "41 min", url: "#" }
        ],
        presentaciones: [
            { titulo: "Introducción al cálculo", slides: 24, url: "#" },
            { titulo: "Técnicas de derivación", slides: 32, url: "#" },
            { titulo: "Problemas de optimización", slides: 28, url: "#" }
        ],
        ejercicios: [
            { titulo: "Ejercicios de límites", nivel: "Básico", cantidad: 15, url: "#" },
            { titulo: "Problemas de derivadas", nivel: "Intermedio", cantidad: 20, url: "#" },
            { titulo: "Aplicaciones prácticas", nivel: "Avanzado", cantidad: 10, url: "#" }
        ],
        recursos: [
            { titulo: "Fórmulas esenciales", tipo: "PDF", url: "#" },
            { titulo: "Tabla de derivadas", tipo: "Imagen", url: "#" },
            { titulo: "Calculadora online", tipo: "Herramienta", url: "#" }
        ]
    },
    2: {
        titulo: "Álgebra",
        categoria: "Primer año",
        progreso: 15,
		enlaceCurso: "https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html",
        videos: [
            { titulo: "Matrices y determinantes", duracion: "50 min", url: "#" },
            { titulo: "Sistemas de ecuaciones", duracion: "42 min", url: "#" }
        ],
        presentaciones: [
            { titulo: "Álgebra lineal básica", slides: 30, url: "#" }
        ],
        ejercicios: [
            { titulo: "Problemas de matrices", nivel: "Básico", cantidad: 12, url: "#" }
        ],
        recursos: [
            { titulo: "Guía de matrices", tipo: "PDF", url: "#" }
        ]
    },
    3: {
        titulo: "Mecánica",
        categoria: "Primer año",
        progreso: 100,
		enlaceCurso: "#",
        videos: [
            { titulo: "Cinemática básica", duracion: "48 min", url: "#" },
            { titulo: "Leyes de Newton", duracion: "55 min", url: "#" },
            { titulo: "Trabajo y energía", duracion: "51 min", url: "#" }
        ],
        presentaciones: [
            { titulo: "Fundamentos de mecánica", slides: 35, url: "#" },
            { titulo: "Dinámica de partículas", slides: 28, url: "#" }
        ],
        ejercicios: [
            { titulo: "Problemas de cinemática", nivel: "Básico", cantidad: 18, url: "#" },
            { titulo: "Aplicaciones de dinámica", nivel: "Intermedio", cantidad: 15, url: "#" }
        ],
        recursos: [
            { titulo: "Fórmulas de mecánica", tipo: "PDF", url: "#" },
            { titulo: "Simulador de movimientos", tipo: "Herramienta", url: "#" }
        ]
    },
    6: {
        titulo: "Informática",
        categoria: "Primer año",
        progreso: 65,
		enlaceCurso: "#",
        videos: [
            { titulo: "Introducción a la programación", duracion: "60 min", url: "#" },
            { titulo: "Estructuras de datos", duracion: "58 min", url: "#" },
            { titulo: "Algoritmos básicos", duracion: "47 min", url: "#" }
        ],
        presentaciones: [
            { titulo: "Fundamentos de informática", slides: 40, url: "#" },
            { titulo: "Programación orientada a objetos", slides: 36, url: "#" }
        ],
        ejercicios: [
            { titulo: "Ejercicios de programación", nivel: "Básico", cantidad: 25, url: "#" },
            { titulo: "Problemas de algoritmos", nivel: "Intermedio", cantidad: 18, url: "#" }
        ],
        recursos: [
            { titulo: "Manual de referencia", tipo: "PDF", url: "#" },
            { titulo: "Entorno de desarrollo", tipo: "Software", url: "#" }
        ]
    }
};

// ===========================
// 2. FUNCIONES DE UTILIDAD BÁSICA (sin dependencias)
// ===========================

// ===========================
// FUNCIONES DE VALIDACIÓN VISUAL
// ===========================

// MODIFICA verificarTokenURL para que sea asíncrona
async function verificarTokenURL() {
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token') || urlParams.get('verify_token');
    
    if (!token) {
        return false;
    }
    
    console.log("🔍 Token detectado en URL:", token);
    
    // Ocultar toda la interfaz normal
    const allContainer = document.querySelector('.all-container');
    const header = document.querySelector('.headerpic-wrapper');
    
    if (allContainer) allContainer.style.display = 'none';
    if (header) header.style.display = 'none';
    
    // Ocultar también login si está visible
    const loginPage = document.getElementById('loginPage');
    if (loginPage) loginPage.style.display = 'none';
    
    // Crear y mostrar página de verificación
    await mostrarPaginaVerificacion(token); // AWAIT aquí
    
    return true;
}


function mostrarPaginaVerificacion(token) {
	return new Promise((resolve) => {
    // Crear el HTML de la página de verificación
    const verificationHTML = `
        <div class="verification-overlay" id="verificationOverlay">
            <div class="verification-container">
                <div class="verification-header">
                    <div class="verification-logo">
                        <img src="https://i.postimg.cc/j2zKs4Mk/imagen.png" alt="Academia Ohara"/>
                        <h1>Academia Ohara</h1>
                    </div>
                    <h2>Verificando tu cuenta</h2>
                    <p>Estamos validando tu correo electrónico...</p>
                </div>
                
                <div class="verification-body">
                    <div class="verification-spinner" id="verificationSpinner">
                        <div class="spinner"></div>
                    </div>
                    
                    <div class="verification-message" id="verificationMessage" style="display: none;">
                        <div class="message-icon" id="messageIcon"></div>
                        <h3 id="messageTitle"></h3>
                        <p id="messageText"></p>
                        <button class="verification-btn" id="verificationActionBtn">
                            Continuar
                        </button>
                    </div>
                </div>
                
                <div class="verification-footer">
                    <p>© 2025 Academia Ohara - Cursos de ingeniería</p>
                </div>
            </div>
        </div>
    `;
    
    // Agregar al body
    document.body.insertAdjacentHTML('beforeend', verificationHTML);
    
    // CSS para la verificación
    const verificationCSS = `
        <style>
        .verification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, #99e1de 0%, #ffffff 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            padding: 20px;
        }
        
        .verification-container {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 480px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .verification-header {
            padding: 40px 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(0, 168, 161, 0.05) 0%, rgba(0, 168, 161, 0.02) 100%);
        }
        
        .verification-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .verification-logo img {
            width: 48px;
            height: 48px;
            border-radius: 12px;
        }
        
        .verification-logo h1 {
            font-size: 26px;
            font-weight: 700;
            color: #1d1d1f;
            margin: 0;
        }
        
        .verification-header h2 {
            font-size: 22px;
            color: #1d1d1f;
            margin: 0 0 10px 0;
        }
        
        .verification-header p {
            color: #6e6e73;
            margin: 0;
        }
        
        .verification-body {
            padding: 30px 40px;
            text-align: center;
        }
        
        .verification-spinner {
            margin: 20px 0;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 168, 161, 0.1);
            border-top-color: #00a8a1;
            border-radius: 50%;
            margin: 0 auto;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .verification-message {
            animation: fadeIn 0.5s ease;
        }
        
        .message-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
        }
        
        .message-icon.success {
            background: #34c759;
            color: white;
        }
        
        .message-icon.error {
            background: #ff3b30;
            color: white;
        }
        
        .verification-message h3 {
            font-size: 20px;
            margin: 0 0 10px 0;
            color: #1d1d1f;
        }
        
        .verification-message p {
            color: #6e6e73;
            margin: 0 0 25px 0;
            line-height: 1.5;
        }
        
        .verification-btn {
            background: #00a8a1;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 200px;
        }
        
        .verification-btn:hover {
            background: #009c95;
            transform: translateY(-2px);
        }
        
        .verification-footer {
            padding: 20px 40px;
            text-align: center;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            color: #8e8e93;
            font-size: 13px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        </style>
    `;
    
        // Agregar el CSS
        document.head.insertAdjacentHTML('beforeend', verificationCSS);
        
        // Ahora procesar el token y resolver la Promise cuando termine
        procesarTokenVerificacion(token).finally(() => {
            resolve(true);
        });
    });
}

async function procesarTokenVerificacion(token) {
    const spinner = document.getElementById('verificationSpinner');
    const message = document.getElementById('verificationMessage');
    const icon = document.getElementById('messageIcon');
    const title = document.getElementById('messageTitle');
    const text = document.getElementById('messageText');
    const actionBtn = document.getElementById('verificationActionBtn');
    
    try {
        console.log("🔐 Procesando token...");
        
        // URL con token
        const url = `https://backend-cursos-eepp.onrender.com/api/auth/verify-email?token=${encodeURIComponent(token)}`;
        console.log("URL:", url);
        
        const response = await fetch(url, {
            method: 'GET',
            headers: {'Accept': 'application/json'}
        });
        
        console.log("Status:", response.status);
        
        const data = await response.json();
        console.log("Respuesta:", data);
        
        spinner.style.display = 'none';
        message.style.display = 'block';
        
        // DECISIÓN POR CÓDIGO DE RESPUESTA
        if (response.ok) {
            // 200 OK - Éxito
            if (data.alreadyVerified) {
                // ✅ YA VERIFICADO
                icon.className = 'message-icon success';
                icon.textContent = '✓';
                title.textContent = '¡Ya estás verificado!';
                text.textContent = data.message || 'Tu cuenta ya estaba verificada anteriormente.';
            } else {
                // ✅ NUEVA VERIFICACIÓN
                icon.className = 'message-icon success';
                icon.textContent = '✓';
                title.textContent = '¡Verificación exitosa!';
                text.textContent = data.message || 'Tu correo ha sido verificado correctamente.';
            }
            
            actionBtn.textContent = 'Iniciar Sesión';
            actionBtn.onclick = () => {
                window.history.replaceState({}, document.title, window.location.pathname);
                document.getElementById('verificationOverlay').remove();
                mostrarLogin();
                mostrarTab('login');
                mostrarNotificacion(data.alreadyVerified ? 'Cuenta ya verificada' : '¡Verificado!', 'success');
            };
            
        } else {
            // 400, 500 - Error
            switch(data.code) {
                case 'TOKEN_EXPIRED':
                case 'TOKEN_EXPIRED_DB':
                    // ⚠️ TOKEN EXPIRADO
                    icon.className = 'message-icon warning';
                    icon.textContent = '⚠';
                    title.textContent = 'Enlace expirado';
                    text.textContent = data.error || 'El enlace ha expirado.';
                    
                    actionBtn.textContent = 'Reenviar enlace';
                    actionBtn.onclick = async () => {
                        // Extraer email del token (aunque esté expirado)
                        try {
                            const payload = JSON.parse(atob(token.split('.')[1]));
                            if (payload.email) {
                                await reenviarVerificacion(payload.email, actionBtn, text);
                            }
                        } catch(e) {
                            mostrarNotificacion('No se pudo obtener el email', 'error');
                        }
                    };
                    break;
                    
                case 'TOKEN_REPLACED':
                    // 🔄 TOKEN REEMPLAZADO
                    icon.className = 'message-icon warning';
                    icon.textContent = '🔄';
                    title.textContent = 'Enlace antiguo';
                    text.textContent = data.error || 'Este enlace ya no es válido.';
                    
                    actionBtn.textContent = 'Reenviar nuevo enlace';
                    actionBtn.onclick = async () => {
                        try {
                            const payload = JSON.parse(atob(token.split('.')[1]));
                            if (payload.email) {
                                await reenviarVerificacion(payload.email, actionBtn, text);
                            }
                        } catch(e) {
                            mostrarNotificacion('No se pudo obtener el email', 'error');
                        }
                    };
                    break;
                    
                default:
                    // ❌ ERROR GENÉRICO
                    icon.className = 'message-icon error';
                    icon.textContent = '✕';
                    title.textContent = 'Error';
                    text.textContent = data.error || 'Error en la verificación';
                    
                    actionBtn.textContent = 'Ir al Login';
                    actionBtn.onclick = () => {
                        window.history.replaceState({}, document.title, window.location.pathname);
                        document.getElementById('verificationOverlay').remove();
                        mostrarLogin();
                    };
            }
        }
        
    } catch (error) {
        console.error('❌ Error completo:', error);
        
        spinner.style.display = 'none';
        message.style.display = 'block';
        
        icon.className = 'message-icon error';
        icon.textContent = '⚠';
        title.textContent = 'Error de conexión';
        text.textContent = 'No se pudo conectar al servidor. Verifica tu internet.';
        
        actionBtn.textContent = 'Reintentar';
        actionBtn.onclick = () => location.reload();
    }
}

// Función auxiliar para reenviar verificación
async function reenviarVerificacion(email, boton, textoElement) {
    try {
        boton.disabled = true;
        boton.innerHTML = 'Enviando...';
        
        const res = await fetch('https://backend-cursos-eepp.onrender.com/api/auth/resend-verification', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ email })
        });
        
        if (res.ok) {
            textoElement.textContent = '¡Nuevo enlace enviado a tu correo!';
            boton.style.display = 'none';
            mostrarNotificacion('Enlace reenviado', 'success');
        } else {
            throw new Error('Error al reenviar');
        }
    } catch(e) {
        console.error('Error:', e);
        mostrarNotificacion('No se pudo reenviar', 'error');
        boton.disabled = false;
        boton.textContent = 'Reintentar';
    }
}

function mostrarMensajeVerificacion(titulo, mensaje, tipo = 'error') {
    const overlay = document.getElementById('verificationOverlay');
    if (!overlay) return;
    
    const icon = document.getElementById('messageIcon');
    const title = document.getElementById('messageTitle');
    const text = document.getElementById('messageText');
    const actionBtn = document.getElementById('verificationActionBtn');
    const spinner = document.getElementById('verificationSpinner');
    
    spinner.style.display = 'none';
    
    icon.className = `message-icon ${tipo}`;
    icon.textContent = tipo === 'success' ? '✓' : '✕';
    title.textContent = titulo;
    text.textContent = mensaje;
    
    message.style.display = 'block';
}

function limpiarErrores() {
    // Limpiar errores de inputs
    document.querySelectorAll('.input-group.error, .checkbox.error').forEach(elemento => {
        elemento.classList.remove('error');
    });
    
    // También limpiar específicamente los checkboxes de términos si existen
    const acceptTermsCheckbox = document.getElementById('acceptTerms');
    if (acceptTermsCheckbox) {
        const termsLabel = acceptTermsCheckbox.closest('.checkbox');
        if (termsLabel) {
            termsLabel.classList.remove('error');
        }
    }
}

function marcarError(elemento, mensaje = '') {
    if (elemento) {
        elemento.classList.add('error');
        if (mensaje) {
            const errorElement = elemento.querySelector('.error-message');
            if (errorElement) {
                errorElement.textContent = mensaje;
            }
        }
    }
}

function validarEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function obtenerIniciales(nombre) {
    if (!nombre) return 'US';
    return nombre
        .split(' ')
        .map(palabra => palabra.charAt(0))
        .join('')
        .toUpperCase()
        .substring(0, 2);
}

function obtenerCursoPorId(id) {
    if (typeof id === 'string' && id.length === 24) {
        return estado.cursoInfo[id];
    }
    const idNum = parseInt(id);
    if (!isNaN(idNum)) {
        return estado.cursoInfo[idNum] || estado.cursos.find(c => c.id === idNum);
    }
    return estado.cursoInfo[id] || estado.cursos.find(c => c._id === id || c.id === id);
}


// =========================
// SISTEMA DE NOTIFICACIONES APPLE GLASS
// =========================

class AppleNotificacionManager {
    constructor() {
        this.queue = [];
        this.activeNotifications = [];
        this.maxActive = 3;
        this.spacing = 70;
        this.baseTop = 80;
    }
    
    mostrar(mensaje, tipo = 'info', opciones = {}) {
        const config = {
            duracion: 3000,
            icono: true,
            cerrable: true,
            ...opciones
        };
        
        this.queue.push({ mensaje, tipo, config });
        this.procesarCola();
    }
    
    procesarCola() {
        if (this.activeNotifications.length < this.maxActive && this.queue.length > 0) {
            const notifData = this.queue.shift();
            this.crearNotificacion(notifData);
        }
    }
    
    crearNotificacion({ mensaje, tipo, config }) {
        const id = `apple-notif-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        const notificacion = document.createElement('div');
        
        // Clases y atributos
        notificacion.className = `apple-notification ${tipo}`;
        notificacion.id = id;
        notificacion.setAttribute('role', 'alert');
        notificacion.setAttribute('aria-live', 'polite');
        
        // Íconos por tipo
        const iconos = {
            success: '✓',
            error: '⚠',
            info: 'ℹ',
            warning: '⚠'
        };
        
        // Contenido con icono
        if (config.icono && iconos[tipo]) {
            notificacion.innerHTML = `
                <span style="
                    display: inline-block;
                    margin-right: 12px;
                    font-size: 18px;
                    vertical-align: middle;
                    opacity: 0.95;
                    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));
                ">${iconos[tipo]}</span>
                <span style="vertical-align: middle;">${mensaje}</span>
            `;
        } else {
            notificacion.textContent = mensaje;
        }
        
        // Botón de cerrar
        if (config.cerrable) {
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '×';
            closeBtn.setAttribute('aria-label', 'Cerrar notificación');
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: rgba(0, 0, 0, 0.1);
                border: none;
                color: currentColor;
                opacity: 0.7;
                cursor: pointer;
                font-size: 18px;
                font-weight: 300;
                padding: 0;
                width: 24px;
                height: 24px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
                line-height: 1;
            `;
            
            closeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                this.eliminarNotificacion(id);
            });
            
            closeBtn.addEventListener('mouseenter', () => {
                closeBtn.style.opacity = '1';
                closeBtn.style.background = 'rgba(0, 0, 0, 0.2)';
            });
            
            closeBtn.addEventListener('mouseleave', () => {
                closeBtn.style.opacity = '0.7';
                closeBtn.style.background = 'rgba(0, 0, 0, 0.1)';
            });
            
            notificacion.appendChild(closeBtn);
        }
        
        document.body.appendChild(notificacion);
        this.activeNotifications.push(id);
        
        // Posicionar
        this.actualizarPosiciones();
        
        // Animación de entrada
        requestAnimationFrame(() => {
            notificacion.style.transform = 'translateX(0) scale(1)';
            notificacion.style.opacity = '1';
        });
        
        // Cerrar al hacer clic en la notificación
        notificacion.addEventListener('click', (e) => {
            if (!e.target.closest('button')) {
                this.eliminarNotificacion(id);
            }
        });
        
        // Auto-eliminar si tiene duración
        if (config.duracion > 0) {
            const timeoutId = setTimeout(() => {
                this.eliminarNotificacion(id);
            }, config.duracion);
            
            // Guardar referencia para poder cancelar si se cierra manualmente
            notificacion._timeoutId = timeoutId;
        }
        
        return id;
    }
    
    eliminarNotificacion(id) {
        const notificacion = document.getElementById(id);
        if (!notificacion) return;
        
        // Cancelar timeout si existe
        if (notificacion._timeoutId) {
            clearTimeout(notificacion._timeoutId);
        }
        
        // Animación de salida
        notificacion.classList.add('exiting');
        
        setTimeout(() => {
            notificacion.remove();
            
            // Eliminar de lista activa
            this.activeNotifications = this.activeNotifications.filter(activeId => activeId !== id);
            
            // Reposicionar notificaciones restantes
            this.actualizarPosiciones();
            
            // Procesar siguiente en cola
            this.procesarCola();
        }, 300);
    }
    
    actualizarPosiciones() {
        this.activeNotifications.forEach((id, index) => {
            const notificacion = document.getElementById(id);
            if (notificacion) {
                notificacion.style.top = `${this.baseTop + (index * this.spacing)}px`;
            }
        });
    }
    
    // Métodos rápidos para tipos comunes
    exito(mensaje, opciones = {}) {
        this.mostrar(mensaje, 'success', opciones);
    }
    
    error(mensaje, opciones = {}) {
        this.mostrar(mensaje, 'error', opciones);
    }
    
    info(mensaje, opciones = {}) {
        this.mostrar(mensaje, 'info', opciones);
    }
    
    advertencia(mensaje, opciones = {}) {
        this.mostrar(mensaje, 'warning', opciones);
    }
    
    // Limpiar todas las notificaciones
    limpiarTodas() {
        this.activeNotifications.forEach(id => {
            const notificacion = document.getElementById(id);
            if (notificacion) {
                notificacion.remove();
            }
        });
        
        this.activeNotifications = [];
        this.queue = [];
    }
}

// Crear instancia global
window.appleNotif = new AppleNotificacionManager();

// =========================
// FUNCIÓN DE COMPATIBILIDAD (para tu código existente)
// =========================
function mostrarNotificacion(mensaje, tipo = 'normal') {
    // Mapear tipos antiguos a nuevos
    const tipoMap = {
        'normal': 'info',
        'success': 'success',
        'error': 'error',
        'info': 'info'
    };
    
    const tipoApple = tipoMap[tipo] || 'info';
    
    // Usar el sistema Apple
    window.appleNotif.mostrar(mensaje, tipoApple, {
        duracion: 3000,
        icono: true,
        cerrable: true
    });
}


// ===========================
// 3. FUNCIONES DE DATOS Y API
// ===========================
async function cargarCursos() {
    try {
        const res = await fetch('https://backend-cursos-eepp.onrender.com/api/cursos');
        const data = await res.json();
        const cursos = data.cursos || data;

        estado.cursos = cursos;
        estado.cursoInfo = {};

        cursos.forEach(curso => {
            estado.cursoInfo[curso._id] = curso;
            if (curso.id !== undefined) {
                estado.cursoInfo[curso.id] = curso;
            }
        });
        
        console.log('Cursos cargados:', cursos.length);
        return cursos;
    } catch (error) {
        console.error('Error cargando cursos:', error);
        mostrarNotificacion('Error cargando cursos', 'error');
        return [];
    }
}

// ===========================
// 4. FUNCIONES DE GESTIÓN DE SESIÓN
// ===========================
function limpiarSesiones() {
    localStorage.removeItem('usuarioSesion');
    localStorage.removeItem('authToken');
    sessionStorage.removeItem('usuarioSesion');
    estado.usuario = null;
    estado.cursosComprados = [];
}

function verificarSesion() {
    console.log("🔍 Verificando sesión...");
    
    let usuarioEncontrado = null;
    const sesionTemporal = sessionStorage.getItem('usuarioSesion');
    
    if (sesionTemporal) {
        try {
            usuarioEncontrado = JSON.parse(sesionTemporal);
            console.log("📱 Sesión temporal encontrada");
        } catch (e) {
            console.error("Error parsing sessionStorage:", e);
            sessionStorage.removeItem('usuarioSesion');
        }
    }
    
    if (!usuarioEncontrado) {
        const sesionPersistente = localStorage.getItem('usuarioSesion');
        if (sesionPersistente) {
            try {
                usuarioEncontrado = JSON.parse(sesionPersistente);
                console.log("💾 Sesión persistente encontrada");
            } catch (e) {
                console.error("Error parsing localStorage:", e);
                localStorage.removeItem('usuarioSesion');
            }
        }
    }
    
    if (usuarioEncontrado) {
        if (!usuarioEncontrado.id || !usuarioEncontrado.token) {
            console.warn("Usuario sin campos requeridos");
            limpiarSesiones();
            return false;
        }
        
        if (sesionTemporal && usuarioEncontrado.timestamp) {
            const ahora = Date.now();
            const duracionSesion = 8 * 60 * 60 * 1000;
            if (ahora - usuarioEncontrado.timestamp > duracionSesion) {
                console.log("⏰ Sesión expirada");
                sessionStorage.removeItem('usuarioSesion');
                return false;
            }
        }
        
        estado.usuario = usuarioEncontrado;
        estado.cursosComprados = usuarioEncontrado.cursosComprados || [];
        
        if (sesionTemporal) {
            usuarioEncontrado.timestamp = Date.now();
            sessionStorage.setItem('usuarioSesion', JSON.stringify(usuarioEncontrado));
        }
        
        console.log("✅ Sesión válida:", usuarioEncontrado.nombre);
        return true;
    }
    
    console.log("👤 No hay sesión activa");
    estado.usuario = null;
    estado.cursosComprados = [];
    return false;
}

function cerrarSesion() {
    // Eliminar el confirm() y cerrar directamente
    localStorage.removeItem(getCursosMarcadosKey());

    limpiarSesiones();
    resetearBotonesCursos();
    estado.usuario = null;
    estado.cursosComprados = [];

    actualizarInterfazSesion(false);

    if (typeof hideAllDropdowns === 'function') hideAllDropdowns();
    mostrarNotificacion('Sesión cerrada correctamente', 'success');
    
    // Mostrar login después de cerrar sesión
    setTimeout(() => {
        mostrarLogin();
        mostrarTab('login'); // Asegurar que se muestre la pestaña de login
    }, 300);
}

function inicializarCursosMarcados() {
    if (!estado.usuario) return;

    const key = getCursosMarcadosKey();
    const cursosMarcados = JSON.parse(localStorage.getItem(key) || '[]');

    cursosMarcados.forEach(id => {
        const check = document.querySelector(
            `.mis-curso-card[data-curso-id="${id}"] .curso-check`
        );
        if (check) check.classList.add('checked');
    });
}


async function iniciarSesion() {
  const email = document.getElementById('loginEmail')?.value;
  const password = document.getElementById('loginPassword')?.value;
  const rememberMe = document.getElementById('rememberMe')?.checked;
  const btn = document.getElementById('loginBtn');

  if (!email || !password) {
    mostrarNotificacion('Completa todos los campos');
    return;
  }

  // 👉 Deshabilitar el botón inmediatamente
  btn.disabled = true;
  btn.classList.add('loading');
  mostrarNotificacion('Iniciando sesión...', 'info');

  try {
    const response = await fetch(
      'https://backend-cursos-eepp.onrender.com/api/auth/login',
      {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify({
          email: email.toLowerCase().trim(),
          password: password
        })
      }
    );

    const data = await response.json();

    if (!response.ok) {
      throw new Error(data.error || data.message || 'Error en el login');
    }

    let token = data.token || data.accessToken;
    let usuarioBackend = data.usuario || data.user || data.data?.usuario;

    const usuario = {
      id: usuarioBackend?.id || data.id || `user_${Date.now()}`,
      nombre: usuarioBackend?.nombre || data.nombre || 'Usuario',
      email: usuarioBackend?.email || data.email || email,
      iniciales: obtenerIniciales(usuarioBackend?.nombre || data.nombre || 'Usuario'),
      plan: usuarioBackend?.plan || data.plan || "Gratuito",
      token: token,
      cursosComprados: usuarioBackend?.cursosComprados || data.cursosComprados || [],
      timestamp: Date.now()
    };

    estado.usuario = usuario;
    estado.cursosComprados = usuario.cursosComprados || [];

    // ✅ ACTUALIZAR DROPDOWN DEL PERFIL
        actualizarPerfilDropdown();

    reinicializarEstadoVisualCursos();

    if (rememberMe) {
      localStorage.setItem('usuarioSesion', JSON.stringify(usuario));
    } else {
      sessionStorage.setItem('usuarioSesion', JSON.stringify(usuario));
    }

    if (token) localStorage.setItem('authToken', token);

    mostrarNotificacion('¡Sesión iniciada!', 'success');

    // Pequeño delay para que se vea la notificación
    setTimeout(() => {
      location.reload();
    }, 800);

  } catch (error) {
    console.error('Error en login:', error);

    let mensajeError = 'Error al iniciar sesión';

    if (error.message.includes('credenciales') || error.message.includes('contraseña')) {
      mensajeError = 'Credenciales incorrectas';
    } else if (error.message.includes('Network')) {
      mensajeError = 'Error de conexión';
    } else {
      mensajeError = `${error.message}`;
    }

    mostrarNotificacion(mensajeError, 'error');

  } finally {
    // 👉 Reactivar el botón
    btn.disabled = false;
    btn.classList.remove('loading');
  }
}

function reinicializarEstadoVisualCursos() {
    resetearBotonesCursos();        // Limpia el DOM
    inicializarBotonesEstado();     // Aplica compras del usuario actual
    inicializarCursosMarcados();    // Aplica checks del usuario actual
}


async function registrarse() {
    const nombre = document.getElementById('regNombre')?.value;
    const email = document.getElementById('regEmail')?.value;
    const password = document.getElementById('regPassword')?.value;
    const confirmPassword = document.getElementById('regConfirmPassword')?.value;
    const acceptTerms = document.getElementById('acceptTerms')?.checked;
    
    // Obtener elementos padre para marcar errores
    const nombreGroup = document.getElementById('regNombre')?.closest('.input-group');
    const emailGroup = document.getElementById('regEmail')?.closest('.input-group');
    const passwordGroup = document.getElementById('regPassword')?.closest('.input-group');
    const confirmPasswordGroup = document.getElementById('regConfirmPassword')?.closest('.input-group');
    
    // IMPORTANTE: Buscar el label correcto del checkbox de términos
    // Buscar dentro del formulario de registro específicamente
    const acceptTermsCheckbox = document.getElementById('acceptTerms');
    const termsLabel = acceptTermsCheckbox ? acceptTermsCheckbox.closest('.checkbox') : null;
    
    // Limpiar errores anteriores
    limpiarErrores();
    
    let hayErrores = false;
    
    // Validar nombre
    if (!nombre) {
        marcarError(nombreGroup, 'El nombre es requerido');
        hayErrores = true;
    }
    
    // Validar email
    if (!email) {
        marcarError(emailGroup, 'El email es requerido');
        hayErrores = true;
    } else if (!validarEmail(email)) {
        marcarError(emailGroup, 'Email inválido');
        hayErrores = true;
    }
    
    // Validar contraseña
    if (!password) {
        marcarError(passwordGroup, 'La contraseña es requerida');
        hayErrores = true;
    } else if (password.length < 8) {
        marcarError(passwordGroup, 'Mínimo 8 caracteres');
        hayErrores = true;
    }
    
    // Validar confirmación de contraseña
    if (!confirmPassword) {
        marcarError(confirmPasswordGroup, 'Confirma tu contraseña');
        hayErrores = true;
    } else if (password !== confirmPassword) {
        marcarError(confirmPasswordGroup, 'Las contraseñas no coinciden');
        hayErrores = true;
    }
    
    // Validar términos - SOLO si encontramos el label correcto
    if (!acceptTerms && termsLabel) {
        termsLabel.classList.add('error');
        hayErrores = true;
    }
    
    // Si hay errores, mostrar notificación y salir
    if (hayErrores) {
        mostrarNotificacion('Por favor, corrige los errores en el formulario');
        return;
    }
    
    // Crear botón de registro dinámicamente si no existe
    const registroBtn = document.querySelector('#formRegistro .login-submit-btn') || 
                       (() => {
                           const btn = document.createElement('button');
                           btn.className = 'login-submit-btn';
                           btn.id = 'registroBtn';
                           btn.innerHTML = '<span>Registrarse</span>';
                           return btn;
                       })();
    
    // Estado loading
    registroBtn.disabled = true;
    registroBtn.classList.add('loading');
    
    try {
        mostrarNotificacion('Creando cuenta...', 'info');
        
        const datosRegistro = {
            nombre: nombre.trim(),
            email: email.toLowerCase().trim(),
            password: password,
        };
        
        const respuesta = await fetch('https://backend-cursos-eepp.onrender.com/api/auth/registro', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
            body: JSON.stringify(datosRegistro)
        });
        
        let datos;
        try {
            datos = await respuesta.json();
        } catch (parseError) {
            throw new Error('Respuesta inválida del servidor');
        }
        
        if (!respuesta.ok) {
            if (respuesta.status === 400) {
                throw new Error(datos.message || 'Datos inválidos');
            } else if (respuesta.status === 409) {
                throw new Error('Email ya registrado');
            } else {
                throw new Error(datos.message || datos.error || `Error ${respuesta.status}`);
            }
        }
        
        // Registrar exitoso - NO hacer login automático
        mostrarNotificacion('¡Cuenta creada exitosamente!', 'success');
        
        // Limpiar formulario
        limpiarFormularios();
        
        // Cambiar a pestaña de login
        setTimeout(() => {
            mostrarTab('login');
            mostrarNotificacion('Ahora puedes iniciar sesión con tus credenciales', 'info');
        }, 1500);
        
    } catch (error) {
        console.error('Error en registro:', error);
        let mensajeError = 'Error al crear cuenta';
        
        if (error.message.includes('ya está registrado') || error.message.includes('409')) {
            mensajeError = 'Email ya registrado. ¿Iniciar sesión?';
            marcarError(emailGroup, 'Email ya registrado');
        } else if (error.message.includes('contraseña')) {
            mensajeError = 'Contraseña no cumple requisitos';
        } else if (error.message.includes('network')) {
            mensajeError = 'Error de conexión';
        } else {
            mensajeError = `${error.message}`;
        }
        
        mostrarNotificacion(mensajeError, 'error');
    } finally {
        // Quitar estado loading
        registroBtn.disabled = false;
        registroBtn.classList.remove('loading');
    }
}
function inicializarValidacionEnTiempoReal() {
    // Validación en tiempo real para email
    const emailInput = document.getElementById('regEmail');
    if (emailInput) {
        emailInput.addEventListener('input', function() {
            const grupo = this.closest('.input-group');
            if (grupo) {
                if (this.value.trim() && !validarEmail(this.value.trim())) {
                    grupo.classList.add('error');
                } else {
                    grupo.classList.remove('error');
                }
            }
        });
    }
    
    // Validación en tiempo real para confirmación de contraseña
    const passwordInput = document.getElementById('regPassword');
    const confirmPasswordInput = document.getElementById('regConfirmPassword');
    
    if (passwordInput && confirmPasswordInput) {
        confirmPasswordInput.addEventListener('input', function() {
            const grupo = this.closest('.input-group');
            if (grupo && passwordInput.value && this.value && passwordInput.value !== this.value) {
                grupo.classList.add('error');
            } else if (grupo) {
                grupo.classList.remove('error');
            }
        });
    }
    
    // Limpiar error al enfocar un campo
    document.querySelectorAll('.input-group input').forEach(input => {
        input.addEventListener('focus', function() {
            const grupo = this.closest('.input-group');
            if (grupo) grupo.classList.remove('error');
        });
    });
    
    // Limpiar error del checkbox al hacer clic
    // ENCONTRAR EL CHECKBOX CORRECTO dentro del formulario de registro
    const acceptTermsCheckbox = document.getElementById('acceptTerms');
    const termsLabel = acceptTermsCheckbox ? acceptTermsCheckbox.closest('.checkbox') : null;
    
    if (acceptTermsCheckbox && termsLabel) {
        acceptTermsCheckbox.addEventListener('change', function() {
            if (this.checked) {
                termsLabel.classList.remove('error');
            }
        });
    }
}


async function cargarPerfilUsuario(token) {
    try {
        const respuesta = await fetch('https://backend-cursos-eepp.onrender.com/api/auth/perfil', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`,
                'Accept': 'application/json'
            }
        });
        
        if (respuesta.ok) {
            const perfil = await respuesta.json();
            if (perfil && estado.usuario) {
                estado.usuario = { ...estado.usuario, ...perfil };
                localStorage.setItem('usuarioSesion', JSON.stringify(estado.usuario));
                actualizarInterfazSesion(true);
            }
        }
    } catch (error) {
        console.error('Error cargando perfil:', error);
    }
}

// ===========================
// 5. FUNCIONES DE INTERFAZ DE USUARIO
// ===========================
function actualizarInterfazSesion(conSesion) {
    console.log("🎨 Actualizando interfaz de sesión:", conSesion);
    
    const avatarBtn = document.getElementById('perfil-btn');
    const mainContent = document.querySelector('.all-container');
    const loginPage = document.getElementById('loginPage');
    
    if (avatarBtn) {
        if (conSesion) {
            avatarBtn.className = 'perfil-avatar-btn con-sesion';
            avatarBtn.textContent = estado.usuario.iniciales || 'US';
            
            // ✅ ACTUALIZAR DROPDOWN DEL PERFIL
            setTimeout(() => {
                actualizarPerfilDropdown();
            }, 100);
            
        } else {
            avatarBtn.className = 'perfil-avatar-btn sin-sesion';
            avatarBtn.textContent = '';
        }
    }
    
    if (conSesion) {
        if (mainContent) mainContent.style.display = 'block';
        if (loginPage) loginPage.style.display = 'none';
        
        setTimeout(() => {
            inicializarBotonesEstado();
            inicializarCursosMarcados();
            inicializarEventListeners();
            cambiarModo('todos');
            inicializarEtiquetasClicables();
            inicializarModal();
            
            // ✅ Asegurar que el dropdown también se actualice
            actualizarPerfilDropdown();
        }, 100);
    } else {
        // SIEMPRE mostrar login y resetear formularios
        if (mainContent) mainContent.style.display = 'none';
        if (loginPage) loginPage.style.display = 'flex';
        
        // Forzar que se muestre el formulario de login
        mostrarTab('login');
        
        // Limpiar campos del formulario
        limpiarFormularios();
    }
}

function limpiarFormularios() {
    // Limpiar errores visuales
    limpiarErrores();
    
    // Limpiar formulario de login
    const loginEmail = document.getElementById('loginEmail');
    const loginPassword = document.getElementById('loginPassword');
    const rememberMe = document.getElementById('rememberMe');
    
    if (loginEmail) loginEmail.value = '';
    if (loginPassword) loginPassword.value = '';
    if (rememberMe) rememberMe.checked = false;
    
    // Limpiar formulario de registro
    const regNombre = document.getElementById('regNombre');
    const regEmail = document.getElementById('regEmail');
    const regPassword = document.getElementById('regPassword');
    const regConfirmPassword = document.getElementById('regConfirmPassword');
    const acceptTerms = document.getElementById('acceptTerms');
    
    if (regNombre) regNombre.value = '';
    if (regEmail) regEmail.value = '';
    if (regPassword) regPassword.value = '';
    if (regConfirmPassword) regConfirmPassword.value = '';
    if (acceptTerms) acceptTerms.checked = false;
    
    // Asegurar que está en modo login
    const loginForm = document.getElementById('formLogin');
    const registroForm = document.getElementById('formRegistro');
    
    if (loginForm) loginForm.classList.add('active');
    if (registroForm) registroForm.classList.remove('active');
    
    // Actualizar el panel lateral
    const panelTitle = document.getElementById('panelTitle');
    const panelSubtitle = document.getElementById('panelSubtitle');
    const toggleBtn = document.getElementById('toggleFormBtn');
    
    if (panelTitle) panelTitle.textContent = '¿No tienes una cuenta?';
    if (panelSubtitle) panelSubtitle.textContent = 'Únete a nuestra comunidad y accede a todos los cursos';
    if (toggleBtn) {
        toggleBtn.innerHTML = 'Registrarse <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8H13M13 8L9 12M13 8L9 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
    }
    
    // Resetear variable global
    isLoginForm = true;
}

function mostrarLogin() {
    const loginPage = document.getElementById('loginPage');
    const mainContent = document.querySelector('.all-container');

    if (!estado.usuario) {
        if (loginPage) loginPage.style.display = 'flex';
        if (mainContent) mainContent.style.display = 'none';
        
        // SIEMPRE mostrar login y limpiar
        mostrarTab('login');
        limpiarFormularios();
    } else {
        if (loginPage) loginPage.style.display = 'none';
        if (mainContent) mainContent.style.display = 'block';
    }
}

function ocultarLogin() {
    const loginPage = document.getElementById('loginPage');
    const mainContent = document.querySelector('.all-container');
    
    if (loginPage) loginPage.style.display = 'none';
    if (mainContent) mainContent.style.display = 'block';
}

function cerrarLogin() {
    const loginPage = document.getElementById('loginPage');
    const mainContent = document.querySelector('.all-container');

    if (loginPage) loginPage.style.display = 'none';
    if (mainContent) mainContent.style.display = 'block';

    if (!estado.usuario) {
        configurarModoInvitado();
    }
}

function configurarModoInvitado() {
    console.log("Configurando modo invitado...");
    
    if (estado.usuario) {
        console.log("No debería configurar modo invitado con usuario activo");
        return;
    }
    
    estado.usuario = null;
    estado.cursosComprados = [];
    
    setTimeout(() => {
        document.querySelectorAll('.btn-comprar:not(.comprado)').forEach(boton => {
            if (!boton.classList.contains('comprado')) {
                boton.innerHTML = '<span>Inicia sesión para comprar</span>';
                boton.style.opacity = '0.7';
                boton.style.cursor = 'pointer';
                boton.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    mostrarLogin();
                    mostrarTab('login');
                    mostrarNotificacion('Inicia sesión para comprar cursos');
                };
            }
        });
        
        const btnMisCursos = document.getElementById('btnMisCursos');
        if (btnMisCursos) {
            btnMisCursos.disabled = false;
            btnMisCursos.style.opacity = '1';
            btnMisCursos.style.cursor = 'pointer';
            btnMisCursos.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                mostrarLogin();
                mostrarTab('login');
                mostrarNotificacion('Inicia sesión para ver tus cursos');
            };
        }
        
        const avatarBtn = document.getElementById('perfil-btn');
        if (avatarBtn) {
            avatarBtn.className = 'perfil-avatar-btn sin-sesion';
            avatarBtn.textContent = '';
            avatarBtn.title = 'Inicia sesión para acceder a tu perfil';
            avatarBtn.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                mostrarLogin();
                mostrarTab('login');
                mostrarNotificacion('Inicia sesión para acceder a tu perfil');
            };
        }
        
        const miscursosHeaderBtn = document.querySelector('.miscursos-btn');
        if (miscursosHeaderBtn) {
            miscursosHeaderBtn.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                mostrarLogin();
                mostrarTab('login');
                mostrarNotificacion('Inicia sesión para ver tus cursos');
            };
        }
        
        console.log("Modo invitado configurado");
    }, 500);
}

function cambiarModo(modo) {
    estado.modo = modo;
    const btnTodos = document.getElementById('btnTodos');
    const btnMisCursos = document.getElementById('btnMisCursos');
    const todosCursos = document.getElementById('todosCursos');
    const misCursos = document.getElementById('misCursos');
    const filtrosContainer = document.getElementById('filtrosContainer');
    const misCursosControls = document.getElementById('misCursosControls');

    if (modo === 'todos') {
        if (btnTodos) btnTodos.classList.add('activo');
        if (btnMisCursos) btnMisCursos.classList.remove('activo');
        if (todosCursos) todosCursos.style.display = 'grid';
        if (misCursos) misCursos.style.display = 'none';
        if (filtrosContainer) filtrosContainer.style.display = 'flex';
        if (misCursosControls) misCursosControls.style.display = 'none';

        aplicarFiltro('todos', 'todos');
        setTimeout(() => inicializarEtiquetasClicables(), 100);

    } else {
        if (btnTodos) btnTodos.classList.remove('activo');
        if (btnMisCursos) btnMisCursos.classList.add('activo');
        if (todosCursos) todosCursos.style.display = 'none';
        if (misCursos) misCursos.style.display = 'grid';
        if (filtrosContainer) filtrosContainer.style.display = 'none';
        if (misCursosControls) misCursosControls.style.display = 'flex';

        actualizarMisCursos();
        aplicarFiltro('todos', 'mis');
        setTimeout(() => inicializarEtiquetasClicables(), 100);

        const toggleOcultar = document.getElementById('ocultarCompletados');
        if (toggleOcultar && toggleOcultar.checked) {
            ocultarCursosMarcados(true);
        }
    }
}

function aplicarFiltro(filtro, modo) {
    const filtroNorm = filtro.toLowerCase();

    const selectorBtns = modo === 'mis' ? '.filtro-btn-mis' : '.filtro-btn';
    document.querySelectorAll(selectorBtns).forEach(btn => {
        const btnFiltro = btn.dataset.filtro?.toLowerCase();
        if (btnFiltro === filtroNorm) {
            btn.classList.add('activo');
        } else {
            btn.classList.remove('activo');
        }
    });

    document.querySelectorAll('.mis-curso-categoria.filtro-anio').forEach(etiqueta => {
        const etiquetaAnio = etiqueta.dataset.anio;
        if (etiquetaAnio === filtroNorm) {
            etiqueta.classList.add('filtro-activo');
        } else {
            etiqueta.classList.remove('filtro-activo');
        }
    });

    const selectorCursos = modo === 'mis' ? '#misCursos .mis-curso-card' : '#todosCursos .mis-curso-card';
    const cursos = document.querySelectorAll(selectorCursos);

    cursos.forEach(curso => {
        const categoriaElement = curso.querySelector('.mis-curso-categoria');
        if (!categoriaElement) return;

        const categoria = categoriaElement.textContent.toLowerCase();
        let mostrar = false;

        if (filtroNorm === 'todos') {
            mostrar = true;
        } else if (filtroNorm === 'primero' && categoria === 'primer año') {
            mostrar = true;
        } else if (filtroNorm === 'segundo' && categoria === 'segundo año') {
            mostrar = true;
        } else if (filtroNorm === 'tercero' && categoria === 'tercer año') {
            mostrar = true;
        } else if (filtroNorm === 'cuarto' && categoria === 'cuarto año') {
            mostrar = true;
        }

        if (mostrar && modo === 'todos') {
            const toggleComprados = document.getElementById('ocultarComprados');
            if (toggleComprados && toggleComprados.checked) {
                const botonComprar = curso.querySelector('.btn-comprar');
                const estaComprado = botonComprar && botonComprar.classList.contains('comprado');
                if (estaComprado) {
                    mostrar = false;
                }
            }
        }

        curso.style.display = mostrar ? 'flex' : 'none';
    });
}

function inicializarEtiquetasClicables() {
    document.querySelectorAll('.mis-curso-categoria.filtro-anio').forEach(etiqueta => {
        const nuevaEtiqueta = etiqueta.cloneNode(true);
        etiqueta.parentNode.replaceChild(nuevaEtiqueta, etiqueta);
        
        nuevaEtiqueta.addEventListener('click', function(e) {
            e.stopPropagation();
            const anio = this.dataset.anio;
            if (anio) {
                filtrarPorEtiqueta(anio);
            }
        });

        nuevaEtiqueta.title = `Filtrar por ${nuevaEtiqueta.textContent}`;
        nuevaEtiqueta.style.cursor = 'pointer';
    });
}

function filtrarPorEtiqueta(anio) {
    const modoActual = estado.modo;

    if (modoActual === 'todos') {
        const botonFiltro = document.querySelector(`.filtro-btn[data-filtro="${anio}"]`);
        if (botonFiltro) {
            botonFiltro.click();
        }
    } else if (modoActual === 'mis') {
        const botonFiltro = document.querySelector(`.filtro-btn-mis[data-filtro="${anio}"]`);
        if (botonFiltro) {
            botonFiltro.click();
        }
    }

    const nombresAnio = {
        'primero': 'Primer año',
        'segundo': 'Segundo año',
        'tercero': 'Tercer año',
        'cuarto': 'Cuarto año'
    };

    mostrarNotificacion(`Filtrado por: ${nombresAnio[anio] || anio}`);
}

function verDetallesCurso(idCurso) {
    const curso = obtenerCursoPorId(idCurso);
    if (!curso) {
        mostrarNotificacion('Curso no encontrado');
        return;
    }

    const modal = document.getElementById('modalDetalles');
    const modalTitulo = document.getElementById('modalTitulo');
    const modalCategoria = document.getElementById('modalCategoria');
    const modalDescripcion = document.getElementById('modalDescripcion');

    if (modal && modalTitulo) {
        modalTitulo.textContent = curso.titulo;
        modalCategoria.textContent = `${curso.categoria} • ${curso.precio || 'Gratis'}`;
        modalDescripcion.textContent = curso.desc || curso.descripcion || 'Sin descripción';
        modal.style.display = 'flex';

        const modalPrograma = document.getElementById('modalPrograma');
        if (modalPrograma) {
            const programas = {
                1: ['Límites y continuidad', 'Derivadas y aplicaciones', 'Integrales definidas', 'Aplicaciones del cálculo'],
                2: ['Matrices y determinantes', 'Espacios vectoriales', 'Sistemas de ecuaciones', 'Transformaciones lineales'],
                3: ['Cinemática', 'Dinámica', 'Trabajo y energía', 'Cantidad de movimiento'],
                4: ['Estadística descriptiva', 'Probabilidad', 'Variables aleatorias', 'Estimación de parámetros'],
                5: ['Ondas mecánicas', 'Ondas acústicas', 'Ondas electromagnéticas', 'Principio de superposición'],
                6: ['Fundamentos de programación', 'Algoritmos básicos', 'Estructuras de datos', 'Sistemas informáticos']
            };

            const idNum = parseInt(curso.id) || 1;
            modalPrograma.innerHTML = (programas[idNum] || ['Contenido del curso']).map(item => `<li>${item}</li>`).join('');
        }
    }
}

function verCurso(idCurso) {
    const curso = obtenerCursoPorId(idCurso);
    if (!curso) {
        mostrarNotificacion('Curso no encontrado');
        return;
    }

    // Obtener el contenido del curso
    const contenido = cursoContenido[idCurso] || {};
    
    // Verificar si tiene enlace específico
    if (contenido.enlaceCurso && contenido.enlaceCurso !== "#") {
        mostrarNotificacion(`Accediendo a: ${curso.titulo}`, 'info');
        setTimeout(() => {
            window.open(contenido.enlaceCurso, '_blank');
        }, 300);
        return;
    }

    // Para cursos sin enlace específico
    mostrarNotificacion(`Accediendo a: ${curso.titulo}`);
    console.log(`Accediendo al curso ${idCurso}: ${curso.titulo}`);
}

function accederAlCurso(idCurso) {
    const curso = obtenerCursoPorId(idCurso);
    if (!curso) {
        mostrarNotificacion('Curso no encontrado');
        return;
    }

    // Obtener el contenido del curso
    const contenido = cursoContenido[idCurso] || {};
    
    // Verificar si tiene enlace específico
    if (contenido.enlaceCurso && contenido.enlaceCurso !== "#") {
        mostrarNotificacion(`Accediendo a: ${curso.titulo}`, 'info');
        setTimeout(() => {
            window.open(contenido.enlaceCurso, '_blank');
        }, 300);
        return;
    }

    // Para cursos sin enlace específico
    mostrarNotificacion(`Accediendo a: ${curso.titulo}`);
}

function inicializarModal() {
    const cerrarModal = document.getElementById('cerrarModal');
    const modal = document.getElementById('modalDetalles');

    if (cerrarModal && modal) {
        cerrarModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'flex') {
                modal.style.display = 'none';
            }
        });
    }
}

// ===========================
// 6. FUNCIONES DE CURSOS Y COMPRAS
// ===========================
async function comprarCurso(idCurso) {
    if (!estado.usuario || !estado.usuario.token) {
        mostrarNotificacion('Inicia sesión para comprar cursos');
        mostrarLogin();
        return;
    }
    
    const curso = obtenerCursoPorId(idCurso);
    if (!curso) {
        mostrarNotificacion('Curso no encontrado');
        return;
    }
    
    const botonComprar = document.querySelector(`.btn-comprar[onclick="comprarCurso(${idCurso})"]`);
    const botonInfo = document.querySelector(`.btn-info[onclick="verDetallesCurso(${idCurso})"]`);
    
    if (!botonComprar || estado.cursosComprados.includes(curso._id)) return;
    
    botonComprar.classList.add('cargando');
    botonComprar.innerHTML = '<span>Procesando...</span>';
    
    try {
        const mongoId = curso._id;
        
        const response = await fetch('https://backend-cursos-eepp.onrender.com/api/auth/agregar-curso', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${estado.usuario.token}`
            },
            body: JSON.stringify({ 
                cursoId: mongoId,
                usuarioId: estado.usuario.id
            })
        });
        
        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            const text = await response.text();
            console.error('Respuesta no JSON:', text.substring(0, 200));
            throw new Error('Respuesta inválida del servidor');
        }
        
        const data = await response.json();
        
        if (!response.ok) {
            if (response.status === 401) {
                mostrarNotificacion('Tu sesión ha expirado, inicia sesión nuevamente', 'error');
                cerrarSesion();
                mostrarLogin();
                return;
            }
            throw new Error(data.error || data.message || `Error ${response.status}: ${response.statusText}`);
        }
        
        if (!data.success) {
            throw new Error(data.error || data.message || 'Error al comprar el curso');
        }
        
        estado.cursosComprados.push(mongoId);
        if (estado.usuario) {
            estado.usuario.cursosComprados = estado.cursosComprados;
            if (localStorage.getItem('usuarioSesion')) {
                localStorage.setItem('usuarioSesion', JSON.stringify(estado.usuario));
            }
            if (sessionStorage.getItem('usuarioSesion')) {
                sessionStorage.setItem('usuarioSesion', JSON.stringify(estado.usuario));
            }
        }
        
        botonComprar.classList.remove('cargando');
        botonComprar.classList.add('comprado');
        botonComprar.innerHTML = '<span>Comprado</span>';
        botonComprar.disabled = true;
        botonComprar.removeAttribute('onclick');
        
        if (botonInfo) {
            botonInfo.classList.add('comprado');
            botonInfo.innerHTML = '<span>Ver curso</span>';
            botonInfo.setAttribute('onclick', `verCurso(${idCurso})`);
        }
        
        mostrarNotificacion('Curso añadido a "Mis cursos"', 'success');
        
        setTimeout(() => {
            if (typeof cargarListaCursosDropdown === 'function') cargarListaCursosDropdown();
        }, 500);
        
    } catch (error) {
        console.error('Error en comprarCurso:', error);
        botonComprar.classList.remove('cargando');
        botonComprar.innerHTML = '<span>Comprar</span>';
        
        let mensajeError = 'Error al comprar el curso';
        
        if (error.message.includes('401') || error.message.includes('Unauthorized')) {
            mensajeError = 'Tu sesión ha expirado, inicia sesión nuevamente';
            cerrarSesion();
            mostrarLogin();
        } else if (error.message.includes('Network') || error.message.includes('Failed to fetch')) {
            mensajeError = 'Error de conexión. Verifica tu internet';
        } else if (error.message.includes('JSON')) {
            mensajeError = 'Error en el servidor. Intenta más tarde';
        } else {
            mensajeError = `${error.message}`;
        }
        
        mostrarNotificacion(mensajeError, 'error');
    }
}

function actualizarMisCursos() {
    const misCursos = document.getElementById('misCursos');
    if (!misCursos) return;

    if (estado.cursosComprados.length === 0) {
        misCursos.innerHTML = `
            <div class='empty-state'>
                <h3>Aún no tienes cursos</h3>
                <p>Explora nuestro catálogo y adquiere tu primer curso para comenzar tu aprendizaje.</p>
                <a class='empty-state-btn' href='#' onclick='cambiarModo("todos")'>Explorar cursos</a>
            </div>
        `;
        return;
    }

    let html = '';
    const cursosMarcados = JSON.parse(localStorage.getItem(getCursosMarcadosKey()) || '[]');

    estado.cursosComprados.forEach(mongoId => {
        const curso = obtenerCursoPorId(mongoId);
        if (!curso) return;

        const idNumero = curso.id || mongoId;
        const estaMarcado = cursosMarcados.includes(idNumero.toString()) || cursosMarcados.includes(idNumero);
        
        const categoria = curso.categoria || 'Sin categoría';
        const textoAnio = categoria;
        let dataAnio = '';
        
        if (categoria.includes('Primer')) {
            dataAnio = 'primero';
        } else if (categoria.includes('Segundo')) {
            dataAnio = 'segundo';
        } else if (categoria.includes('Tercer')) {
            dataAnio = 'tercero';
        } else if (categoria.includes('Cuarto')) {
            dataAnio = 'cuarto';
        } else {
            dataAnio = 'primero';
        }

        html += `
            <div class='mis-curso-card' data-curso-id='${idNumero}' data-mongo-id='${mongoId}' data-anio='${dataAnio}'>
                <div class='curso-check-container'>
                    <div class='curso-check ${estaMarcado ? 'checked' : ''}' 
                         onclick='toggleMarcarCurso(${idNumero})'
                         title='${estaMarcado ? 'Desmarcar curso' : 'Marcar como completado'}'>
                    </div>
                </div>

                <div class='mis-curso-categoria filtro-anio' data-anio='${dataAnio}'>${textoAnio}</div>
                <div class='mis-curso-header'>
                    <span class='mis-curso-titulo'>${curso.titulo}</span>
                </div>

                <div class='mis-curso-desc'>${curso.desc || curso.descripcion || 'Sin descripción'}</div>

                <div class='btn-entrar-container'>
                    <button class='btn-entrar-curso' 
                            onclick='accederAlCurso(${idNumero})'>
                        <span>Acceder al curso</span>
                    </button>
                </div>
            </div>
        `;
    });

    misCursos.innerHTML = html;
    inicializarFiltrosMisCursos();
}

function inicializarFiltrosMisCursos() {
    const filtros = document.querySelectorAll('#misCursos .filtro-btn-mis');
    
    filtros.forEach(btn => {
        btn.addEventListener('click', function() {
            const filtro = this.dataset.filtro;
            aplicarFiltro(filtro, 'mis');
        });
    });
    
    inicializarEtiquetasClicables();
}

function inicializarBotonesEstado() {
    estado.cursosComprados.forEach(mongoId => {
        const curso = obtenerCursoPorId(mongoId);
        if (!curso) return;

        const idNum = curso.id;
        if (!idNum) return;

        const botonComprar = document.querySelector(`.btn-comprar[onclick="comprarCurso(${idNum})"]`);
        const botonInfo = document.querySelector(`.btn-info[onclick="verDetallesCurso(${idNum})"]`);

        if (botonComprar) {
            botonComprar.classList.add('comprado');
            botonComprar.innerHTML = '<span>Comprado</span>';
            botonComprar.disabled = true;
            botonComprar.removeAttribute('onclick');
        }

        if (botonInfo) {
            botonInfo.classList.add('comprado');
            botonInfo.innerHTML = '<span>Ver curso</span>';
            botonInfo.setAttribute('onclick', `verCurso(${idNum})`);
        }
    });
}

function inicializarCursosMarcados() {
    const cursosMarcados = JSON.parse(localStorage.getItem(getCursosMarcadosKey()) || '[]');

    if (estado.modo === 'mis') {
        cursosMarcados.forEach(idCurso => {
            const idStr = idCurso.toString();
            const checkElement = document.querySelector(`.mis-curso-card[data-curso-id="${idStr}"] .curso-check`);
            if (checkElement) {
                checkElement.classList.add('checked');
            }
        });
    }
}

function ocultarCursosMarcados(ocultar) {
    const cursos = document.querySelectorAll('#misCursos .mis-curso-card');
    const cursosMarcados = JSON.parse(localStorage.getItem(getCursosMarcadosKey()) || '[]');

    cursos.forEach(curso => {
        const cursoId = curso.getAttribute('data-curso-id');
        const estaMarcado = cursosMarcados.includes(parseInt(cursoId)) || cursosMarcados.includes(cursoId.toString());

        if (ocultar && estaMarcado) {
            curso.style.display = 'none';
        } else {
            curso.style.display = 'flex';
        }
    });
}

function toggleMarcarCurso(idCurso) {
    const cursosMarcados = JSON.parse(localStorage.getItem(getCursosMarcadosKey()) || '[]');
    const checkElement = document.querySelector(`.mis-curso-card[data-curso-id="${idCurso}"] .curso-check`);
    const toggleOcultar = document.getElementById('ocultarCompletados');

    if (!checkElement) return;

    const idStr = idCurso.toString();
    
    if (checkElement.classList.contains('checked')) {
        checkElement.classList.remove('checked');
        const index = cursosMarcados.indexOf(idStr);
        if (index === -1) {
            const indexNum = cursosMarcados.indexOf(parseInt(idCurso));
            if (indexNum > -1) cursosMarcados.splice(indexNum, 1);
        } else {
            cursosMarcados.splice(index, 1);
        }
        mostrarNotificacion('Curso desmarcado');

        if (toggleOcultar && toggleOcultar.checked) {
            const cursoCard = checkElement.closest('.mis-curso-card');
            if (cursoCard) {
                cursoCard.style.display = 'flex';
            }
        }
    } else {
        checkElement.classList.add('checked');
        cursosMarcados.push(idStr);
        mostrarNotificacion('Curso marcado');

        if (toggleOcultar && toggleOcultar.checked) {
            const cursoCard = checkElement.closest('.mis-curso-card');
            if (cursoCard) {
                cursoCard.style.display = 'none';
            }
        }
    }

    localStorage.setItem(getCursosMarcadosKey(), JSON.stringify(cursosMarcados));
}

function getCursosMarcadosKey() {
    if (estado.usuario && estado.usuario.id) {
        return `cursosMarcados_${estado.usuario.id}`;
    }
    return 'cursosMarcados_guest';
}


// ===========================
// 7. FUNCIONES DE DROPDOWN DE CURSOS
// ===========================
function cargarListaCursosDropdown() {
    const cursosList = document.getElementById('cursos-list');
    const cursosCount = document.getElementById('cursos-count');

    if (!cursosList || !estado.cursosComprados) return;

    const cursosConContenido = estado.cursosComprados;
    cursosCount.textContent = cursosConContenido.length;

    if (cursosConContenido.length === 0) {
        cursosList.innerHTML = `
            <div class='empty-list'>
                <p>No tienes cursos comprados</p>
                <a href='javascript:hideAllDropdowns(); cambiarModo("todos")' class='btn-explorar'>
                    Explorar cursos
                </a>
            </div>
        `;
        return;
    }

    let html = '';

    cursosConContenido.forEach(mongoId => {
        const curso = obtenerCursoPorId(mongoId);
        if (!curso) return;

        const cursosMarcados = JSON.parse(
            localStorage.getItem(getCursosMarcadosKey()) || '[]'
        );
        const idNum = curso.id || mongoId;
        const completado = cursosMarcados.includes(idNum.toString()) || cursosMarcados.includes(idNum);

        const categoria = curso.categoria || 'Sin categoría';

        html += `
            <div class='curso-item' data-curso-id='${idNum}' data-mongo-id='${mongoId}'
                 onclick='seleccionarCursoDropdown("${idNum}")'>
                <div class='curso-item-header'>
                    <h4 class='curso-item-titulo'>${curso.titulo}</h4>
                </div>
                <p class='curso-item-desc'>${curso.desc || curso.descripcion || ''}</p>
                <div class='curso-item-categoria'>${categoria}</div>
            </div>
        `;
    });

    cursosList.innerHTML = html;

    if (cursosConContenido.length > 0) {
        setTimeout(() => {
            const primerCurso = cursosConContenido[0];
            const curso = obtenerCursoPorId(primerCurso);
            if (curso) {
                seleccionarCursoDropdown(curso.id || primerCurso);
            }
        }, 100);
    }
}

function cargarDetallesCursoDropdown(idCurso) {
    const curso = obtenerCursoPorId(idCurso);
    if (!curso) {
        console.warn('No se encontró el curso:', idCurso);
        return;
    }

    const idNum = parseInt(curso.id) || 1;
    const contenido = cursoContenido[idNum] || {
        titulo: curso.titulo,
        categoria: curso.categoria,
        progreso: 0,
        videos: [],
        presentaciones: [],
        ejercicios: [],
        recursos: []
    };

    const detalleContent = document.getElementById('curso-detalle-content');
    const placeholder = document.querySelector('.detalle-placeholder');

    if (detalleContent) detalleContent.style.display = 'block';
    if (placeholder) placeholder.style.display = 'none';

    const tituloElement = document.getElementById('detalle-titulo');
    if (tituloElement) tituloElement.textContent = contenido.titulo || curso.titulo;

    setTimeout(() => {
        cargarSeccionVideos(contenido);
        cargarSeccionPresentaciones(contenido);
        cargarSeccionEjercicios(contenido);
        cargarSeccionRecursos(contenido);

        setTimeout(() => {
            inicializarEventosSecciones();
        }, 100);
    }, 50);
}

function cargarSeccionVideos(datosCurso) {
    const videosList = document.getElementById('videos-list');
    const videosCount = document.getElementById('count-videos');
    
    if (videosList && videosCount) {
        if (datosCurso.videos && datosCurso.videos.length > 0) {
            videosCount.textContent = `${datosCurso.videos.length} videos`;
            videosList.innerHTML = datosCurso.videos.map(video => `
                <a class='contenido-item' href='${video.url}' target='_blank'>
                    <div class='item-icon video'>🎬</div>
                    <div class='item-content'>
                        <h5 class='item-titulo'>${video.titulo}</h5>
                        <p class='item-info'>${video.duracion}</p>
                    </div>
                    <div class='item-action'>Ver</div>
                </a>
            `).join('');
        } else {
            videosCount.textContent = '0 videos';
            videosList.innerHTML = `<div class='empty-section'>No hay videos disponibles aún</div>`;
        }
    }
}

function cargarSeccionPresentaciones(datosCurso) {
    const presentacionesList = document.getElementById('presentaciones-list');
    const presentacionesCount = document.getElementById('count-presentaciones');
    
    if (presentacionesList && presentacionesCount) {
        if (datosCurso.presentaciones && datosCurso.presentaciones.length > 0) {
            presentacionesCount.textContent = `${datosCurso.presentaciones.length} presentaciones`;
            presentacionesList.innerHTML = datosCurso.presentaciones.map(pres => `
                <a class='contenido-item' href='${pres.url}' target='_blank'>
                    <div class='item-icon presentacion'>📊</div>
                    <div class='item-content'>
                        <h5 class='item-titulo'>${pres.titulo}</h5>
                        <p class='item-info'>${pres.slides} slides</p>
                    </div>
                    <div class='item-action'>Abrir</div>
                </a>
            `).join('');
        } else {
            presentacionesCount.textContent = '0 presentaciones';
            presentacionesList.innerHTML = `<div class='empty-section'>No hay presentaciones disponibles aún</div>`;
        }
    }
}

function cargarSeccionEjercicios(datosCurso) {
    const ejerciciosList = document.getElementById('ejercicios-list');
    const ejerciciosCount = document.getElementById('count-ejercicios');
    
    if (ejerciciosList && ejerciciosCount) {
        if (datosCurso.ejercicios && datosCurso.ejercicios.length > 0) {
            ejerciciosCount.textContent = `${datosCurso.ejercicios.length} ejercicios`;
            ejerciciosList.innerHTML = datosCurso.ejercicios.map(ej => `
                <a class='contenido-item' href='${ej.url}' target='_blank'>
                    <div class='item-icon ejercicio'>📝</div>
                    <div class='item-content'>
                        <h5 class='item-titulo'>${ej.titulo}</h5>
                        <p class='item-info'>${ej.cantidad} problemas • ${ej.nivel}</p>
                    </div>
                    <div class='item-action'>Practicar</div>
                </a>
            `).join('');
        } else {
            ejerciciosCount.textContent = '0 ejercicios';
            ejerciciosList.innerHTML = `<div class='empty-section'>No hay ejercicios disponibles aún</div>`;
        }
    }
}

function cargarSeccionRecursos(datosCurso) {
    const recursosList = document.getElementById('recursos-list');
    
    if (recursosList) {
        if (datosCurso.recursos && datosCurso.recursos.length > 0) {
            recursosList.innerHTML = datosCurso.recursos.map(rec => `
                <a class='contenido-item' href='${rec.url}' target='_blank'>
                    <div class='item-icon recurso'>📚</div>
                    <div class='item-content'>
                        <h5 class='item-titulo'>${rec.titulo}</h5>
                        <p class='item-info'>${rec.tipo}</p>
                    </div>
                    <div class='item-action'>Descargar</div>
                </a>
            `).join('');
        } else {
            recursosList.innerHTML = `<div class='empty-section'>No hay recursos adicionales disponibles</div>`;
        }
    }
}

function inicializarEventosSecciones() {
    document.querySelectorAll('.contenido-seccion').forEach(seccion => {
        seccion.classList.remove('expanded');
        const content = seccion.querySelector('.seccion-content');
        const toggle = seccion.querySelector('.toggle-icon');
        if (content) content.style.maxHeight = '0';
        if (toggle) toggle.textContent = '+';
    });
    
    document.querySelectorAll('.seccion-header.seccion-collapsible').forEach(header => {
        const nuevoHeader = header.cloneNode(true);
        header.parentNode.replaceChild(nuevoHeader, header);
        
        nuevoHeader.addEventListener('click', function(e) {
            if (e.target.tagName === 'A' || e.target.closest('a')) return;
            
            e.stopPropagation();
            
            const seccion = this.closest('.contenido-seccion');
            const content = seccion.querySelector('.seccion-content');
            const toggle = this.querySelector('.toggle-icon');
            
            if (seccion.classList.contains('expanded')) {
                seccion.classList.remove('expanded');
                if (content) {
                    content.style.maxHeight = '0';
                }
                if (toggle) {
                    toggle.textContent = '+';
                }
            } else {
                seccion.classList.add('expanded');
                if (content) {
                    const alturaReal = content.scrollHeight;
                    content.style.maxHeight = alturaReal + 'px';
                    
                    setTimeout(() => {
                        if (seccion.classList.contains('expanded')) {
                            content.style.maxHeight = 'none';
                        }
                    }, 300);
                }
                if (toggle) {
                    toggle.textContent = '−';
                }
            }
        });
        
        nuevoHeader.style.cursor = 'pointer';
    });
}

function seleccionarCursoDropdown(idCurso) {
    document.querySelectorAll('.curso-item').forEach(item => {
        item.classList.remove('active');
    });
    
    const cursoItem = document.querySelector(`.curso-item[data-curso-id="${idCurso}"]`);
    if (cursoItem) {
        cursoItem.classList.add('active');
    }
    
    cargarDetallesCursoDropdown(idCurso);
}

function filtrarCursosDropdown(searchTerm) {
    const cursos = document.querySelectorAll('.curso-item');
    cursos.forEach(curso => {
        const titulo = curso.querySelector('.curso-item-titulo').textContent.toLowerCase();
        const desc = curso.querySelector('.curso-item-desc').textContent.toLowerCase();
        
        if (titulo.includes(searchTerm) || desc.includes(searchTerm)) {
            curso.style.display = 'block';
        } else {
            curso.style.display = 'none';
        }
    });
}

function aplicarFiltroEstado(filter) {
    const cursos = document.querySelectorAll('.curso-item');
    const cursosMarcados = JSON.parse(localStorage.getItem(getCursosMarcadosKey()) || '[]');
    
    cursos.forEach(curso => {
        const cursoId = curso.dataset.cursoId;
        const completado = cursosMarcados.includes(parseInt(cursoId)) || cursosMarcados.includes(cursoId.toString());
        
        let mostrar = true;
        
        if (filter === 'progress' && completado) {
            mostrar = false;
        } else if (filter === 'completed' && !completado) {
            mostrar = false;
        }
        
        curso.style.display = mostrar ? 'block' : 'none';
    });
}

// ===========================
// 8. FUNCIONES DE EVENTOS
// ===========================
function inicializarEventListeners() {
    const btnTodos = document.getElementById('btnTodos');
    const btnMisCursos = document.getElementById('btnMisCursos');
    
    if (btnTodos) btnTodos.addEventListener('click', () => cambiarModo('todos'));
    if (btnMisCursos) btnMisCursos.addEventListener('click', () => cambiarModo('mis'));

    document.querySelectorAll('.filtro-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            aplicarFiltro(this.dataset.filtro, 'todos');
        });
    });

    document.querySelectorAll('.filtro-btn-mis').forEach(btn => {
        btn.addEventListener('click', function() {
            aplicarFiltro(this.dataset.filtro, 'mis');
        });
    });

    const toggleOcultar = document.getElementById('ocultarCompletados');
    if (toggleOcultar) {
        toggleOcultar.addEventListener('change', function() {
            ocultarCursosMarcados(this.checked);
        });
    }

    const toggleComprados = document.getElementById('ocultarComprados');
    if (toggleComprados) {
        toggleComprados.addEventListener('change', function() {
            const filtroActivo = document.querySelector('.filtro-btn.activo')?.dataset.filtro || 'todos';
            aplicarFiltro(filtroActivo, 'todos');
        });
    }

    const cerrarModal = document.getElementById('cerrarModal');
    const modal = document.getElementById('modalDetalles');

    if (cerrarModal && modal) {
        cerrarModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    }
}

// ===========================
// 9. FUNCIONES DE LOGIN/REGISTRO UI
// ===========================
let isLoginForm = true;

function toggleForm() {
    const loginForm = document.getElementById('formLogin');
    const registroForm = document.getElementById('formRegistro');
    const panelTitle = document.getElementById('panelTitle');
    const panelSubtitle = document.getElementById('panelSubtitle');
    const toggleBtn = document.getElementById('toggleFormBtn');
    
    if (isLoginForm) {
        loginForm.classList.remove('active');
        registroForm.classList.add('active');
        panelTitle.textContent = '¿Ya tienes una cuenta?';
        panelSubtitle.textContent = 'Inicia sesión para acceder a tu cuenta';
        toggleBtn.innerHTML = 'Iniciar Sesión <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8H13M13 8L9 12M13 8L9 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
        isLoginForm = false;
    } else {
        registroForm.classList.remove('active');
        loginForm.classList.add('active');
        panelTitle.textContent = '¿No tienes una cuenta?';
        panelSubtitle.textContent = 'Únete a nuestra comunidad y accede a todos los cursos';
        toggleBtn.innerHTML = 'Registrarse <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8H13M13 8L9 12M13 8L9 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
        isLoginForm = true;
    }
}

function mostrarTab(tabName) {
    console.log(`Mostrando pestaña: ${tabName}`);
    
    // Ocultar todas las pestañas
    document.querySelectorAll('.login-form').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Mostrar la pestaña seleccionada
    const tabSeleccionado = document.getElementById(`form${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`);
    if (tabSeleccionado) {
        tabSeleccionado.classList.add('active');
    }
    
    // Actualizar el panel lateral
    const panelTitle = document.getElementById('panelTitle');
    const panelSubtitle = document.getElementById('panelSubtitle');
    const toggleBtn = document.getElementById('toggleFormBtn');
    
    if (tabName === 'login') {
        if (panelTitle) panelTitle.textContent = '¿No tienes una cuenta?';
        if (panelSubtitle) panelSubtitle.textContent = 'Únete a nuestra comunidad y accede a todos los cursos';
        if (toggleBtn) {
            toggleBtn.innerHTML = 'Registrarse <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8H13M13 8L9 12M13 8L9 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            toggleBtn.onclick = () => mostrarTab('registro');
        }
        isLoginForm = true;
    } else if (tabName === 'registro') {
        if (panelTitle) panelTitle.textContent = '¿Ya tienes una cuenta?';
        if (panelSubtitle) panelSubtitle.textContent = 'Inicia sesión para acceder a tu cuenta';
        if (toggleBtn) {
            toggleBtn.innerHTML = 'Iniciar Sesión <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8H13M13 8L9 12M13 8L9 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            toggleBtn.onclick = () => mostrarTab('login');
        }
        isLoginForm = false;
    }
}

// ===========================
// 10. FUNCIONES DE DROPDOWN MANAGEMENT
// ===========================
function inicializarDropdowns() {
    const cursosDropdown = document.getElementById('cursos-dropdown');
    const perfilDropdown = document.getElementById('perfil-dropdown');
    const cursosButton = document.querySelector('.miscursos-btn');
    const perfilButton = document.getElementById('perfil-btn');
    
    let activeDropdown = null;
    
    function showDropdown(dropdown) {
        if (activeDropdown === dropdown) return;
        
        hideAllDropdowns();
        
        if (dropdown) {
            activeDropdown = dropdown;
            
            if (dropdown.id === 'perfil-dropdown' && perfilButton) {
                const rect = perfilButton.getBoundingClientRect();
                dropdown.style.right = `${window.innerWidth - rect.right}px`;
                dropdown.style.left = 'auto';
                dropdown.style.top = `${rect.bottom + 10}px`;
            }
            
            dropdown.classList.add('active');
            document.body.classList.add('dropdown-open');
            
            if (dropdown.id === 'cursos-dropdown' && cursosButton) {
                cursosButton.classList.add('active');
            } else if (dropdown.id === 'perfil-dropdown' && perfilButton) {
                perfilButton.classList.add('active');
            }
            
            if (dropdown.id === 'cursos-dropdown') {
                cargarListaCursosDropdown();
            }
        }
    }
    
    window.hideAllDropdowns = function() {
        [cursosDropdown, perfilDropdown].forEach(dropdown => {
            if (dropdown) {
                dropdown.classList.remove('active');
                if (dropdown.id === 'perfil-dropdown') {
                    dropdown.style.right = '';
                    dropdown.style.left = '';
                    dropdown.style.top = '';
                }
            }
        });
        
        if (cursosButton) cursosButton.classList.remove('active');
        if (perfilButton) perfilButton.classList.remove('active');
        
        activeDropdown = null;
        document.body.classList.remove('dropdown-open');
    };
    
    if (cursosButton && cursosDropdown) {
        cursosButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (!estado.usuario) {
                mostrarLogin();
                mostrarTab('login');
                mostrarNotificacion('Inicia sesión para ver tus cursos');
                return;
            }
            
            if (cursosDropdown.classList.contains('active')) {
                hideAllDropdowns();
            } else {
                showDropdown(cursosDropdown);
            }
        });
    }
    
    if (perfilButton && perfilDropdown) {
        perfilButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (!estado.usuario) {
                mostrarLogin();
                return;
            }
            
            if (perfilDropdown.classList.contains('active')) {
                hideAllDropdowns();
            } else {
                showDropdown(perfilDropdown);
            }
        });
    }
    
    document.addEventListener('click', function(e) {
        if (activeDropdown) {
            const isClickInsideDropdown = activeDropdown.contains(e.target);
            const isClickOnButton = 
                (cursosButton && cursosButton.contains(e.target)) || 
                (perfilButton && perfilButton.contains(e.target));
            
            if (!isClickInsideDropdown && !isClickOnButton) {
                hideAllDropdowns();
            }
        }
    });
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && activeDropdown) {
            hideAllDropdowns();
        }
    });
    
    window.addEventListener('scroll', function() {
        if (activeDropdown && activeDropdown.id === 'perfil-dropdown') {
            hideAllDropdowns();
        }
    });
    
    const searchInput = document.getElementById('search-cursos');
    if (searchInput) {
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            filtrarCursosDropdown(searchTerm);
        });
    }
    
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const filter = this.dataset.filter;
            aplicarFiltroEstado(filter);
        });
    });
}

// ===========================
// 11. FUNCIÓN DE INICIALIZACIÓN PRINCIPAL
// ===========================
// LUEGO MODIFICA inicializarAplicacion para usar await:
let inicializacionEnCurso = false;
async function inicializarAplicacion() {

    // Primero verificar si hay token en la URL - ahora con await
    const tieneToken = await verificarTokenURL(); // AWAIT aquí
    if (tieneToken) {
        console.log("🔄 Token de verificación encontrado, procesando...");
        return; // No continuar con inicialización normal
    }

    // Evitar múltiples inicializaciones simultáneas
    if (inicializacionEnCurso) {
        console.log("⚠️ Inicialización ya en curso, omitiendo...");
        return;
    }
    
    inicializacionEnCurso = true;
    console.log("🔄 Inicializando aplicación normal...");
    mostrarNotificacion('Cargando...', 'info');
    
    try {
        // Paso 1: Cargar cursos
        await cargarCursos();
        console.log("✅ Cursos cargados");
        
        // Paso 2: Inicializar validación en tiempo real
        inicializarValidacionEnTiempoReal();
        console.log("✅ Validación en tiempo real inicializada");

        // Paso 3: Verificar sesión
        const tieneSesion = verificarSesion();
        console.log("✅ Sesión verificada:", tieneSesion);
        
        // Paso 4: Configurar según sesión
        if (!tieneSesion) {
            console.log("👤 Modo invitado activado");
            configurarModoInvitado();
            mostrarLogin();
        } else {
            console.log("👤 Usuario autenticado:", estado.usuario?.nombre);
            inicializarInterfazUsuarioAutenticado();
        }
        
        // Paso 5: Actualizar interfaz
        actualizarInterfazSesion(tieneSesion);
        inicializarDropdowns();
        
        // Notificación final
        mostrarNotificacion('Aplicación cargada', 'success');
        
    } catch (error) {
        console.error('❌ Error en inicialización:', error);
        mostrarNotificacion('Error al cargar la aplicación', 'error');
        
        // Fallback a modo invitado
        configurarModoInvitado();
        mostrarLogin();
    } finally {
        inicializacionEnCurso = false;
    }
}

function inicializarInterfazUsuarioAutenticado() {
    console.log("🎯 Inicializando interfaz para usuario autenticado...");

    // 1️⃣ Estado SIEMPRE limpio
    estado.cursosComprados = estado.usuario?.cursosComprados || [];

    // 2️⃣ DOM SIEMPRE limpio
    resetearBotonesCursos();

    // 3️⃣ Inicialización síncrona y ordenada
    inicializarBotonesEstado();
    inicializarCursosMarcados();
    inicializarEventListeners();
    inicializarEtiquetasClicables();
    inicializarModal();
    ocultarLogin();

    // 4️⃣ UI
    cambiarModo('todos');

    if (document.getElementById('cursos-dropdown')) {
        cargarListaCursosDropdown();
    }

    console.log("✅ Interfaz de usuario autenticado inicializada");
}



function resetearBotonesCursos() {
    document.querySelectorAll('.btn-comprar').forEach(btn => {
        btn.classList.remove('comprado', 'cargando');
        btn.disabled = false;
        btn.innerHTML = '<span>Comprar</span>';

        const onclickAttr = btn.getAttribute('onclick');
        if (!onclickAttr) {
            const cursoId = btn.dataset.cursoId;
            if (cursoId) {
                btn.setAttribute('onclick', `comprarCurso(${cursoId})`);
            }
        }
    });

    document.querySelectorAll('.btn-info').forEach(btn => {
        btn.classList.remove('comprado');
        const cursoId = btn.dataset.cursoId;
        if (cursoId) {
            btn.innerHTML = '<span>Ver detalles</span>';
            btn.setAttribute('onclick', `verDetallesCurso(${cursoId})`);
        }
    });
}


function mostrarOverlayChecking() {
  const overlay = document.getElementById('checkingOverlay');
  if (overlay) overlay.classList.remove('oculto');
}

function ocultarOverlayChecking() {
  const overlay = document.getElementById('checkingOverlay');
  if (overlay) overlay.classList.add('oculto');
}

function mostrarOverlaySeguro() {
  const overlay = document.getElementById('checkingOverlay');
  if (!overlay) {
    console.warn('⚠️ checkingOverlay no existe aún');
    return;
  }
  overlay.classList.remove('oculto');
}


async function comprobarServidor(timeoutMs = 8000) {
  const endpoints = [
    'https://backend-cursos-eepp.onrender.com/',
    'https://backend-cursos-eepp.onrender.com/api/auth/verify-email?token=test'
  ];
  
  for (const endpoint of endpoints) {
    try {
      const res = await fetch(endpoint, {
        method: 'GET',
        headers: { 'Accept': 'application/json' }
      });
      
      // Si responde algo (aunque sea error 400), el servidor está vivo
      console.log(`✅ Endpoint ${endpoint} responde: ${res.status}`);
      return true;
    } catch (error) {
      console.log(`⚠️ Endpoint ${endpoint} no responde: ${error.message}`);
    }
  }
  
  return false; // Ningún endpoint respondió
}


function mostrarOverlaySeguro() {
  const overlay = document.getElementById('checkingOverlay');
  if (!overlay) {
    console.error('❌ checkingOverlay no encontrado');
    return;
  }
  overlay.classList.remove('oculto');
  
  // Actualizar el contador o mensaje
  const counterLabel = document.querySelector('.server-counter-label');
  if (counterLabel) {
    counterLabel.textContent = 'Conectando...';
  }
}


// ===========================
// FUNCIÓN PARA ACTUALIZAR DROPDOWN DE PERFIL
// ===========================
function actualizarPerfilDropdown() {
    console.log("🔄 Actualizando dropdown de perfil...");
    
    if (!estado.usuario) {
        console.log("⚠️ No hay usuario para actualizar dropdown");
        return;
    }
    
    // Actualizar avatar con iniciales
    const avatarElement = document.getElementById('perfil-avatar');
    if (avatarElement) {
        avatarElement.textContent = estado.usuario.iniciales || 'US';
        console.log("✅ Avatar actualizado:", estado.usuario.iniciales);
    }
    
    // Actualizar nombre
    const nombreElement = document.getElementById('perfil-nombre');
    if (nombreElement) {
        nombreElement.textContent = estado.usuario.nombre || 'Usuario';
        console.log("✅ Nombre actualizado:", estado.usuario.nombre);
    }
    
    // Actualizar email
    const emailElement = document.getElementById('perfil-email');
    if (emailElement) {
        emailElement.textContent = estado.usuario.email || 'usuario@email.com';
        console.log("✅ Email actualizado:", estado.usuario.email);
    }
    
    // Actualizar plan
    const planElement = document.getElementById('perfil-plan');
    if (planElement) {
        const plan = estado.usuario.plan || 'Estudiante';
        planElement.textContent = plan;
        
        // Cambiar clase según el plan
        if (plan.toLowerCase().includes('premium')) {
            planElement.className = 'plan-premium';
        } else {
            planElement.className = 'plan-estudiante';
        }
        console.log("✅ Plan actualizado:", plan);
    }
    
    // Actualizar badge de cursos
    const badgeElement = document.getElementById('perfil-badge-cursos');
    if (badgeElement) {
        const numCursos = estado.cursosComprados?.length || 0;
        badgeElement.textContent = numCursos;
        
        // Mostrar badge solo si hay cursos
        if (numCursos > 0) {
            badgeElement.style.display = 'flex';
        } else {
            badgeElement.style.display = 'none';
        }
        console.log("✅ Badge actualizado:", numCursos, "cursos");
    }
    
    console.log("✅ Dropdown de perfil actualizado completamente");
}

// ===========================
// FUNCIÓN PARA MOSTRAR OVERLAY DE SERVIDOR CAÍDO
// ===========================
function mostrarOverlayServerDown() {
  const overlay = document.getElementById('serverDownOverlay');
  if (!overlay) {
    console.error('❌ serverDownOverlay no encontrado');
    return;
  }
  
  // Mostrar el overlay
  overlay.classList.remove('oculto');
  
  // Configurar botón "Reintentar"
  const retryBtn = document.getElementById('retryServer');
  if (retryBtn) {
    // Limpiar event listeners previos
    retryBtn.replaceWith(retryBtn.cloneNode(true));
    const newRetryBtn = document.getElementById('retryServer');
    
    newRetryBtn.onclick = async function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      console.log("🔄 Reintentando conexión al servidor...");
      
      // Mostrar overlay de carga
      mostrarOverlaySeguro();
      
      // Esperar un momento para que se vea el cambio
      await new Promise(resolve => setTimeout(resolve, 500));
      
      try {
        // Intentar conectar de nuevo
        const servidorOK = await comprobarServidor();
        
        if (servidorOK) {
          // ¡Servidor responde!
          ocultarOverlayChecking();
          overlay.classList.add('oculto'); // Ocultar overlay de error
          
          mostrarNotificacion('¡Servidor disponible! Iniciando aplicación...', 'success');
          
          // Pequeña pausa para que se vea la notificación
          setTimeout(() => {
            inicializarAplicacion();
          }, 1000);
          
        } else {
          // Sigue sin responder
          ocultarOverlayChecking();
          mostrarNotificacion('El servidor sigue sin responder', 'error');
          // El overlay de error ya está visible, no lo ocultamos
        }
        
      } catch (error) {
        console.error('Error en reintento:', error);
        ocultarOverlayChecking();
        mostrarNotificacion('Error al verificar el servidor', 'error');
      }
    };
  }
  
  // Configurar botón "Acceder como invitado"
  const guestBtn = document.getElementById('guestFromDown');
  if (guestBtn) {
    guestBtn.onclick = function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      console.log("👤 Activando modo invitado desde server down...");
      
      // Ocultar overlay
      overlay.classList.add('oculto');
      
      // Configurar modo invitado
      configurarModoInvitado();
      
      // Mostrar login
      mostrarLogin();
      
      mostrarNotificacion('Modo invitado activado', 'info');
    };
  }
}

// También necesitas la función para OCULTAR este overlay:
function ocultarOverlayServerDown() {
  const overlay = document.getElementById('serverDownOverlay');
  if (overlay) overlay.classList.add('oculto');
}

// ===========================
// 12. INICIALIZACIÓN FINAL
// ===========================
document.addEventListener('DOMContentLoaded', async () => {
  console.log("🚀 DOM cargado, comprobando servidor...");

  // 👉 1. Mostrar overlay de carga
  mostrarOverlaySeguro();

  // 👉 2. Despertar / comprobar backend
  const servidorOK = await comprobarServidor();

  if (!servidorOK) {
    ocultarOverlayChecking();
    
    // Mostrar overlay de error con retardo para UX
    setTimeout(() => {
      mostrarOverlayServerDown();
      mostrarNotificacion('No se pudo conectar al servidor', 'error');
    }, 300);
    
    return;
  }

  // 👉 3. Backend listo → ocultar loading
  ocultarOverlayChecking();
  mostrarNotificacion('¡Conectado al servidor!', 'success');

  // 👉 4. Inicializar app normalmente
  inicializarAplicacion();


});


window.addEventListener('beforeunload', function() {
    if (estado.usuario 	&& sessionStorage.getItem('usuarioSesion')) {
        estado.usuario.timestamp = Date.now();
        sessionStorage.setItem('usuarioSesion', JSON.stringify(estado.usuario));
    }
});
// ]]>
</script>
<style>
/* =========================
   OVERLAYS APPLE STYLE
========================= */

.apple-overlay {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.92);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2147483647;
  animation: overlayFadeIn 0.35s ease;
}

/* Oculto */
.apple-overlay.oculto {
  display: none;
}

/* =========================
   CARD
========================= */

.apple-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 36px 40px;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.08),
    0 4px 12px rgba(0, 0, 0, 0.04);
  animation: cardPop 0.4s cubic-bezier(.22,1,.36,1);
}

.apple-card h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-top: 16px;
  margin-bottom: 8px;
  color: #1d1d1f;
}

.apple-card p {
  font-size: 0.95rem;
  color: #6e6e73;
  margin: 4px 0;
}

/* =========================
   SPINNER
========================= */

.apple-spinner {
  width: 44px;
  height: 44px;
  margin: 0 auto;
  border-radius: 50%;
  border: 3px solid rgba(0, 0, 0, 0.1);
  border-top-color: #0071e3;
  animation: spin 0.9s linear infinite;
}

/* =========================
   CONTADOR
========================= */

.server-counter {
  margin-top: 14px;
  font-size: 0.85rem;
  color: #86868b;
}

.server-counter-label {
  font-weight: 500;
}

  
/* =========================
   ACCIONES
========================= */

.apple-actions {
  display: flex;
  gap: 12px;
  margin-top: 22px;
  justify-content: center;
  flex-wrap: wrap;
}

.apple-primary-btn {
  background: #0071e3;
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.25s ease;
}

.apple-primary-btn:hover {
  background: #005bb5;
  transform: translateY(-1px);
}

.apple-primary-btn:active {
  transform: translateY(0);
}

.apple-ghost-btn {
  background: transparent;
  border: none;
  color: #0071e3;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  padding: 10px 14px;
  transition: opacity 0.2s ease;
}

.apple-ghost-btn:hover {
  opacity: 0.75;
}

/* =========================
   ANIMACIONES
========================= */

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes overlayFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes cardPop {
  from {
    transform: translateY(12px) scale(0.96);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/* =========================
   RESPONSIVE
========================= */

@media (max-width: 480px) {
  .apple-card {
    padding: 28px 24px;
    border-radius: 18px;
  }

  .apple-card h3 {
    font-size: 1.1rem;
  }

  .apple-primary-btn,
  .apple-ghost-btn {
    width: 100%;
  }
}
  
  .verification-actions {
    display: flex;
    gap: 10px;
    flex-direction: column;
    margin-top: 20px;
}

.verification-btn.secondary {
    background: transparent;
    border: 1px solid #00a8a1;
    color: #00a8a1;
    margin-top: 10px;
}

.verification-btn.secondary:hover {
    background: rgba(0, 168, 161, 0.1);
}

.verification-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
  .message-icon.success {
    background: #34c759; /* Verde para éxito */
}

.message-icon.warning {
    background: #ff9500; /* Naranja para advertencia */
}

.message-icon.error {
    background: #ff3b30; /* Rojo para error */
}

/* Estilos específicos para "ya verificado" */
.verification-message.already-verified {
    background: rgba(52, 199, 89, 0.05);
    border-radius: 12px;
    padding: 15px;
}

/* Botón secundario */
.secondary-btn {
    background: transparent;
    border: 1px solid #00a8a1;
    color: #00a8a1;
    margin-top: 10px;
}

.secondary-btn:hover {
    background: rgba(0, 168, 161, 0.1);
}
/* Estilos para los diferentes tipos de mensaje */
.message-icon.success {
    background: #34c759; /* Verde - éxito */
    color: white;
}

.message-icon.warning {
    background: #ff9500; /* Naranja - advertencia */
    color: white;
}

.message-icon.error {
    background: #ff3b30; /* Rojo - error */
    color: white;
}

/* Icono especial para "token reemplazado" */
.message-icon[text-content="🔄"] {
    background: #007aff; /* Azul - información */
    font-size: 24px;
}

/* Estilo para mensaje "ya verificado" */
.verification-message .success-message {
    background: rgba(52, 199, 89, 0.1);
    border-left: 4px solid #34c759;
    padding: 12px;
    border-radius: 8px;
    margin: 10px 0;
}  
</style>
<!--Eres el responsable de informar a los visitantes de tu blog qu\xe9 cookies utilizas y qu\xe9 datos suyos se recogen. Blogger facilita una notificaci\xf3n est\xe1ndar para que la uses en tu blog, aunque puedes personalizarla o crear tu propia notificaci\xf3n. Consulta http://www.blogger.com/go/cookiechoices para obtener m\xe1s informaci\xf3n.-->
<script defer='' src='/js/cookienotice.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function(event) {
      window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
          (window.cookieOptions && cookieOptions.msg) || 'Este sitio utiliza cookies de Google para prestar sus servicios y para analizar su tr\xe1fico. Tu direcci\xf3n IP y user-agent se comparten con Google, junto con las m\xe9tricas de rendimiento y de seguridad, para garantizar la calidad del servicio, generar estad\xedsticas de uso y detectar y solucionar abusos.',
          (window.cookieOptions && cookieOptions.close) || 'Entendido',
          (window.cookieOptions && cookieOptions.learn) || 'M\xe1s informaci\xf3n',
          (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
    });
  </script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/1350801215-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY62J1Q-kJfqGai3KzcsrnAvaNb2gg:1767700067466';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d8157697924135710057','//estoesunaprueba1232135.blogspot.com/2026/01/algebra.html','8157697924135710057');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '8157697924135710057', 'title': 'Prueba', 'url': 'https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html', 'canonicalUrl': 'https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html', 'homepageUrl': 'https://estoesunaprueba1232135.blogspot.com/', 'searchUrl': 'https://estoesunaprueba1232135.blogspot.com/search', 'canonicalHomepageUrl': 'https://estoesunaprueba1232135.blogspot.com/', 'blogspotFaviconUrl': 'https://estoesunaprueba1232135.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'es', 'localeUnderscoreDelimited': 'es', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Prueba - Atom\x22 href\x3d\x22https://estoesunaprueba1232135.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Prueba - RSS\x22 href\x3d\x22https://estoesunaprueba1232135.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Prueba - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/8157697924135710057/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Prueba - Atom\x22 href\x3d\x22https://estoesunaprueba1232135.blogspot.com/feeds/7145357825036980313/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/ef1c8ec4af282f31', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Obtener enlace', 'key': 'link', 'shareMessage': 'Obtener enlace', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Compartir en Facebook', 'target': 'facebook'}, {'name': 'Escribe un blog', 'key': 'blogThis', 'shareMessage': 'Escribe un blog', 'target': 'blog'}, {'name': 'X', 'key': 'twitter', 'shareMessage': 'Compartir en X', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Compartir en Pinterest', 'target': 'pinterest'}, {'name': 'Correo electr\xf3nico', 'key': 'email', 'shareMessage': 'Correo electr\xf3nico', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27es\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Leer m\xe1s', 'pageType': 'item', 'postId': '7145357825036980313', 'pageName': '\xc1lgebra', 'pageTitle': 'Prueba: \xc1lgebra'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Editar', 'linkCopiedToClipboard': 'El enlace se ha copiado en el Portapapeles.', 'ok': 'Aceptar', 'postLink': 'Enlace de la entrada'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': 'Personalizado', 'isResponsive': true, 'isAlternateRendering': false, 'isCustom': true}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': '\xc1lgebra', 'description': '                 \xc1lgebra - Contenido del Curso | Academia Ohara                                                                             ...', 'url': 'https://estoesunaprueba1232135.blogspot.com/2026/01/algebra.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 7145357825036980313}}, {'name': 'widgets', 'data': [{'title': 'Entradas del blog', 'type': 'Blog', 'sectionId': 'post-body', 'id': 'Blog1', 'posts': [{'id': '7145357825036980313', 'title': '\xc1lgebra', 'showInlineAds': false}], 'headerByline': {'regionName': 'header1', 'items': [{'name': 'timestamp', 'label': ''}]}, 'footerBylines': [{'regionName': 'footer1', 'items': [{'name': 'comments', 'label': 'comments'}, {'name': 'labels', 'label': ''}, {'name': 'icons', 'label': ''}]}], 'allBylineItems': [{'name': 'timestamp', 'label': ''}, {'name': 'comments', 'label': 'comments'}, {'name': 'labels', 'label': ''}, {'name': 'icons', 'label': ''}]}]}]);
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'post-body', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1633826892-lbx__es.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/828616780-lightbox_bundle.css'}, 'displayModeFull'));
</script>
</body>
</html>